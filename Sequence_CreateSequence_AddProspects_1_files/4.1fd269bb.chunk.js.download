(this["webpackJsonpshv3-reactapp"]=this["webpackJsonpshv3-reactapp"]||[]).push([[4],{2088:function(e,t,s){"use strict";s(1);var n=s(0);t.a=e=>{let{className:t}=e;return Object(n.jsx)("div",{className:"smtp-label-container ".concat(t),children:Object(n.jsx)("span",{className:"semibold-1 font-medium gray-txt-15",children:"SMTP"})})}},2090:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>String.fromCharCode(65+e-1);function a(e,t,s,a){return e?"You have reached the maximum number of variants allowed":t&&!s?"Your monthly quota is over":"Generate AI optimized email using variant ".concat(n(a))}},2121:function(e,t,s){"use strict";var n;function a(e){if("TEXTAREA"!==e.nodeName)return!1;if("undefined"===typeof n){var t=document.createElement("textarea");t.value=1,n=!!t.firstChild}return n}t.a=function(e,t){if(e.focus(),document.selection){var s=document.selection.createRange();return s.text=t,s.collapse(!1),void s.select()}if(!document.execCommand("insertText",!1,t)){var n=e.selectionStart,i=e.selectionEnd;if("function"===typeof e.setRangeText)e.setRangeText(t);else{var o=document.createRange(),l=document.createTextNode(t);if(a(e)){var c=e.firstChild;if(c){for(var r=0,d=null,h=null;c&&(null===d||null===h);){var u=c.nodeValue.length;n>=r&&n<=r+u&&o.setStart(d=c,n-r),i>=r&&i<=r+u&&o.setEnd(h=c,i-r),r+=u,c=c.nextSibling}n!==i&&o.deleteContents()}else e.appendChild(l)}if(a(e)&&"#text"===o.commonAncestorContainer.nodeName)o.insertNode(l);else{var m=e.value;e.value=m.slice(0,n)+t+m.slice(i)}}e.setSelectionRange(n+t.length,n+t.length);var b=document.createEvent("UIEvent");b.initEvent("input",!0,!1),e.dispatchEvent(b)}}},2177:function(e,t,s){"use strict";s.d(t,"a",(function(){return He}));var n=s(2),a=s(15),i=s(29),o=s(20),l=s(97),c=s(1),r=s.n(c),d=s(92),h=s(14),u=s.n(h),m=s(27),b=s(952),p=s.n(b),g=s(5),j=s(2058),v=s(825),S=s(8),O=s(784),x=s(341),E=s(40),T=s(174),w=s(3),f=s(170),C=s(2197),y=s(527),N=s(300),A=s(19),I=s(18),R=s(16),M=s(31),q=s(0);var P=e=>{let{titleValue:t,titleError:s,onInputChange:n,onInputBlur:a}=e;const i=u()(["email-modal-input-wrapper title-input-wrapper",{"input-with-error":s}]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:i,children:[Object(q.jsx)("p",{className:"email-modal-input-label regular-1",children:"Title"}),Object(q.jsx)("div",{className:"email-modal-input-divider"}),Object(q.jsx)(M.a,{name:"title",placeholder:"Enter a title",size:M.a.Size.Large,variant:s&&M.a.Variant.Error,value:t,onChange:n,onBlur:a,className:"email-modal-input-box title-input"})]}),s&&Object(q.jsxs)("div",{className:"email-modal-input-error with-margin",children:[Object(q.jsx)("img",{src:R.a.AlertTriangleRed,alt:"Alert"}),s]})]})},_=s(2121),L=s(487),k=s(850),D=s(11),H=s(849),B=s(706),F=s(407);var V=e=>{let{subjectValue:t,subjectError:s,subjectPlaceholder:n,isGeneratingWithAi:a=!1,disableEditMode:i,subjectInputRef:o,onSubjectKeyUp:l,onInputChange:r,onInputBlur:d,mergeTagOptions:h,sendSpintaxMixpanelEvent:m,setSubjectError:b}=e;const[p,j]=Object(c.useState)(!1),[v,S]=Object(c.useState)(!1),O=()=>{j(!1)},x=u()(["email-modal-input-wrapper",{"input-with-error":s}]);return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:x,children:[a&&Object(q.jsx)("div",{className:"ai-generated-subject-loading",children:Object(q.jsx)(B.b,{textEditorSkeletonsList:F.a.subjectSkeleton})}),Object(q.jsx)("p",{className:"email-modal-input-label regular-1",children:"Subject"}),Object(q.jsx)("div",{className:"email-modal-input-divider"}),Object(q.jsx)(M.a,{name:"subject",onKeyUp:l,placeholder:"".concat(n,"..."),size:M.a.Size.Large,variant:s&&M.a.Variant.Error,value:t,onChange:r,onBlur:d,ref:o,disabled:i,className:"email-modal-input-box",icons:[{place:M.a.IconPlace.Right,component:Object(q.jsx)(k.a,{showEmojiPicker:p,onEmojiChange:e=>{Object(_.a)(o.current,e.native),O()},onClick:()=>{i||j(!0)},closeEmojiPicker:O})},Object(A.a)(I.a.SEQUENCE_STEP_UPDATE)&&{place:M.a.IconPlace.Right,component:Object(q.jsx)(L.b,{mergeTags:h,onAddMergeTag:e=>{(e=>{Object(_.a)(o.current,e.tag),r(o.current.value,{target:{name:"subject"}})})(e)},onAddVariableTag:e=>{Object(_.a)(o.current,e)},disabled:i,placement:D.d.BottomEnd,hideVariableTags:["{{SenderSignature}}"],children:Object(q.jsx)("div",{children:Object(q.jsx)(D.c,{text:"Merge Tags / Variable Tags",placement:D.d.Bottom,className:"sidenav__item-tooltip",children:Object(q.jsx)("div",{className:"spintax-icon h-18px ".concat(i?"disabled":"").trim(),children:Object(q.jsx)(g.y,{height:18,width:18})})})})})},Object(A.a)(I.a.SEQUENCE_STEP_UPDATE)&&{place:M.a.IconPlace.Right,component:Object(q.jsx)(H.a,{show:v,handleOnSpintaxToggle:e=>{i||S(e)},handleAddSpintax:e=>{Object(_.a)(o.current,e),m()},spintaxFor:"subject"})}]})]})})};var U=function(e,t){return 1===e?"1 ".concat(t):"".concat(e," ").concat(t,"s")};var G=e=>{let{preheaderValue:t,preheaderError:s,showPreheaderInput:n,showPreheaderRecommendation:a,preheaderRef:i,onPreheaderChange:o,mergeTagOptions:l,t:r,sendSpintaxMixpanelEvent:d,disableEditMode:h,setPreheaderError:m}=e;const[b,p]=Object(c.useState)(!1),[j,v]=Object(c.useState)(!1),S=()=>{p(!1)},O=u()(["email-modal-input-wrapper input-wrapper-preheader",{"input-with-error":s}]),x=u()(["helper-wrapper",{"with-recommendation":a}]),E=Object(c.useMemo)((()=>{var e;const s=(null===(e=Object(y.c)(t||""))||void 0===e?void 0:e.subjectLength)||0;return U(s,"Character")}),[t]);return Object(q.jsxs)(q.Fragment,{children:[n&&Object(q.jsxs)("div",{className:O,children:[Object(q.jsx)("p",{className:"email-modal-input-label label-for-preheader regular-1",children:r("labels.pre_header")}),Object(q.jsx)("div",{className:"email-modal-input-divider"}),Object(q.jsx)(M.a,{name:"preheader",placeholder:r("labels.pre_header_placeholder").toString(),size:M.a.Size.Large,variant:s&&M.a.Variant.Error,value:t,onChange:o,className:"email-modal-input-box",ref:i,disabled:h,icons:[{place:M.a.IconPlace.Right,component:Object(q.jsx)(k.a,{showEmojiPicker:b,onEmojiChange:e=>{Object(_.a)(i.current,e.native),S()},onClick:()=>{h||p(!0)},closeEmojiPicker:S})},Object(A.a)(I.a.SEQUENCE_STEP_UPDATE)&&{place:M.a.IconPlace.Right,component:Object(q.jsx)(L.b,{mergeTags:l,onAddMergeTag:e=>{var t;Object(_.a)(i.current,e.tag),o({target:{name:"preheader",value:(null===(t=i.current)||void 0===t?void 0:t.value)||""}})},onAddVariableTag:e=>{Object(_.a)(i.current,e)},disabled:h,placement:D.d.BottomEnd,hideVariableTags:["{{SenderSignature}}"],children:Object(q.jsx)("div",{children:Object(q.jsx)(D.c,{text:"Merge Tags / Variable Tags",placement:D.d.Bottom,className:"sidenav__item-tooltip",children:Object(q.jsx)("div",{className:"spintax-icon h-18px ".concat(h?"disabled":"").trim(),children:Object(q.jsx)(g.y,{height:18,width:18})})})})})},Object(A.a)(I.a.SEQUENCE_STEP_UPDATE)&&{place:M.a.IconPlace.Right,component:Object(q.jsx)(H.a,{show:j,handleOnSpintaxToggle:e=>{v(e)},handleAddSpintax:e=>{Object(_.a)(i.current,e),d()},spintaxFor:"pre-header"})}]})]}),s&&Object(q.jsxs)("div",{className:"d-flex justify-content-between align-items-center email-modal-input-error-wrapper",children:[Object(q.jsxs)("div",{className:"email-modal-input-error",children:[Object(q.jsx)("img",{src:R.a.AlertTriangleRed,alt:"Alert"}),s]}),Object(q.jsx)("p",{className:"subject-length",children:E})]}),!s&&t.length>0&&Object(q.jsxs)("div",{className:x,children:[a&&Object(q.jsx)(q.Fragment,{children:Object(q.jsx)("p",{className:"recommendation",children:r("labels.pre_header_recommendation")})}),Object(q.jsx)("p",{className:"subject-length",children:E})]})]})},z=s(90);var Y=e=>{let{values:t,errors:s,sendThisEmailInSameThreadCheckbox:n,showTitle:a,subjectPlaceholder:i,disableEditMode:o,showPreheaderRecommendation:l,showPreheaderInput:r,stepNumber:d,prevStepSubject:h,isTemplateEditor:m,isGeneratingWithAi:b=!1,subjectInputRef:p,preheaderRef:j,onInputChange:v,onInputBlur:S,onSubjectKeyUp:O,mergeTagOptions:x,onPreheaderChange:E,showHidePreheaderInput:T,onShowHideSendThisEmailInSameThreadCheckbox:w,isFirstAutomatedEmailStep:f,sendSpintaxMixpanelEvent:C,t:y,setSubjectError:N,setPreheaderError:A,isSubsequence:I=!1}=e;const M=u()(["subject-preheader-util-container d-flex align-items-start",{"justify-content-end":1===d,"justify-content-between":I||1!==d||s.subject}]),_=Object(c.useMemo)((()=>b&&!n?"":!m&&(I||1!==d)&&n&&f?h||"":(null===t||void 0===t?void 0:t.subject)||""),[m,d,n,f,h,null===t||void 0===t?void 0:t.subject,b]);return Object(q.jsxs)("div",{className:"email-modal--header",children:[a&&Object(q.jsx)(P,{titleValue:t.title,titleError:s.title,onInputChange:v,onInputBlur:S}),Object(q.jsx)(V,{subjectValue:_,subjectError:I?"":s.subject,subjectPlaceholder:i,disableEditMode:o||!m&&(I||1!==d)&&n&&f,onSubjectKeyUp:O,onInputChange:v,onInputBlur:S,subjectInputRef:p,mergeTagOptions:x,sendSpintaxMixpanelEvent:C,isGeneratingWithAi:b&&!n,setSubjectError:e=>{I||N(e)}}),Object(q.jsxs)("div",{className:M,children:[Object(q.jsxs)("div",{className:"d-flex flex-column gap-8",children:[s.subject&&Object(q.jsxs)("div",{className:"email-modal-input-error mt-0",children:[Object(q.jsx)("img",{src:R.a.AlertTriangleRed,alt:"Alert"}),s.subject]}),!m&&f&&(I||1!==d)&&Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[Object(q.jsx)(z.a,{checked:n,onChange:w,label:"Send this email in same thread as follow-up",disabled:b}),Object(q.jsx)(D.c,{className:"pre-header-tooltip",text:"If this option is enabled, you won't be able to modify the subject line of this step and it will be sent in the same thread as the previous step email.",children:Object(q.jsx)("div",{className:"info-icon",children:Object(q.jsx)(g.Mb,{})})})]})]}),!m&&Object(q.jsxs)("div",{className:"d-flex justify-content-end align-items-center  preheader-popover",children:[Object(q.jsx)("button",{className:"preheader-text-label",onClick:()=>{T(!r)},type:"button",children:y("labels.pre_header_label")}),Object(q.jsx)(D.c,{className:"pre-header-tooltip",text:"".concat(y("labels.pre_header_tooltip_1")," ").concat(y("labels.pre_header_tooltip_2")),children:Object(q.jsx)("div",{className:"info-icon",children:Object(q.jsx)(g.Ib,{})})})]})]}),!a&&Object(q.jsx)(G,{preheaderValue:t.preheader,preheaderError:s.preheader,showPreheaderRecommendation:l,onPreheaderChange:E,preheaderRef:j,mergeTagOptions:x,showPreheaderInput:r,t:y,sendSpintaxMixpanelEvent:C,disableEditMode:o,setPreheaderError:A})]})},K=s(2178),W=s(55),X=s(2235),Q=s(2229);var J=e=>{let{t:t,shouldRenderTemplate:s,showTemplates:n,hideTemplateModal:a,onTemplateChange:i,showSendTestEmailModal:o,handleSendTestEmailSubmit:l,showHideSendTestEmailModal:c,sendTestEmailRequestStatus:r,showEmailDisconnectedModal:d,handleConnectNowClick:h,showHideEmailDisconnectedModal:u,showEmailNotConnectedModal:m,showHideEmailNotConnectedModal:b,showEmailNotAddedModal:p,showHideEmailNotAddedModal:g,showConfirmationModal:j,onConfirmationModalContinue:v,showHideConfirmationModal:S}=e;const O=t("labels.cancel"),x=t("labels.connect_now"),E=Object(W.c)(r);return Object(q.jsxs)(q.Fragment,{children:[s&&Object(q.jsx)(Q.a,{show:n,onClose:a,onTemplateChange:i}),o&&Object(q.jsx)(X.a,{show:o,title:Object(q.jsxs)("div",{className:"send-test-email-modal-header",children:[Object(q.jsx)("img",{src:R.a.SentEmailBlue,alt:"Icon"}),Object(q.jsx)("h2",{children:t("messages.test_email_title")})]}),content:Object(y.p)(),onSubmit:l,onClose:()=>c(!1),showInput:!0,label:"Email Address",submitButtonText:t("labels.send"),isSubmitLoading:E,isSubmitDisabled:E,cancelButtonText:O}),d&&Object(q.jsx)(X.a,{show:d,title:Object(q.jsxs)("div",{className:"send-test-email-modal-header",children:[Object(q.jsx)("img",{src:R.a.AlertTriangle,alt:"Icon"}),Object(q.jsx)("h2",{children:t("messages.email_account_disconnected_title")})]}),content:Object(y.k)(),onSubmit:h,onClose:()=>u(!1),showInput:!1,submitButtonText:x,isSubmitLoading:!1,isSubmitDisabled:!1,cancelButtonText:O}),m&&Object(q.jsx)(X.a,{show:m,title:Object(q.jsxs)("div",{className:"send-test-email-modal-header",children:[Object(q.jsx)("img",{src:R.a.AlertTriangle,alt:"Icon"}),Object(q.jsx)("h2",{children:t("messages.email_account_not_connected_title")})]}),content:Object(y.l)(),onSubmit:()=>h("sequence-settings"),onClose:()=>b(!1),showInput:!1,submitButtonText:x,isSubmitLoading:!1,isSubmitDisabled:!1,cancelButtonText:O}),p&&Object(q.jsx)(X.a,{show:p,title:Object(q.jsxs)("div",{className:"send-test-email-modal-header",children:[Object(q.jsx)("img",{src:R.a.AlertTriangle,alt:"Icon"}),Object(q.jsx)("h2",{children:t("messages.email_not_added_title")})]}),content:Object(y.m)(),onSubmit:h,onClose:()=>g(!1),showInput:!1,submitButtonText:x,isSubmitLoading:!1,isSubmitDisabled:!1,cancelButtonText:O}),j&&Object(q.jsx)(X.a,{show:j,title:Object(q.jsxs)("div",{className:"send-test-email-modal-header",children:[Object(q.jsx)("img",{src:R.a.InfoCircleYellow,alt:"Icon"}),Object(q.jsx)("h2",{children:t("messages.confirmation_modal_title")})]}),className:"save-changes-modal",content:Object(y.i)(),onSubmit:v,onClose:()=>S(!1),showInput:!1,submitButtonText:t("labels.close"),isSubmitLoading:!1,isSubmitDisabled:!1,cancelButtonText:t("labels.cancel")})]})},Z=s(158),$=s(2108),ee=s(107),te=s(128),se=s(2090),ne=s(161),ae=s(9);var ie=e=>{let{textOnlyEmail:t,isFirstStepTextOnlyEmail:s,firstStepTextOnlyEmail:n}=e;const[a,i]=Object(c.useState)(!1),o=Object(c.useMemo)((()=>s||n?{title:"Text only email",description:Object(q.jsxs)("p",{children:["You have enabled \u201cSend first email as text only\u201d option in"," ",Object(q.jsx)("span",{children:n?"Safety Settings":"Admin Settings"}),", any images in the email will be removed. HTML links will also be disabled, all type of formatting will be removed and emails will be sent in plain text."]})}:t===ae.M.TEXT_ONLY_EMAIL?{title:"Text only email",description:Object(q.jsxs)("p",{children:["You have enabled \u201cText only email\u201d option in"," ",Object(q.jsx)("span",{children:"Safety Settings"}),", any images in the email will be removed. HTML links will also be disabled, all type of formatting will be removed and emails will be sent in plain text."]})}:t===ae.M.REMOVE_STYLING_AUTOMATICALLY?{title:"Styling Removes Automatically",description:Object(q.jsxs)("p",{children:["You have enabled \u201cRemove Styling Automatically\u201d option in"," ",Object(q.jsx)("span",{children:"Safety Settings"}),", HTML Style will be removed from this sequence's emails."]})}:{title:"",description:""}),[t]);return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(D.b,{show:a,onToggle:i,content:Object(q.jsx)("div",{className:"content",children:o.description}),placement:D.d.Left,rootClose:!0,trigger:D.i.Hover,className:"text-only-email-popover",children:Object(q.jsxs)("div",{className:"text-only-email-badge",children:[Object(q.jsx)("div",{className:"dot"}),Object(q.jsx)("p",{children:o.title})]})})})},oe=s(4),le=s(227),ce=s(211),re=s(287),de=s(229),he=s(228);var ue=e=>{let{show:t,onClose:s,sendUpdateSequenceSettingsRequest:n,onSave:a}=e;const o=Object(i.g)(),[l,r]=Object(c.useState)(!1);return Object(q.jsx)(E.a,{show:t,onClose:s,hideHeader:!0,hideFooter:!0,backdrop:"static",className:"change-email-modal html-content-detected-modal",children:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(le.a,{children:Object(q.jsxs)("div",{className:"delete-account-title",children:[Object(q.jsx)("div",{className:"delete-account-title-icon",children:Object(q.jsx)(g.d,{})}),Object(q.jsx)("h1",{children:"HTML Content Detected"})]})}),Object(q.jsx)(ce.a,{content:"This sequence has 'text-only' preference for email, but you're saving the step with HTML tags. The system might remove HTML formatting due to current setting."}),Object(q.jsx)(ce.a,{content:Object(q.jsxs)("span",{children:[Object(q.jsx)("span",{className:"font-bold",children:"Note:"})," You can change this setting from Sequence's safety settings."]})}),Object(q.jsx)(ce.a,{content:"Are you sure you want to save this email?"}),Object(q.jsx)(re.a,{children:Object(q.jsx)(z.a,{checked:l,onChange:r,label:"Don\u2019t show me again"})}),Object(q.jsx)(de.a,{}),Object(q.jsxs)(he.a,{children:[Object(q.jsx)(oe.d,{variant:"secondary",onClick:s,className:"secondary-cta-btn",children:"Cancel"}),Object(q.jsx)(oe.d,{onClick:()=>{l&&(()=>{const e={settings:[{code:ae.x.SHOW_TEXT_ONLY_OPTION,value:l?"0":"1"}]},{pathname:t}=o.location,s=t.split("/");n(s[2],e)})(),a()},children:"Yes"})]})]})})},me=s(6),be=s(21),pe=s(95),ge=s(96),je=s(313),ve=s.n(je),Se=s(2241);var Oe=()=>{const e=Object(c.useRef)(null);return Object(c.useEffect)((()=>{const t=setTimeout((()=>{var t;(null===e||void 0===e?void 0:e.current)&&(null===e||void 0===e||null===(t=e.current)||void 0===t||t.play())}),2e3);return()=>clearTimeout(t)}),[]),Object(q.jsx)("div",{className:"save-ai-generated-email-animation-container",children:Object(q.jsx)(ve.a,{className:"star-animation",animationData:Se,loop:!1,autoplay:!1,lottieRef:e})})},xe=s(258),Ee=s(145),Te=s(350),we=s(53);var fe=e=>{let{handleStylingDetectedAction:t,hideStylingDetectedActionBar:s}=e;return Object(q.jsxs)("div",{className:"styling-detected-action-bar",children:[Object(q.jsxs)("div",{className:"styling-detected-action-bar__content",children:[Object(q.jsxs)("h1",{children:["Styling Detected ",Object(q.jsx)("span",{children:"(Remove to avoid spam filters)"}),":"]}),Object(q.jsxs)("div",{className:"styling-detected-action-bar__actions",children:[Object(q.jsx)(D.c,{text:"Removes all styling (HTML,CSS, inline style tags) to reduce spam risk and increase inbox placement.",placement:D.d.Top,className:"tooltip-styling-detected",children:Object(q.jsxs)("button",{type:"button",className:"styling-detected-action-bar__actions--btn",onClick:()=>t(f.d.RemoveStyling),children:[Object(q.jsx)(we.M,{}),Object(q.jsx)("p",{children:"Remove Styling"})]})}),Object(q.jsx)("div",{className:"styling-detected-action-bar__actions--divider"}),Object(q.jsx)(D.c,{text:"Keeps all styling intact including colors, fonts, and formatting. May have slightly lower deliverability",placement:D.d.Top,className:"tooltip-styling-detected",children:Object(q.jsxs)("button",{type:"button",className:"styling-detected-action-bar__actions--btn",onClick:()=>t(f.d.KeepStyling),children:[Object(q.jsx)(we.v,{}),Object(q.jsx)("p",{children:"Keep Styling"})]})})]})]}),Object(q.jsx)("button",{type:"button",className:"styling-detected-action-bar__close",onClick:s,children:Object(q.jsx)(g.eb,{})})]})},Ce=s(748);const ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Object(Ce.a)(e):Object(Ce.b)(e)};var Ne=s(973);class Ae extends r.a.PureComponent{constructor(e){var t,s;super(e),t=this,this.subjectInputRef=void 0,this.preheaderRef=void 0,this.submitButtonRef=void 0,this.editorRef=void 0,this.debouncedContentEmailSuggestionHandler=p()((e=>{this.contentEmailSuggestionHandler(e)}),700),this.onContentKeyUp=()=>{const{values:e}=this.state;this.debouncedContentEmailSuggestionHandler((null===e||void 0===e?void 0:e.content)||"")},this.onShowSidebarFooterChange=e=>{this.setState({showSidebarFooter:e})},this.onSelectedProspectInEmailPreviewChange=e=>{this.setState({selectedProspectInEmailPreview:e})},this.onSelectedEmailInEmailPreviewChange=e=>{this.setState({selectedEmailInEmailPreview:e})},this.onSearchProspect=e=>{var t;const{sequence:s,sendGetProspectsOverviewRequest:n}=this.props;n(null===s||void 0===s||null===(t=s.id)||void 0===t?void 0:t.toString(),e)},this.debouncedSubjectEmailSuggestionHandler=p()((e=>{this.subjectEmailSuggestionHandler(e)}),700),this.onSubjectKeyUp=()=>{const{values:e}=this.state;this.debouncedSubjectEmailSuggestionHandler((null===e||void 0===e?void 0:e.subject)||"")},this.subjectEmailSuggestionHandler=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{subjectPercentage:n,subjectStatus:a,subjectLength:i}=Object(y.c)(s?"Re. ".concat(e):e);t.setState({subjectEmailSuggestion:{subjectPercentage:n,subjectStatus:a,subjectLength:i}})},this.contentEmailSuggestionHandler=e=>{const{isTemplateEditor:t,fields:s,stepNumber:n}=this.props,a=this.getMergeTags(s),{wordCount:i,personalization:o,link:l,spammy:c}=Object(y.b)({content:e,mergeTagOptions:a,stepNumber:t?1:n}),{wordPercentage:r,wordStatus:d,wordLength:h}=i,{personalizationPercentage:u,personalizationStatus:m,personalizationLength:b}=o,{linkPercentage:p,linkStatus:g,linkLength:j}=l,{spammyPercentage:v,spammyStatus:S,spammyLength:O,spammyWords:x}=c;this.setState({wordEmailSuggestion:{wordPercentage:r,wordStatus:d,wordLength:h},personalizationEmailSuggestion:{personalizationPercentage:u,personalizationStatus:m,personalizationLength:b},linkEmailSuggestion:{linkPercentage:p,linkStatus:g,linkLength:j},spammyEmailSuggestion:{spammyPercentage:v,spammyStatus:S,spammyLength:O,spammyWords:x}})},this.showHideSendTestEmailModal=e=>{const{allowEmptySubject:t}=this.props;e&&this.validateAll({validateSubject:!t})||this.setState({showSendTestEmailModal:e})},this.showHideEmailDisconnectedModal=e=>{this.setState({showSendTestEmailModal:!1,showEmailDisconnectedModal:e})},this.showHideEmailNotConnectedModal=e=>{this.setState({showSendTestEmailModal:!1,showEmailNotConnectedModal:e})},this.showHideEmailNotAddedModal=e=>{this.setState({showSendTestEmailModal:!1,showEmailNotAddedModal:e})},this.showHideConfirmationModal=e=>{this.setState({showConfirmationModal:e})},this.onShowHTMLContentDetectedModal=()=>{this.setState({showHTMLContentDetectedModal:!0})},this.onHideHTMLContentDetectedModal=()=>{this.setState({showHTMLContentDetectedModal:!1})},this.removeReferrerFromUrl=()=>{var e,t;const s=new URLSearchParams(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.search);if("inboxRadar"===s.get("referrer")){s.delete("referrer");const e=window.location.pathname+(s.toString()?"?".concat(s.toString()):"");window.history.replaceState({},"",e)}},this.showInboxTestModal=()=>{this.setState({showInboxTestModal:!0})},this.hideInboxTestModal=()=>{this.setState({showInboxTestModal:!1})},this.showStylingDetectedActionBar=e=>{var t;const{settings:s}=this.props,{values:n,stylingPreference:a}=this.state,i=null!==e&&void 0!==e?e:n.content,o=null===s||void 0===s||null===(t=s.find((e=>e.code===ae.x.TEXT_ONLY_EMAIL)))||void 0===t?void 0:t.value,l=this.getFirstStepTextOnlyEmailSetting();let c=!1;if(c=o===ae.M.TEXT_ONLY_EMAIL||l?/style\s*=\s*['"][^'"]*['"]|style\s*=\s*[^\s>]+|<style[\s\S]*?>|<font[\s\S]*?>|<\/?(b|i|u|s|strike|a|img|strong)\b[^>]*>/i.test(i):/style\s*=\s*['"][^'"]*['"]|style\s*=\s*[^\s>]+|<style[\s\S]*?>|<font[\s\S]*?>/i.test(i),c)if(o===ae.M.TEXT_ONLY_EMAIL||o===ae.M.REMOVE_STYLING_AUTOMATICALLY||l||a===f.d.RemoveStyling){var r;const e=ye(i,o===ae.M.TEXT_ONLY_EMAIL||l);if(null===(r=this.editorRef.current)||void 0===r||r.setContent(e),this.editorRef.current){var d;const e=this.editorRef.current;if("function"===typeof(null===(d=e.selection)||void 0===d?void 0:d.select)&&"function"===typeof e.getBody){const t=e.getBody();if(t){const s=e.dom.createRng();s.selectNodeContents(t),s.collapse(!1),e.selection.setRng(s)}}}}else a!==f.d.KeepStyling&&this.setState({showStylingDetectedActionBar:!0})},this.hideStylingDetectedActionBar=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.d.KeepStyling;t.setState({showStylingDetectedActionBar:!1,stylingPreference:e})},this.handleStylingDetectedAction=e=>{const{values:t}=this.state,{sequence:s,updateSequenceConfigTextOnlyEmailValue:n,sendUpdateSequenceSettingsRequest:a}=this.props;if(e===f.d.RemoveStyling){var i;const e=ye(t.content);null===(i=this.editorRef.current)||void 0===i||i.setContent(e),(null===s||void 0===s?void 0:s.id)&&(a(s.id.toString(),{settings:[{code:ae.x.TEXT_ONLY_EMAIL,value:ae.M.REMOVE_STYLING_AUTOMATICALLY}]}),n())}this.hideStylingDetectedActionBar(e)},this.handleAiVariantAttachments=e=>{this.setState({attachments:e,attachmentsSizeInBytes:Object(y.h)(e)})},this.onShowHideSendThisEmailInSameThreadCheckbox=()=>{const{isAiGeneratedVariant:e,isGeneratingWithAi:t,isActionVariantGeneratedByAi:s,subject:a}=this.props,{values:i,sendThisEmailInSameThreadCheckbox:o,errors:l}=this.state,c=!o,r=!c&&(e||t||s);this.setState({values:Object(n.a)(Object(n.a)({},i),{},{subject:r&&a||""}),sendThisEmailInSameThreadCheckbox:c},(()=>{if(c){const e=Object(n.a)({},l),t=this.validate("subject","");e.subject=t,this.setState({errors:e})}}))},this.showHidePreheaderInput=e=>{const{values:t,errors:s,dirty:a}=this.state;this.setState({showPreheaderInput:e,values:Object(n.a)(Object(n.a)({},t),{},{preheader:""}),errors:Object(n.a)(Object(n.a)({},s),{},{preheader:""}),dirty:Object(n.a)(Object(n.a)({},a),{},{preheader:!1})})},this.handleConnectNowClick=e=>{const{history:t,match:s,onClose:n,resetContactsRequest:a}=this.props;var i;"sequence-settings"===e?(n(),a(),t.push("/sequence/".concat(null===s||void 0===s||null===(i=s.params)||void 0===i?void 0:i.sequenceId,"/settings"))):t.push("/email-accounts")},this.onConfirmationModalContinue=()=>{const{onClose:e,resetContactsRequest:t}=this.props,{shouldInitiateAChat:s}=this.state;t(),s?(e(),Object(te.a)()):e()},this.checkIsDirty=()=>{const{dirty:e}=this.state;let t=!1;return Object.keys(e).filter((e=>"email"!==e)).forEach((s=>{!0===e[s]&&(t=!0)})),t},this.onInitiateAChat=()=>{const{onClose:e,resetContactsRequest:t}=this.props;this.checkIsDirty()?(this.showHideConfirmationModal(!0),this.setState({shouldInitiateAChat:!0})):(e(),t(),Object(te.a)())},this.onCloseHandler=()=>{const{onClose:e,resetContactsRequest:t}=this.props;this.checkIsDirty()?this.showHideConfirmationModal(!0):(e(),t())},this.handleSendTestEmailSubmit=(e,t)=>{var s;null===t||void 0===t||t.preventDefault();const{showTitle:a,prevStepSubject:i}=this.props;if(this.onValueChange(e,"email"),this.validateAll({validateEmail:!0,email:e}))return;const{values:{subject:o,content:l,preheader:c},attachments:r,selectedEmailInEmailPreview:d,selectedProspectInEmailPreview:h}=this.state,{testMailOptions:u,sendTestEmailRequest:m}=this.props;Object(y.w)(e);const b=[];e.split(",").forEach((e=>b.push(e.trim())));const p=r.map((e=>e.attachmentId)),g=o||(i?"Re: ".concat(i):""),j=Object(n.a)(Object(n.a)({fromEmailAccountId:null!==(s=null===d||void 0===d?void 0:d.id)&&void 0!==s?s:null,prospectId:null===h||void 0===h?void 0:h.id,subject:g,content:this.covertContent(l,!1,!0),to:b,preheader:c,attachmentIds:p},this.getFirstStepTextOnlyEmailSetting()?{firstStepTextOnlyEmail:!0}:{}),u);d?(null===d||void 0===d?void 0:d.status)===Te.b.Active?(a&&delete j.preheader,m(j)):S.d.error("Please check the status of selected email account"):S.d.error("Please connect email account with this sequence")},this.handleFormSubmit=e=>{null===e||void 0===e||e.preventDefault();const{showTitle:t,settings:s,showTextOnlyEmail:n}=this.props,{values:{preheader:a},attachments:i,skipHTMLContentDetection:o}=this.state;if(this.validateAll({validateEmail:!1,validateSubject:!0,validateTitle:t})||this.validatePreHeader(a))return;if(i.some((e=>e.status===Z.a.UploadFailed||e.status===Z.a.Uploading)))return;if(n){var l;const e="1"===(null===s||void 0===s||null===(l=s.find((e=>e.code===ae.x.SHOW_TEXT_ONLY_OPTION)))||void 0===l?void 0:l.value);if(this.detectHTMLContent()&&e&&!o)return void this.setState({showHTMLContentDetectedModal:!0})}"inboxRadar"===new URLSearchParams(window.location.search).get("referrer")?this.showInboxTestModal():this.executeSave()},this.executeSave=()=>{const{onSubmit:e,showTitle:t,onTemplateSubmit:s}=this.props,{values:{subject:n,content:a,title:i},selectedTemplate:o,attachments:l,showStylingDetectedActionBar:c}=this.state,r=l.filter((e=>e.status===Z.a.UploadSuccess)).map((e=>e.attachmentId));t?s(n,a,i,r):(e(n,this.covertContent(a),this.state.values.preheader,o?o.id:void 0,r),c&&this.hideStylingDetectedActionBar())},this.validatePreHeader=e=>{const t=e.length>f.c.ErrorLength,{t:s}=this.props,{errors:a}=this.state;return t&&this.setState({errors:Object(n.a)(Object(n.a)({},a),{},{preheader:s("labels.pre_header_error").toString()})}),t},this.validateAll=e=>{let{validateEmail:t=!1,validateSubject:s=!1,validateTitle:a=!1,email:i=""}=e;const{dirty:o,errors:l,values:c}=this.state,{isSubsequence:r}=this.props;let d=Object(n.a)({},c);const h=Object(n.a)({},o),u=Object(n.a)({},l),m=Object.keys(o),b=Object.keys(l);let p=!1;return t&&(d=Object(n.a)(Object(n.a)({},d),{},{email:i})),m.forEach((e=>{h[e]=!0})),b.forEach((e=>{if(("email"!==e||"email"===e&&t)&&("subject"!==e||"subject"===e&&s&&!r)&&("title"!==e||"title"===e&&a)){const t=this.validate(e,d[e]);u[e]=t,p=p||!!t}})),p&&this.setErrors({errors:u,dirty:h}),p},this.showTemplateModal=()=>{this.setState({showTemplates:!0})},this.hideTemplateModal=()=>{this.setState({showTemplates:!1})},this.getTagAndLabel=e=>{let t="",s="";const n=null!==e.fallbackText&&e.fallbackText.length>0?"|'".concat(e.fallbackText,"'"):"";return e.prospectType===N.a.Account?(t="{{account.".concat(e.label).concat(n,"}}"),s="{{account.".concat(e.label,"}}")):(t="{{".concat(e.label).concat(n,"}}"),s="{{".concat(e.label,"}}")),{tag:t,label:s}},this.getMergeTags=e=>e.map((e=>{const{tag:t,label:s}=this.getTagAndLabel(e);return{key:"".concat(e.prospectType,"-").concat(e.id),tag:t,label:s,type:e.prospectType}})),this.getEmailEditorClassNames=()=>{const{showTitle:e}=this.props,{errors:t}=this.state;return u()(["email-editor",{"subject-error":t.subject,"with-title-and-subject":e,"title-error":e&&t.title}])},this.isTechnicalIssue=e=>"There is some technical issue. Please try again in some time."===e.message,this.onRunPlacementTest=()=>{const{sendSeedTestRequest:e,sequence:t,sequenceStepVariantId:s}=this.props;if(Object(A.a)(I.a.INBOX_ANALYZER_WRITE)){const{testMailOptions:n}=this.props;e({sequenceId:(null===n||void 0===n?void 0:n.sequenceId)||(null===t||void 0===t?void 0:t.id),variantId:s})}else S.d.error("You do not have permission to create a test")},this.getFirstStepTextOnlyEmailSetting=()=>{var e;const{settings:t,isFirstStepTextOnlyEmail:s,stepNumber:n}=this.props,a="1"===(null===t||void 0===t||null===(e=t.find((e=>e.code===ae.x.FIRST_STEP_TEXT_ONLY_EMAIL)))||void 0===e?void 0:e.value);return(s||a)&&1===n},this.state={values:{title:e.title||"",subject:e.subject||"",content:this.covertContent(null!==(s=e.content)&&void 0!==s?s:"",!1)||"",email:e.fromEmail||Object(y.q)(),preheader:e.preheader||""},errors:{title:"",subject:"",content:"",email:"",preheader:""},dirty:{title:!1,subject:!1,content:!1,email:!1,preheader:!1,attachments:!1},subjectEmailSuggestion:{subjectPercentage:0,subjectStatus:"",subjectLength:0},wordEmailSuggestion:{wordPercentage:0,wordStatus:"",wordLength:0},personalizationEmailSuggestion:{personalizationPercentage:0,personalizationStatus:"",personalizationLength:0},linkEmailSuggestion:{linkPercentage:0,linkStatus:"",linkLength:0},spammyEmailSuggestion:{spammyPercentage:0,spammyStatus:"",spammyLength:0,spammyWords:[]},sendAutomatically:!0,sendTestEmailVisible:!1,skipFocusOnEditorOnce:!0,selectedTemplate:null,showTemplates:!1,showTitle:!1,showSendTestEmailModal:!1,showEmailDisconnectedModal:!1,showEmailNotConnectedModal:!1,showEmailNotAddedModal:!1,showConfirmationModal:!1,showPreheaderInput:!!e.preheader,showPreheaderRecommendation:!1,shouldInitiateAChat:!1,attachments:e.attachments||[],attachmentsMeta:[],attachmentsSizeInBytes:Object(y.h)(e.attachments),showHTMLContentDetectedModal:!1,skipHTMLContentDetection:!1,showSidebarFooter:!e.isTemplateEditor,selectedProspectInEmailPreview:null,selectedEmailInEmailPreview:null,sendThisEmailInSameThreadCheckbox:e.allowEmptySubject&&!e.subject,sequenceSchedule:null,disabledVariableTags:[],showGlobalRestrictionModal:!1,showGlobalRestrictionModalForTest:!1,showInboxTestModal:!1,stylingPreference:null,showStylingDetectedActionBar:!1},this.subjectInputRef=r.a.createRef(),this.preheaderRef=r.a.createRef(),this.submitButtonRef=r.a.createRef(),this.editorRef=r.a.createRef(),this.onUpdateSequenceSchedule=this.onUpdateSequenceSchedule.bind(this),this.onSenderSignatureTagAdded=this.onSenderSignatureTagAdded.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onContentChangeHandler=this.onContentChangeHandler.bind(this),this.onValueChange=this.onValueChange.bind(this),this.onPreheaderChange=this.onPreheaderChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onContentBlur=this.onContentBlur.bind(this),this.postInputBlur=this.postInputBlur.bind(this),this.onModalShow=this.onModalShow.bind(this),this.validate=this.validate.bind(this),this.setErrors=this.setErrors.bind(this),this.onTemplateChange=this.onTemplateChange.bind(this),this.getEditorInstance=this.getEditorInstance.bind(this),this.showHideSendTestEmailModal=this.showHideSendTestEmailModal.bind(this),this.showHideEmailDisconnectedModal=this.showHideEmailDisconnectedModal.bind(this),this.showHideEmailNotConnectedModal=this.showHideEmailNotConnectedModal.bind(this),this.showHideEmailNotAddedModal=this.showHideEmailNotAddedModal.bind(this),this.showHideConfirmationModal=this.showHideConfirmationModal.bind(this),this.handleConnectNowClick=this.handleConnectNowClick.bind(this),this.onCloseHandler=this.onCloseHandler.bind(this),this.showTemplateModal=this.showTemplateModal.bind(this),this.hideTemplateModal=this.hideTemplateModal.bind(this),this.onSubjectKeyUp=this.onSubjectKeyUp.bind(this),this.debouncedSubjectEmailSuggestionHandler=this.debouncedSubjectEmailSuggestionHandler.bind(this),this.subjectEmailSuggestionHandler=this.subjectEmailSuggestionHandler.bind(this),this.getMergeTags=this.getMergeTags.bind(this),this.getEmailEditorClassNames=this.getEmailEditorClassNames.bind(this),this.getTagAndLabel=this.getTagAndLabel.bind(this),this.onConfirmationModalContinue=this.onConfirmationModalContinue.bind(this),this.onInitiateAChat=this.onInitiateAChat.bind(this),this.checkIsDirty=this.checkIsDirty.bind(this),this.onContentKeyUp=this.onContentKeyUp.bind(this),this.debouncedContentEmailSuggestionHandler=this.debouncedContentEmailSuggestionHandler.bind(this),this.contentEmailSuggestionHandler=this.contentEmailSuggestionHandler.bind(this),this.addMergeTagInContent=this.addMergeTagInContent.bind(this),this.addVariableTagInContent=this.addVariableTagInContent.bind(this),this.addSpintaxInContent=this.addSpintaxInContent.bind(this),this.showHidePreheaderInput=this.showHidePreheaderInput.bind(this),this.onShowHideSendThisEmailInSameThreadCheckbox=this.onShowHideSendThisEmailInSameThreadCheckbox.bind(this),this.onAttachmentsSizeChange=this.onAttachmentsSizeChange.bind(this),this.onAttachmentsChange=this.onAttachmentsChange.bind(this),this.onAttachmentStatusChange=this.onAttachmentStatusChange.bind(this),this.onAttachmentsMetaChange=this.onAttachmentsMetaChange.bind(this),this.isTechnicalIssue=this.isTechnicalIssue.bind(this),this.detectHTMLContent=this.detectHTMLContent.bind(this),this.handleHTMLContentDetected=this.handleHTMLContentDetected.bind(this),this.onShowHTMLContentDetectedModal=this.onShowHTMLContentDetectedModal.bind(this),this.onHideHTMLContentDetectedModal=this.onHideHTMLContentDetectedModal.bind(this),this.showInboxTestModal=this.showInboxTestModal.bind(this),this.hideInboxTestModal=this.hideInboxTestModal.bind(this),this.showStylingDetectedActionBar=this.showStylingDetectedActionBar.bind(this),this.hideStylingDetectedActionBar=this.hideStylingDetectedActionBar.bind(this),this.executeSave=this.executeSave.bind(this),this.sendSpintaxMixpanelEvent=this.sendSpintaxMixpanelEvent.bind(this),this.handleAiVariantAttachments=this.handleAiVariantAttachments.bind(this),this.onRunPlacementTest=this.onRunPlacementTest.bind(this)}componentDidMount(){const{sequence:e,subject:t,prevStepSubject:s,content:n,sendGetFieldsRequest:a,sendGetAllConnectedEmailAccountsRequest:i,sendGetProspectsOverviewRequest:o}=this.props;a(),(null===e||void 0===e?void 0:e.id)&&Object(pe.a)(ge.a.SEQUENCES_CONTACTS_READ)&&o(e.id.toString()),(null===e||void 0===e?void 0:e.id)&&i(e.id),t?this.subjectEmailSuggestionHandler(t):s&&this.subjectEmailSuggestionHandler(s,!0),n&&(this.contentEmailSuggestionHandler(n),this.onSenderSignatureTagAdded(n))}componentDidUpdate(e){const{sendTestEmailRequestStatus:t,sendTestEmailRequestError:s,resetTestEmailRequestState:a,sendGetSequenceConfigRequest:i,resetSequenceSettingUpdateRequestStatus:o,updateSequenceSettingsRequestStatus:l,history:c,schedule:r,subject:d,content:h,getAIGeneratedEmailVariantRequestStatus:u,getAIGeneratedEmailVariantRequestError:m,isGeneratingWithAi:b,actionVariantHasSubject:p,allowEmptySubject:g,attachments:j,isAiGeneratedVariant:v,sendSeedTestRequestStatus:O,createUpdateTestResponse:E,onClose:T,isDemoAccount:f,resetSeedTestRequest:C}=this.props;if(!(null===e||void 0===e?void 0:e.isGeneratingWithAi)&&b&&g&&p&&this.onShowHideSendThisEmailInSameThreadCheckbox(),(null===e||void 0===e?void 0:e.subject)!==d||(null===e||void 0===e?void 0:e.content)!==h){this.onValueChange(d||"","subject"),this.onContentChangeHandler(h||"",!0),this.subjectEmailSuggestionHandler(d||""),this.contentEmailSuggestionHandler(h||""),g&&(p||this.onValueChange("","subject"));let e=null;e=setInterval((()=>{var t,s;(null===(t=this.editorRef)||void 0===t||null===(s=t.current)||void 0===s?void 0:s.getContent())&&(clearInterval(e),this.onContentBlur())}),100)}const{attachments:y}=this.state;var N;v&&((null===e||void 0===e?void 0:e.attachments)!==j&&0===(null===e||void 0===e||null===(N=e.attachments)||void 0===N?void 0:N.length)&&0===(null===y||void 0===y?void 0:y.length)&&this.handleAiVariantAttachments(j));const{sequenceSchedule:A}=this.state;if((null===r||void 0===r?void 0:r.id)&&!A&&this.onUpdateSequenceSchedule(),t===w.a.Succeeded&&t!==e.sendTestEmailRequestStatus&&(S.d.success("Test email sent successfully.",{theme:S.a.New}),this.showHideSendTestEmailModal(!1)),t===w.a.Failed&&s){if(1001===s.code){const e=this.isTechnicalIssue(s);this.showHideEmailNotConnectedModal(!e),e&&S.d.error("Please Save This Step to Send The Test Email",{theme:S.a.New})}else 1002===s.code?this.showHideEmailDisconnectedModal(!0):1003===s.code?this.showHideEmailNotAddedModal(!0):x.b.error({header:"Test email not sent.",content:Object(q.jsx)("p",{children:s.message}),delay:15e3});Object(me.q)({status:l,prevStatus:e.updateSequenceSettingsRequestStatus,onSuccess:()=>{const{pathname:e}=c.location,t=e.split("/");i(t[2]),o()}}),Object(me.q)({status:u,prevStatus:e.getAIGeneratedEmailVariantRequestStatus,onFailed:()=>{const{errors:e}=this.state,t=Object(n.a)({},e),s=m.message;t.content=s,this.setState({errors:t})}}),a()}Object(me.q)({status:O,prevStatus:e.sendSeedTestRequestStatus,onSuccess:()=>{var e,t;f||(null===(e=window.analytics)||void 0===e||null===(t=e.track)||void 0===t||t.call(e,{userId:Object(be.E)(),event:ee.a.PlacementTestCreated,properties:{url:document.location.href,testId:(null===E||void 0===E?void 0:E.testTemplateId)||(null===E||void 0===E?void 0:E.testTemplateIdEncrypted),timeStamp:(new Date).toISOString(),createAction:"create",currentPlan:Object(be.p)(),shAccountId:Object(be.B)()}}));Object(me.ab)("/inbox-radar/create-update-test/".concat((null===E||void 0===E?void 0:E.testTemplateId)||(null===E||void 0===E?void 0:E.testTemplateIdEncrypted))),C(),T()}})}componentWillUnmount(){const{attachments:e,attachmentsMeta:t}=this.state;this.removeReferrerFromUrl(),e.forEach((e=>{if(e.status===Z.a.Uploading){t.find((t=>t.attachmentIdentifier===e.attachmentIdentifier)).source.cancel("Upload has been cancelled.")}})),this.setState({attachments:[],attachmentsSizeInBytes:0})}onUpdateSequenceSchedule(){const{schedule:e,schedules:t}=this.props,s=t.find((t=>t.id===(null===e||void 0===e?void 0:e.id)));s&&(null===s||void 0===s?void 0:s.timezone)&&this.setState({sequenceSchedule:Object(n.a)({},s)})}onSenderSignatureTagAdded(e){const{disabledVariableTags:t}=this.state,s=y.v.test(e);s&&!t.includes("{{SenderSignature}}")?this.setState({disabledVariableTags:[...t,"{{SenderSignature}}"]}):!s&&t.includes("{{SenderSignature}}")&&this.setState({disabledVariableTags:t.filter((e=>"{{SenderSignature}}"!==e))})}onInputChange(e,t){const{name:s}=t.target;this.onValueChange(e,s)}onContentChangeHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.onValueChange(e,"content",t),this.onSenderSignatureTagAdded(e);const{isTemplateEditor:s}=this.props;s||this.showStylingDetectedActionBar(e)}onPreheaderChange(e,t){let s,a;void 0===t?(s=e,a=e.target.value):(s=t,a=e);const{name:i}=s.target,{values:o,errors:l,dirty:c}=this.state,{t:r}=this.props,d=Object(n.a)({},l);let h="";const u=(a.match(y.u)||[]).length;if(a.length>f.c.ErrorLength)h=r("labels.pre_header_error").toString(),this.setState({showPreheaderRecommendation:!1});else if(u>0)h="{{SenderSignature}} can not be used in pre-header.",this.setState({showPreheaderRecommendation:!1});else{let e=!1;a.length>f.c.RecommendationLength&&(e=!0),this.setState({showPreheaderRecommendation:e})}d.preheader=h,this.setState({values:Object(n.a)(Object(n.a)({},o),{},{[i]:a}),errors:d,dirty:Object(n.a)(Object(n.a)({},c),{},{preheader:!0})})}onValueChange(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{skipFocusOnEditorOnce:a,errors:i}=this.state;if("subject"===t){const s=Object(n.a)({},i),a=this.validate(t,e);s[t]=a,this.setState({errors:s})}if("content"===t){const s=Object(n.a)({},i),a=this.validate(t,e);s[t]=a;const{showStylingDetectedActionBar:o}=this.state;a&&o?this.setState({errors:s,showStylingDetectedActionBar:!1}):this.setState({errors:s})}"content"===t&&a?(this.setState({skipFocusOnEditorOnce:!1}),s&&this.setState(Object(d.a)((s=>{s.values[t]=e,s.dirty[t]=!0})))):this.setState(Object(d.a)((s=>{s.values[t]=e,s.dirty[t]=!0})))}onInputBlur(e){const{name:t}=e.target;if(this.postInputBlur(t),"subject"===t){const{values:e}=this.state,{prevStepSubject:t}=this.props;!e.subject&&t?this.subjectEmailSuggestionHandler(t,!0):this.subjectEmailSuggestionHandler(e.subject)}}onContentBlur(){var e,t;this.postInputBlur("content");const{values:s,dirty:n}=this.state,a=null===(e=this.editorRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getContent();a&&n.content&&this.contentEmailSuggestionHandler(a),a!==s.content&&this.onContentChangeHandler(a)}onModalShow(){const{focusOn:e}=this.props;e&&"subject"!==e||(this.subjectInputRef.current.focus(),this.submitButtonRef.current&&(this.submitButtonRef.current.id=ne.a.SaveStep))}onTemplateChange(e){var t;const{trackingId:s,sequence:a,stepNumber:i}=this.props;if(s&&a&&i){var o,l;const{id:e,title:t}=a;null===(o=window.analytics)||void 0===o||null===(l=o.track)||void 0===l||l.call(o,{userId:s,event:ee.a.TemplateInserted,properties:{sequence_id:e,sequence_title:t,step_number:i}})}const{values:c,errors:r,attachments:d,sendThisEmailInSameThreadCheckbox:h}=this.state,u=Object(n.a)({},c);if(this.editorRef.current.setContent(e.content),u.content=this.editorRef.current.getContent(),!h){u.subject=e.subject;const t=Object(n.a)({},r),s=this.validate("subject",e.subject);t.subject=s,this.setState({errors:t}),this.subjectEmailSuggestionHandler(e.subject)}this.contentEmailSuggestionHandler(u.content),this.onAttachmentsChange([...d,...Object($.a)(null===e||void 0===e||null===(t=e.template)||void 0===t?void 0:t.templateAttachments,Z.a.UploadSuccess)]),this.setState((t=>Object(n.a)(Object(n.a)({},t),{},{values:Object(n.a)(Object(n.a)({},t.values),u),showTemplates:!1,selectedTemplate:e})))}onAttachmentsSizeChange(e){const{attachments:t,errors:s,values:a}=this.state;let i=0;t.forEach((e=>{i+=parseInt(e.file.size,10)})),e||this.setState(Object(d.a)((e=>{e.dirty.attachments=!0}))),this.setState({attachmentsSizeInBytes:i},(()=>{const e=Object(n.a)({},s),t=this.validate("content",a.content);e.content=t,this.setState({errors:e})}))}onAttachmentStatusChange(e){const{attachments:t}=this.state;this.setState({attachments:Object(y.a)(e,t)},(()=>this.onAttachmentsSizeChange(!1)))}onAttachmentsChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({attachments:[...e]},(()=>this.onAttachmentsSizeChange(t)))}onAttachmentsMetaChange(e){this.setState({attachmentsMeta:e})}setErrors(e){let{errors:t,dirty:s}=e;this.setState({errors:t,dirty:s})}getEditorInstance(e){this.editorRef.current=e}covertContent(e){var t;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])return e;const{settings:n}=this.props,a=null===n||void 0===n||null===(t=n.find((e=>e.code===ae.x.TEXT_ONLY_EMAIL)))||void 0===t?void 0:t.value,i=this.getFirstStepTextOnlyEmailSetting();return a===ae.M.TEXT_ONLY_EMAIL||i?s?Object(Ce.a)(e,!1):Object(xe.d)("<div>".concat(e,"</div>")):Object(Ne.a)(e)}postInputBlur(e){this.setState(Object(d.a)((t=>{t.dirty[e]&&(t.errors[e]=this.validate(e,t.values[e]))})))}handleHTMLContentDetected(){this.setState({skipHTMLContentDetection:!0,showHTMLContentDetectedModal:!1},(()=>this.handleFormSubmit()))}detectHTMLContent(){const{settings:e,showTextOnlyEmail:t}=this.props,{values:s}=this.state;if(t){var n;if((null===e||void 0===e||null===(n=e.find((e=>e.code===ae.x.TEXT_ONLY_EMAIL)))||void 0===n?void 0:n.value)===ae.M.TEXT_ONLY_EMAIL||this.getFirstStepTextOnlyEmailSetting())return Object(y.n)(s.content)}return!1}sendSpintaxMixpanelEvent(){const{isTemplateEditor:e,sequence:t}=this.props;var s,n;e||(null===(s=window.analytics)||void 0===s||null===(n=s.track)||void 0===n||n.call(s,{userId:Object(be.E)(),event:ee.a.SpintaxCreated,properties:{shAccountId:Object(be.B)(),role:Object(be.A)(),sequenceId:t.id,sequenceName:t.title,currentPlan:Object(be.y)()}}))}addMergeTagInContent(e){var t;const{tag:s}=e;let n=s;const a=s.lastIndexOf("|");if(-1!==a){const e=s.slice(0,a+1),t=s.slice(a+1);n=e+(Object(xe.c)(t)?t:Object(xe.d)(t))}null===(t=this.editorRef.current)||void 0===t||t.insertContent(n);const i=this.editorRef.current.getContent();this.contentEmailSuggestionHandler(i)}addVariableTagInContent(e){var t;null===(t=this.editorRef.current)||void 0===t||t.insertContent(e);const s=this.editorRef.current.getContent();this.contentEmailSuggestionHandler(s)}addSpintaxInContent(e){var t;null===(t=this.editorRef.current)||void 0===t||t.insertContent(e);const s=this.editorRef.current.getContent();this.contentEmailSuggestionHandler(s),this.sendSpintaxMixpanelEvent()}validate(e,t){const{allowEmptySubject:s,showTitle:n,t:a,isSubsequence:i}=this.props;if("subject"===e&&i)return"";const{attachmentsSizeInBytes:o,attachments:l,sendThisEmailInSameThreadCheckbox:c}=this.state;return Object(C.a)({name:e,value:t,allowEmptySubject:s,showTitle:n,attachmentsSizeInBytes:o,attachments:l,t:a,sendThisEmailInSameThreadCheckbox:c})}render(){var e,t;const{values:s,errors:n,showTemplates:a,showSendTestEmailModal:i,showEmailDisconnectedModal:o,showEmailNotConnectedModal:l,showEmailNotAddedModal:c,showConfirmationModal:r,showPreheaderInput:h,showPreheaderRecommendation:u,subjectEmailSuggestion:m,wordEmailSuggestion:b,personalizationEmailSuggestion:p,linkEmailSuggestion:S,spammyEmailSuggestion:x,attachments:f,showHTMLContentDetectedModal:C,showSidebarFooter:N,sendThisEmailInSameThreadCheckbox:R,sequenceSchedule:M,disabledVariableTags:P,showGlobalRestrictionModal:_,showGlobalRestrictionModalForTest:L,showStylingDetectedActionBar:k}=this.state,{show:H,stepNumber:F,variantNumber:V,isRequestPending:U,footerPart:G,sendTestEmailRequestStatus:z,shouldRenderTemplate:W,isSaveDisabled:X,showTitle:Q,t:Z,fields:$,sendImageUploadRequest:ee,disableEditMode:te,subjectPlaceholder:ne,isTemplateEditor:oe,agencyConfig:le,sendAttachmentUploadRequest:ce,uploadAttachmentRequestStatus:re,uploadAttachmentRequestError:de,uploadAttachmentRequestMessage:he,uploadedAttachment:be,resetUploadAttachmentRequest:je,sendDeleteAttachmentRequest:ve,deleteAttachmentRequestStatus:Se,deleteAttachmentRequestError:xe,deletedAttachmentId:Te,resetDeleteAttachmentRequest:we,modalName:Ce,sequenceStepVariantId:ye,settings:Ne,showTextOnlyEmail:Ae=!1,sendUpdateSequenceSettingsRequest:Ie,allConnectedEmailAccounts:Re,getAllConnectedEmailAccountsRequestStatus:Me,prospects:qe,getProspectsRequestStatus:Pe,prevStepSubject:_e,sequence:Le,allowEmptySubject:ke,isGeneratingWithAi:De,isActionVariantGeneratedByAi:He,getAIGeneratedEmailVariantRequestStatus:Be,sendGetSingleProspectDetailsRequest:Fe,singleProspectData:Ve,resetSingleProspect:Ue,resetProspectsOverview:Ge,isDemoAccount:ze,isSubsequence:Ye,subsequence:Ke,isVariantAdded:We=!1,sendSeedTestRequestStatus:Xe,activeSidebarTab:Qe}=this.props,Je=Object(y.t)($),Ze=Object(y.j)({showTitle:Q,showPreheaderInput:h,values:s,errors:n}),$e=Object(A.a)(I.a.INBOX_ANALYZER_WRITE),et=Ae&&(null===Ne||void 0===Ne||null===(e=Ne.find((e=>e.code===ae.x.TEXT_ONLY_EMAIL)))||void 0===e?void 0:e.value),tt=Ae&&"1"===(null===Ne||void 0===Ne||null===(t=Ne.find((e=>e.code===ae.x.FIRST_STEP_TEXT_ONLY_EMAIL)))||void 0===t?void 0:t.value);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(E.a,{show:H,className:"email-modal",titleContent:Object(q.jsxs)("div",{className:"d-flex items-center",children:[F&&Object(q.jsxs)("div",{className:"d-flex align-items-center step-info-wrapper",children:[Object(q.jsxs)("span",{className:"regular-2 font-medium gray-txt-12",children:["Step ",F]}),Object(q.jsx)("div",{className:"step-variant",children:Object(q.jsx)("span",{className:"semibold-1 gray-txt-12",children:Object(se.b)(V)})})]}),Object(q.jsxs)("div",{className:"d-flex align-items-center ".concat(F?"bs-ml-12":"ml-4"),children:[Object(q.jsx)(g.Wb,{width:18,height:18,className:"blue-txt-24"}),Object(q.jsx)("span",{className:"semibold-3 popover-arrow-color-txt ml-2",children:"Email"})]}),He&&Object(q.jsx)(D.c,{text:"AI Variant",children:Object(q.jsx)("div",{className:"d-flex align-items-center  ml-2",children:Object(q.jsx)(j.a,{className:"ai-generated-icon",src:v.a,alt:"ai-icon"})})})]}),onClose:this.onCloseHandler,showCloseIcon:!0,backdrop:"static",extraModalProps:{centered:!0,enforceFocus:!1,"aria-labelledby":"contained-modal-title-vcenter",onShow:this.onModalShow},showSidebar:Object(A.a)(I.a.SEQUENCE_STEP_READ),isCollapsibleSidebar:Object(A.a)(I.a.SEQUENCE_STEP_READ),sidebarContent:Object(q.jsx)(K.b,{stepNumber:F,sequenceId:Ye?null===Ke||void 0===Ke?void 0:Ke.id:null===Le||void 0===Le?void 0:Le.id,isTemplateEditor:oe,hideFromDropdownFromEmailPreview:!1,hideToDropdownFromEmailPreview:!Object(pe.a)(ge.a.SEQUENCES_CONTACTS_READ),agencyConfig:le,subject:s.subject,prevStepSubject:De?R?_e:"":_e,content:s.content,subjectEmailSuggestion:m,wordEmailSuggestion:b,personalizationEmailSuggestion:p,linkEmailSuggestion:S,spammyEmailSuggestion:x,allConnectedEmailAccounts:Re,getAllConnectedEmailAccountsRequestStatus:Me,settings:Ne,prospects:qe,getProspectsRequestStatus:Pe,onShowSidebarFooterChange:this.onShowSidebarFooterChange,onSelectedProspectInEmailPreviewChange:this.onSelectedProspectInEmailPreviewChange,onSelectedEmailInEmailPreviewChange:this.onSelectedEmailInEmailPreviewChange,onSearchProspect:this.onSearchProspect,mergeTags:$,sequenceSchedule:M,disabledVariableTags:P,isGeneratingWithAi:Boolean(De),sendGetSingleProspectDetailsRequest:Fe,singleProspectData:Ve,resetSingleProspect:Ue,resetProspectsOverview:Ge,activeSidebarTab:Qe,textOnlyEmailEnabledForFirstStep:this.getFirstStepTextOnlyEmailSetting()}),onSubmit:this.handleFormSubmit,submitButtonText:"Save",submitButtonClassName:"header-btn",submitButtonRef:this.submitButtonRef,isSubmitLoading:U,hideSubmitButton:te,footerClassNames:te?"justify-content-start":"",isSubmitDisabled:Boolean(De)||te||Object(y.s)(U,X,n,f),hideCancelButton:!0,footerContent:Object(y.g)(G),showSidebarFooter:!(oe||!Object(pe.a)(ge.a.SEQUENCES_SEND_TEST_MAIL))&&N,sidebarCtaMeta:{label:"Send Test Email",disabled:Object(y.r)(n,f)||""===s.content,onClick:()=>{ze?this.setState({showGlobalRestrictionModal:!0}):this.showHideSendTestEmailModal(!0)}},sidebarCtaMeta1:We&&$e?{label:"Run Placement Test",disabled:Object(y.r)(n,f)||""===s.content||Object(me.G)(Xe),onClick:()=>{ze?this.setState({showGlobalRestrictionModalForTest:!0}):this.onRunPlacementTest()},isLoading:Object(me.G)(Xe)}:void 0,footerActionsPrefixComponent:Be!==w.a.Succeeded||De?Object(q.jsx)(q.Fragment,{}):Object(q.jsx)(Oe,{}),children:[Object(q.jsx)(Y,{values:s,errors:n,showTitle:Q,disableEditMode:De||te,subjectPlaceholder:ne,showPreheaderRecommendation:u,stepNumber:F,prevStepSubject:_e,mergeTagOptions:Je,subjectInputRef:this.subjectInputRef,preheaderRef:this.preheaderRef,onInputChange:this.onInputChange,onInputBlur:this.onInputBlur,onSubjectKeyUp:this.onSubjectKeyUp,onPreheaderChange:this.onPreheaderChange,showPreheaderInput:h,showHidePreheaderInput:this.showHidePreheaderInput,isTemplateEditor:oe,sendThisEmailInSameThreadCheckbox:R,onShowHideSendThisEmailInSameThreadCheckbox:this.onShowHideSendThisEmailInSameThreadCheckbox,isFirstAutomatedEmailStep:ke,sendSpintaxMixpanelEvent:this.sendSpintaxMixpanelEvent,isGeneratingWithAi:De,t:Z,setSubjectError:e=>{this.setState(Object(d.a)((t=>{t.errors.subject=e})))},setPreheaderError:e=>{this.setState(Object(d.a)((t=>{t.errors.preheader=e})))},isSubsequence:Ye}),Object(q.jsxs)("div",{className:Ze,children:[De&&Object(q.jsx)(B.c,{}),Object(q.jsx)(O.a,{value:s.content,onEditorChange:this.onContentChangeHandler,onEditorBlur:this.onContentBlur,error:!!n.content,errorMessage:n.content,onKeyUp:this.onContentKeyUp,addMergeTagInContent:this.addMergeTagInContent,addVariableTagInContent:this.addVariableTagInContent,addSpintaxInContent:this.addSpintaxInContent,mergeTags:Je,hideImageOptionOnToolbar:et===ae.M.TEXT_ONLY_EMAIL||this.getFirstStepTextOnlyEmailSetting(),imageUploader:e=>{let{formData:t,onUploadProgress:s}=e;return ee(t,s)},onEditorInit:this.onModalShow,disabled:Boolean(De)||te,ref:this.editorRef,getEditorInstance:this.getEditorInstance,shouldRenderTemplate:Object(A.a)(I.a.TEMPLATE_READ)&&W,showTemplateModal:()=>this.setState({showTemplates:!0}),showAddAttachments:!0,attachments:f,onAttachmentStatusChange:this.onAttachmentStatusChange,onAttachmentsChange:this.onAttachmentsChange,sendAttachmentUploadRequest:ce,uploadAttachmentRequestStatus:re,uploadAttachmentRequestError:de,uploadAttachmentRequestMessage:he,uploadedAttachment:be,sendDeleteAttachmentRequest:ve,deleteAttachmentRequestStatus:Se,deleteAttachmentRequestError:xe,deletedAttachmentId:Te,resetUploadAttachmentRequest:je,resetDeleteAttachmentRequest:we,onAttachmentsMetaChange:this.onAttachmentsMetaChange,isTemplateEditorModal:"Template"===Ce,sequenceStepVariantId:ye,showSpintaxDropdown:!0,disabledVariableTags:P,showMergeAndVariableTags:!0,disableRenderTemplateBtn:Boolean(De),onPaste:e=>{oe||this.showStylingDetectedActionBar(e)}}),Ae&&(et!==ae.M.TEXT_ONLY_DISABLED||this.getFirstStepTextOnlyEmailSetting())&&Object(q.jsx)(ie,{textOnlyEmail:et,isFirstStepTextOnlyEmail:this.getFirstStepTextOnlyEmailSetting(),firstStepTextOnlyEmail:tt}),!oe&&k&&!n.content&&Object(q.jsx)(fe,{handleStylingDetectedAction:this.handleStylingDetectedAction,hideStylingDetectedActionBar:()=>{this.hideStylingDetectedActionBar()}})]})]}),Object(q.jsx)(ue,{show:C,onClose:this.onHideHTMLContentDetectedModal,sendUpdateSequenceSettingsRequest:Ie,onSave:this.handleHTMLContentDetected}),Object(q.jsx)(J,{t:Z,shouldRenderTemplate:W,showTemplates:a,hideTemplateModal:this.hideTemplateModal,onTemplateChange:this.onTemplateChange,showSendTestEmailModal:i,handleSendTestEmailSubmit:this.handleSendTestEmailSubmit,showHideSendTestEmailModal:this.showHideSendTestEmailModal,sendTestEmailRequestStatus:z,showEmailDisconnectedModal:o,handleConnectNowClick:this.handleConnectNowClick,showHideEmailDisconnectedModal:this.showHideEmailDisconnectedModal,showEmailNotConnectedModal:l,showHideEmailNotConnectedModal:this.showHideEmailNotConnectedModal,showEmailNotAddedModal:c,showHideEmailNotAddedModal:this.showHideEmailNotAddedModal,showConfirmationModal:r,onConfirmationModalContinue:this.onConfirmationModalContinue,showHideConfirmationModal:this.showHideConfirmationModal}),Object(q.jsx)(Ee.a,{show:_,onClose:()=>this.setState({showGlobalRestrictionModal:!1}),title:"Sending test email is disabled in demo mode",content:"This is a demo account with sample data. Signup to send test emails."}),Object(q.jsx)(Ee.a,{show:L,onClose:()=>this.setState({showGlobalRestrictionModalForTest:!1}),title:"Placement testing is disabled in demo mode",content:"This is a demo account. Signup to run email placement tests and track where your emails land."}),Object(q.jsx)(T.a,{show:this.state.showInboxTestModal,className:"inbox-test-modal",title:Object(q.jsxs)("div",{className:"d-flex align-items-center gap-8 modal-email-update-title",children:[Object(q.jsx)(g.d,{width:24,height:24,color:"#F59E0B"}),Object(q.jsx)("span",{children:"Confirm Email Update"})]}),onHide:this.hideInboxTestModal,primaryBtnClickedHandler:this.executeSave,secondaryBtnClickedHandler:this.hideInboxTestModal,primaryBtnLabel:"Save & Update",primaryBtnClassName:"header-btn",primaryBtnLoading:this.props.isRequestPending,hideSecondaryBtn:!1,secondaryBtnLabel:"Cancel",children:Object(q.jsx)("div",{className:"inbox-test-modal-content",children:Object(q.jsx)("p",{children:"You are modifying an email from a test screen. Saving these changes will update this email across all active steps in the sequence where it is currently used."})})})]})}}var Ie=Object(m.c)()(Ae),Re=s(330),Me=s(838),qe=s(25),Pe=s(106),_e=s(54),Le=s(483);const ke={sendTestEmailRequest:e=>Object(Re.c)(e),resetTestEmailRequestState:()=>Object(Me.c)(),sendGetFieldsRequest:()=>Object(Re.a)(),sendImageUploadRequest:(e,t)=>Object(o.qb)({formData:e,onUploadProgress:t}),sendAttachmentUploadRequest:e=>{let{formData:t,onUploadProgress:s,cancelToken:n}=e;return Object(o.Pb)({formData:t,onUploadProgress:s,cancelToken:n})},sendDeleteAttachmentRequest:e=>Object(o.r)(e),resetUploadAttachmentRequest:()=>Object(l.lb)(),resetDeleteAttachmentRequest:()=>Object(l.t)(),updateSequenceConfigTextOnlyEmailValue:()=>Object(l.Fb)(),sendGetSequenceConfigRequest:e=>Object(o.R)({sequenceId:e}),sendUpdateSequenceSettingsRequest:(e,t)=>Object(o.Jb)(Object(n.a)({sequenceId:e},t)),resetSequenceSettingUpdateRequestStatus:()=>Object(l.bb)(),sendGetAllConnectedEmailAccountsRequest:e=>Object(o.z)(e),sendGetProspectsRequest:(e,t)=>Object(o.S)({sequenceId:e,pageNum:0,pageSize:25,search:t||"",includeAllFields:!0}),resetContactsRequest:()=>Object(l.s)(),sendGetSingleProspectDetailsRequest:e=>Object(qe.M)(e),sendGetProspectsOverviewRequest:(e,t)=>Object(Re.b)({sequenceId:e,page:1,pageSize:25,search:t||""}),resetSingleProspect:()=>Object(Pe.R)(),resetProspectsOverview:()=>Object(Me.b)(),sendSeedTestRequest:e=>Object(_e.C)({payload:e}),resetSeedTestRequest:()=>Object(Le.c)()},De=Object(a.connect)((e=>{var t,s,n,a,i,o,l,c,r,d,h,u;return{sendTestEmailRequestStatus:e.emailModal.sendTestEmailRequest.status,sendTestEmailRequestMessage:e.emailModal.sendTestEmailRequest.message,sendTestEmailRequestError:e.emailModal.sendTestEmailRequest.error,getFieldsRequestStatus:e.emailModal.getFieldsRequest.status,getFieldsRequestError:e.emailModal.getFieldsRequest.error,fromEmail:null===(t=e.sequence.sequence)||void 0===t||null===(s=t.email)||void 0===s?void 0:s.fromEmail,fields:e.emailModal.fields,agencyConfig:e.home.agencyConfig,isFirstStepTextOnlyEmail:e.home.isFirstStepTextOnlyEmail,uploadAttachmentRequestStatus:e.sequence.uploadAttachmentRequest.status,uploadAttachmentRequestMessage:e.sequence.uploadAttachmentRequest.message,uploadAttachmentRequestError:e.sequence.uploadAttachmentRequest.error,uploadedAttachment:e.sequence.uploadedAttachment,deleteAttachmentRequestStatus:e.sequence.deleteAttachmentRequest.status,deleteAttachmentRequestMessage:e.sequence.deleteAttachmentRequest.message,deleteAttachmentRequestError:e.sequence.deleteAttachmentRequest.error,deletedAttachmentId:e.sequence.deletedAttachmentId,updateSequenceSettingsRequestStatus:e.sequence.updateSequenceSettingsRequest.status,sequence:e.sequence.sequence,subsequence:e.sequence.subsequence,trackingId:e.home.trackingId,settings:null===(n=e.sequence.sequenceConfig)||void 0===n?void 0:n.settings,schedule:null===(a=e.sequence.sequenceConfig)||void 0===a?void 0:a.schedule,schedules:e.sequence.schedules,getSchedulesRequestStatus:e.sequence.getSchedulesRequest.status,getAllConnectedEmailAccountsRequestStatus:e.sequence.getAllConnectedEmailAccountsRequest.status,allConnectedEmailAccounts:e.sequence.allConnectedEmailAccounts,getProspectsRequestStatus:e.sequence.getSequenceContactListRequest.status,prospects:e.emailModal.prospectsoverview,isAiGeneratedVariant:(null===e||void 0===e||null===(i=e.sequence)||void 0===i?void 0:i.isAiGeneratedVariant)||!1,getAIGeneratedEmailVariantRequestStatus:e.sequence.getAIGeneratedEmailVariantRequest.status,getAIGeneratedEmailVariantRequestMessage:e.sequence.getAIGeneratedEmailVariantRequest.message,getAIGeneratedEmailVariantRequestError:e.sequence.getAIGeneratedEmailVariantRequest.error,singleProspectData:e.prospect.singleProspect,getSingleProspectDetailsStatus:e.prospect.getSingleProspectDetailsRequest.status,getSingleProspectDetailsError:e.prospect.getSingleProspectDetailsRequest.error,getSingleProspectDetailsMessage:e.prospect.getSingleProspectDetailsRequest.message,sendSeedTestRequestStatus:null===e||void 0===e||null===(o=e.inboxRadar)||void 0===o||null===(l=o.seedTestRequest)||void 0===l?void 0:l.status,createUpdateTestResponse:null===e||void 0===e||null===(c=e.inboxRadar)||void 0===c?void 0:c.createUpdateTestResponse,isDemoAccount:e.home.isDemoAccount,remainingInboxAnalyzerTestLimit:parseInt(null!==(r=null===e||void 0===e||null===(d=e.home)||void 0===d||null===(h=d.getPostLoadMetaResponse)||void 0===h||null===(u=h.accountUsageQuotaRemaining)||void 0===u?void 0:u["INBOX_ANALYZER.TESTS"])&&void 0!==r?r:"0",10)}}),ke);var He=Object(i.j)(De(Ie))},2178:function(e,t,s){"use strict";s.d(t,"a",(function(){return V}));var n=s(1),a=s(5),i=s(121),o=s(27),l=s(818),c=(s(794),s(2180)),r=s(16),d=s(42),h=s(21),u=s(0);var m=e=>{let{showColdEmailTips:t}=e;const[s,a]=Object(n.useState)(0),{t:i}=Object(o.b)(),l=e=>{let{title:t,content:s,isNew:n=!1}=e;return Object(u.jsxs)(u.Fragment,{children:[n&&Object(u.jsx)("div",{className:"caurosel-badge",children:"NEW"}),Object(u.jsx)("p",{className:"caurosel-title",children:t}),Object(u.jsx)("p",{className:"caurosel-content",children:s})]})},m=[{id:1,content:Object(u.jsx)(l,{title:i("messages.cold_email_tip_1_title"),content:i("messages.cold_email_tip_1_content")})},{id:2,content:Object(u.jsx)(l,{title:i("messages.cold_email_tip_2_title"),content:i("messages.cold_email_tip_2_content")})}];return t&&m.push({id:3,content:Object(u.jsx)(l,{title:i("messages.cold_email_tip_3_title"),content:Object(u.jsxs)(u.Fragment,{children:["".concat(i("messages.cold_email_tip_3_content_1")," "),Object(u.jsx)("a",{href:"https://www.saleshandy.com/blog/write-cold-email/",target:"_blank",rel:"noreferrer",children:i("messages.cold_email_tip_3_content_2")})," ".concat(i("messages.cold_email_tip_3_content_3"))]})})}),m.unshift({id:4,content:Object(u.jsx)(l,{title:i("messages.cold_email_tip_4_title"),content:Object(u.jsxs)(u.Fragment,{children:["".concat(i("messages.cold_email_tip_4_content_1")," "),Object(h.P)()&&Object(u.jsx)("a",{href:d.a.spintaxBlog,target:"_blank",rel:"noreferrer",children:i("messages.cold_email_tip_4_content_2")})]}),isNew:!0}),height:100}),Object(u.jsxs)("div",{className:"cold-email-tips",children:[Object(u.jsx)(c.a,{className:"cold-email-tips-carousel",indicators:!1,onSlide:e=>{a(e)},interval:3e4,prevIcon:Object(u.jsx)("img",{className:"caurosel-contol prev ",src:r.a.ChevronLeftBlue,alt:"Prev"}),nextIcon:Object(u.jsx)("img",{className:"caurosel-contol next",src:r.a.ChevronRightBlue,alt:"Next"}),carouselItems:m}),Object(u.jsx)("div",{className:"caurosel-footer",children:Object(u.jsx)("p",{className:"caurosel-footer-text",children:"".concat(i("messages.cold_email_tips")," ").concat(s+1,"/").concat(m.length)})})]})},b=s(2075),p=s(11),g=s(170);var j=e=>{let{title:t,length:s,progressBarPercentage:n,helperText:a,status:i,showTooltip:o,tooltipText:l}=e;return Object(u.jsxs)("div",{className:"email-suggestion",children:[Object(u.jsxs)("div",{className:"email-suggestion-header",children:[Object(u.jsx)("p",{className:"email-suggestion-title",children:t}),o?Object(u.jsx)(p.c,{text:l,placement:p.d.Left,className:"email-suggestion-tooltip",children:Object(u.jsx)("p",{className:"email-suggestion-length length with-tooltip",children:s})}):Object(u.jsx)("p",{className:"email-suggestion-length",children:s})]}),Object(u.jsx)(b.a,{className:"email-suggestion-progress ".concat(g.a[i]),now:n}),Object(u.jsxs)("div",{className:"email-suggestion-footer",children:[Object(u.jsx)("p",{className:"email-suggestion-helper-text",children:a}),Object(u.jsx)("p",{className:"email-suggestion-status ".concat(g.a[i]),children:i})]})]})};var v=e=>{let{stepNumber:t,isTemplateEditor:s,agencyConfig:a,subjectEmailSuggestion:i,wordEmailSuggestion:c,personalizationEmailSuggestion:r,linkEmailSuggestion:d,spammyEmailSuggestion:h}=e;const{t:b}=Object(o.b)(),[g,v]=Object(n.useState)(p.d.Bottom),S=Object(n.useRef)(null),[O]=Object(l.a)({options:{overflow:{x:"hidden"},scrollbars:{autoHide:"leave",autoHideDelay:500}},defer:!0});return Object(n.useEffect)((()=>{O(S.current)}),[O]),Object(n.useEffect)((()=>{const e=()=>{const e=window.innerHeight;v(e<800?p.d.Top:p.d.Bottom)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),Object(u.jsxs)("div",{className:"tab-scrollbar-container",ref:S,children:[Object(u.jsx)(m,{showColdEmailTips:null===a||void 0===a?void 0:a.showColdEmailTips}),Object(u.jsxs)("div",{className:"email-suggestions-wrapper",children:[Object(u.jsx)(j,{title:b("messages.subject_title"),length:i.subjectLength<2?"".concat(i.subjectLength," ").concat(b("messages.character")):"".concat(i.subjectLength," ").concat(b("messages.characters")),progressBarPercentage:i.subjectPercentage,helperText:b("messages.subject_helper_text"),status:i.subjectStatus}),Object(u.jsx)(j,{title:b("messages.word_title"),length:c.wordLength<2?"".concat(c.wordLength," ").concat(b("messages.word")):"".concat(c.wordLength," ").concat(b("messages.words")),progressBarPercentage:c.wordPercentage,helperText:b(1===t||s?"messages.word_helper_text":"messages.word_helper_text_1"),status:c.wordStatus}),Object(u.jsx)(j,{title:b("messages.personalization_title"),length:r.personalizationLength<2?"".concat(r.personalizationLength," ").concat(b("messages.merge_tag")):"".concat(r.personalizationLength," ").concat(b("messages.merge_tags")),progressBarPercentage:r.personalizationPercentage,helperText:b("messages.personalization_helper_text"),status:r.personalizationStatus}),Object(u.jsx)(j,{title:b("messages.link_title"),length:d.linkLength<2?"".concat(d.linkLength," ").concat(b("messages.link")):"".concat(d.linkLength," ").concat(b("messages.links")),progressBarPercentage:d.linkPercentage,helperText:b("messages.link_helper_text"),status:d.linkStatus}),Object(u.jsx)(j,{title:b("messages.spammy_title"),length:h.spammyLength<2?"".concat(h.spammyLength," ").concat(b("messages.word")):"".concat(h.spammyLength," ").concat(b("messages.words")),progressBarPercentage:h.spammyPercentage,helperText:b("messages.spammy_helper_text"),status:h.spammyStatus,showTooltip:h.spammyLength>0,tooltipText:Object(u.jsxs)("div",{className:"spammy-word-tooltip",children:[Object(u.jsx)("p",{className:"spammy-word-tooltip-title",children:"Spammy ".concat(h.spammyLength<2?b("messages.word"):b("messages.words"))}),h.spammyWords.map((e=>Object(u.jsx)("p",{className:"spammy-word-tooltip-text",children:e},e)))]})})]}),Object(u.jsx)("div",{className:"content-guide-info-wrapper",children:Object(u.jsx)(p.c,{text:"Enhance your emails with dynamic variable tags to automatically insert the current date, adjust for upcoming or previous workdays, and tailor greetings based on the prospect's local time. This personalization boosts deliverability and engagement. Combine Merge Tags, Variable Tags, and Spintax for maximum impact. ",placement:g,className:"content-guide-tooltip",children:Object(u.jsxs)("div",{className:"content-guide-info",children:[Object(u.jsx)("div",{className:"content-guide-info-badge",children:Object(u.jsx)("span",{children:"NEW"})}),Object(u.jsx)("h4",{children:"Hyper-personalize your emails with Variable Tags"})]})})})]})},S=s(2),O=s(64),x=s(2088);var E=e=>{let{option:t}=e;return Object(u.jsxs)("div",{className:"from-email-option",children:[Object(u.jsxs)("div",{className:"from-email-option--inner",children:[Object(u.jsx)("p",{className:"from-email-option--fromName",children:null===t||void 0===t?void 0:t.name}),Object(u.jsx)("div",{className:"from-email-option--type",children:(null===t||void 0===t?void 0:t.type)===O.b.SmtpImap?Object(u.jsx)(x.a,{}):Object(u.jsx)("img",{className:"type",src:(s=null===t||void 0===t?void 0:t.type,s===O.b.Microsoft?r.a.MicrosoftIconSmall:r.a.GoogleIcon),alt:"Email Type"})})]}),Object(u.jsxs)("div",{className:"from-email-option--inner",children:[Object(u.jsx)("p",{className:"from-email-option--fromEmail",children:null===t||void 0===t?void 0:t.email}),Object(u.jsx)("div",{className:"from-email-option--status ".concat((null===t||void 0===t?void 0:t.status)?"connected":"disconnected")})]})]});var s},T=s(82);const w={skip:{identifier:"circle-check",toolTipText:"Unverified",className:"gray-txt-23"},valid:{identifier:"circle-check",toolTipText:"Valid",className:"green-txt-14"},risky:{identifier:"danger",toolTipText:"Risky",className:"orange-txt-6"},bad:{identifier:"warning",toolTipText:"Bad",className:"red-txt-6"},unknown:{identifier:"danger",toolTipText:"Risky",className:"red-txt-6"},inProgress:{identifier:"rotate-clockwise",toolTipText:"In Progress",className:"gray-txt-23"}};var f=e=>{let{option:t}=e;const s=w[t.verificationStatus];return Object(u.jsxs)("div",{className:"from-email-option",children:[Object(u.jsx)("div",{className:"from-email-option--inner",children:Object(u.jsx)("p",{className:"from-email-option--fromName prospect",children:(null===t||void 0===t?void 0:t.name)||Object(u.jsx)("span",{className:"gray-txt-11 font-italic",children:"(No name)"})})}),Object(u.jsxs)("div",{className:"from-email-option--inner",children:[Object(u.jsx)("p",{className:"from-email-option--fromEmail prospect",children:null===t||void 0===t?void 0:t.email}),Object(u.jsx)("div",{className:"from-email-option--verification",children:Object(u.jsx)(T.a,{identifier:null===s||void 0===s?void 0:s.identifier,className:null===s||void 0===s?void 0:s.className})})]})]})},C=s(14),y=s.n(C),N=s(81);var A=e=>{let{label:t,options:s,selectedOption:n,optionRenderer:i,selectedOptionRenderer:o,onChange:l,disabled:c,handleOnKeyDownEvent:r,filterOption:d,showPrevNextBtn:h=!1,onPrevNext:m,prevNextCtaDisabled:b,tooltipKey:g="",isLoading:j=!1,placeholder:v,initialSearchValue:S="",noResultFoundImage:O}=e;const x=y()(["input-dropdown-container",{"prev-next-btn-visible":h}]),E=y()(["input-dropdown",{disabled:c}]),T=y()(["input-dropdown-select",{"sm-width":h}]),w=y()(["prev-next-btn--cta",{disabled:b}]);return Object(u.jsxs)("div",{className:x,children:[Object(u.jsxs)("div",{className:E,children:[Object(u.jsx)("div",{className:"input-dropdown--label",children:Object(u.jsx)("p",{children:t})}),Object(u.jsx)(N.a,{className:T,options:s,showSearch:!0,selectedOptionKey:(null===n||void 0===n?void 0:n.key)||"",optionRenderer:i,onChange:e=>{let[t]=e;l(t)},placement:p.d.BottomEnd,selectedOptionRenderer:e=>{let[t]=e;return o(t)},filterOption:d,onKeyDown:(e,t)=>{"Enter"===t.key&&(null===r||void 0===r||r(e))},searchPlaceholder:"Search",initialSearchValue:S,isLoading:j,disabled:c,placeholder:v,customEmptyElement:Object(u.jsxs)("div",{className:"input-dropdown-empty-ui",children:[Object(u.jsx)("div",{className:"input-dropdown-empty-ui--image",children:O}),Object(u.jsx)("h3",{children:"No result found"})]})})]}),h&&Object(u.jsxs)("div",{className:"prev-next-btn",children:[Object(u.jsx)(p.c,{text:"Previous ".concat(g).trim(),children:Object(u.jsx)("button",{type:"button",className:w,onClick:()=>{m("prev")},children:Object(u.jsx)(a.Q,{})})}),Object(u.jsx)(p.c,{text:"Next ".concat(g).trim(),children:Object(u.jsx)("button",{type:"button",className:w,onClick:()=>{m("next")},children:Object(u.jsx)(a.R,{})})})]})]})},I=s(6);const R=e=>(null===e||void 0===e?void 0:e.length)>0?e[0]:null;var M=s(319);var q=s(9);var P=s(53);var _=s(594);var L=e=>{let{subject:t,selectedFromEmail:s,prevStepSubject:n,selectedToProspect:a,mergeTags:i,isTemplateEditor:o,sequenceSchedule:l}=e;return Object(u.jsxs)("div",{className:"to-subject-render-container",children:[!o&&Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{children:"To: "}),(c=a,c?"".concat(c.name," <").concat(c.email,">"):"Example Contact <example@google.com>")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{children:"Subject: "}),Object(_.e)({subject:t||"",prevStepSubject:n?"Re: ".concat(n):"",attributes:(null===a||void 0===a?void 0:a.attributes)||[],mergeTags:i,senderDetails:{firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",email:(null===s||void 0===s?void 0:s.email)||"",signature:(null===s||void 0===s?void 0:s.signature)||""},sequenceSchedule:l})]})]});var c};var k=()=>Object(u.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-start no-email-content-container",children:Object(u.jsxs)("div",{className:"no-email-content",children:[Object(u.jsx)("div",{className:"no-email-content-icon",children:Object(u.jsx)(P.D,{})}),Object(u.jsx)("p",{className:"no-email-content-text",children:"Write something to generate the Email preview"})]})});var D=e=>{let{content:t,selectedFromEmail:s,selectedToProspect:n,unsubscribeLink:a,unsubscribeText:i,textOnlyEmail:o,mergeTags:l,isTemplateEditor:c,sequenceSchedule:r,disabledVariableTags:d,textOnlyEmailEnabledForFirstStep:h=!1}=e;return Object(u.jsx)(u.Fragment,{children:""===t?Object(u.jsx)(k,{}):Object(u.jsx)("div",{className:"content-preview-container",dangerouslySetInnerHTML:{__html:Object(_.d)({content:t,mergeTags:l,senderDetails:{firstName:(null===s||void 0===s?void 0:s.firstName)||"",lastName:(null===s||void 0===s?void 0:s.lastName)||"",email:(null===s||void 0===s?void 0:s.email)||"",signature:(null===s||void 0===s?void 0:s.signature)||""},sequenceSchedule:r,attributes:(null===n||void 0===n?void 0:n.attributes)||[],unsubscribeLink:a,unsubscribeText:i,textOnlyEmail:o,doNotAddSignatureAndUnsubscribeLink:c,disabledVariableTags:d,textOnlyEmailEnabledForFirstStep:h})}})})},H=s(107),B=s(706);var F=e=>{let{subject:t="",prevStepSubject:s="",content:a="",allConnectedEmailAccounts:i,getAllConnectedEmailAccountsRequestStatus:o,prospects:l,getProspectsRequestStatus:c,settings:r,sequenceSchedule:d,onSelectedProspectInEmailPreviewChange:m,onSelectedEmailInEmailPreviewChange:b,onSearchProspect:p,sequenceId:g,mergeTags:j,isTemplateEditor:v,hideFromDropdownFromEmailPreview:O,hideToDropdownFromEmailPreview:x,disabledVariableTags:T,isGeneratingWithAi:w=!1,singleProspectData:C=null,sendGetSingleProspectDetailsRequest:y=null,resetSingleProspect:N=null,resetProspectsOverview:_=null,textOnlyEmailEnabledForFirstStep:k}=e;const[F,V]=Object(n.useState)(null),[U,G]=Object(n.useState)(0),[z,Y]=Object(n.useState)(null),[K,W]=Object(n.useState)(""),[X,Q]=Object(n.useState)(!0),[J,Z]=Object(n.useState)(!0),[$,ee]=Object(n.useState)({}),[te,se]=Object(n.useState)(null),ne=Object(n.useMemo)((()=>{var e;return(null===r||void 0===r||null===(e=r.find((e=>e.code===q.x.UNSUBSCRIBE_LINK)))||void 0===e?void 0:e.value)||""}),[r]),ae=Object(n.useMemo)((()=>{var e;return(null===r||void 0===r||null===(e=r.find((e=>e.code===q.x.UNSUBSCRIBE_TEXT)))||void 0===e?void 0:e.value)||""}),[r]),ie=Object(n.useMemo)((()=>{var e;return null===r||void 0===r||null===(e=r.find((e=>e.code===q.x.TEXT_ONLY_EMAIL)))||void 0===e?void 0:e.value}),[r]),oe=Object(n.useMemo)((()=>{const e=(t=i)&&0!==(null===t||void 0===t?void 0:t.length)?t.map((e=>{var t,s,n,a,i,o,l,c,r,d,h,u;return{key:null===e||void 0===e||null===(t=e.emailAccount)||void 0===t||null===(s=t.id)||void 0===s?void 0:s.toString(),id:null===e||void 0===e||null===(n=e.emailAccount)||void 0===n?void 0:n.id,firstName:null===e||void 0===e||null===(a=e.emailAccount)||void 0===a?void 0:a.fromFirstName,lastName:null===e||void 0===e||null===(i=e.emailAccount)||void 0===i?void 0:i.fromLastName,name:null===e||void 0===e||null===(o=e.emailAccount)||void 0===o?void 0:o.fromName,email:null===e||void 0===e||null===(l=e.emailAccount)||void 0===l?void 0:l.fromEmail,type:null===e||void 0===e||null===(c=e.emailAccount)||void 0===c?void 0:c.type,status:null===e||void 0===e||null===(r=e.emailAccount)||void 0===r?void 0:r.status,signature:null===e||void 0===e||null===(d=e.emailAccount)||void 0===d||null===(h=d.settings)||void 0===h||null===(u=h.find((e=>e.code===M.a.Signature)))||void 0===u?void 0:u.value}})):[];var t;const s=R(e);return V(s),b(s),e}),[i]),le=Object(n.useMemo)((()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&0!==(null===e||void 0===e?void 0:e.length)?e.map((e=>{var s;const n=e.firstName||"",a=e.lastName||"",i=t[e.id],o=(null===i||void 0===i?void 0:i.attributes)||(null===e||void 0===e?void 0:e.attributes)||[];return{key:null===e||void 0===e||null===(s=e.id)||void 0===s?void 0:s.toString(),id:null===e||void 0===e?void 0:e.id,name:"".concat(n," ").concat(a).trim(),email:null===e||void 0===e?void 0:e.email,verificationStatus:null===e||void 0===e?void 0:e.verificationStatus,attributes:o}})):[]}(l,$);if(!z){const t=R(e);t&&(Y(t),m(t),!$[t.id]&&y&&y(t.id))}return e}),[l,$]),ce=e=>{const t=()=>{var t,s;null===(t=window.analytics)||void 0===t||null===(s=t.track)||void 0===s||s.call(t,{userId:Object(h.E)(),event:H.a.PreSendPreviewLoaded,properties:{shAccountId:Object(h.B)(),role:Object(h.A)(),sequenceId:g,currentPlan:Object(h.y)(),"LF Plan":Object(h.u)(),whatChanged:e}})};if(g&&"Sender"===e&&X)return t(),Q(!1),void setTimeout((()=>{Q(!0)}),3e4);g&&"Prospect"===e&&J&&(t(),Z(!1),setTimeout((()=>{Z(!0)}),3e4))};Object(n.useEffect)((()=>{if(C&&C.id!==te){const e=C.attributes.map((e=>"Email"===e.fieldRef.label&&Array.isArray(e.attributeValue)?Object(S.a)(Object(S.a)({},e),{},{attributeValue:e.attributeValue.length>0?e.attributeValue[0].email:""}):"Phone Number"===e.fieldRef.label&&Array.isArray(e.attributeValue)?Object(S.a)(Object(S.a)({},e),{},{attributeValue:e.attributeValue.length>0?e.attributeValue[0].phonenumber:""}):e)),t=Object(S.a)(Object(S.a)({},C),{},{attributes:e});if(ee((e=>Object(S.a)(Object(S.a)({},e),{},{[t.id]:t}))),se(t.id),(null===z||void 0===z?void 0:z.id)===t.id){const e=Object(S.a)(Object(S.a)({},z),{},{attributes:t.attributes});Y(e),m(e)}N()}}),[C]);const re=(e,t,s)=>{var n;return null===e||void 0===e||null===(n=e[t])||void 0===n?void 0:n.toLowerCase().includes(s.toLowerCase())};return Object(n.useEffect)((()=>()=>{_()}),[]),Object(u.jsx)("div",{className:"email-preview-tab",children:Object(u.jsxs)("div",{className:"email-preview-tab-inner",children:[!v&&!O&&Object(u.jsx)(A,{label:"From",options:oe,optionRenderer:e=>Object(u.jsx)(E,{option:e}),selectedOptionRenderer:e=>Object(u.jsx)("span",{className:"fromEmail-option",children:null===e||void 0===e?void 0:e.email}),selectedOption:F,onChange:e=>{V(e),b(e),ce("Sender")},filterOption:(e,t)=>re(t,"name",e)||re(t,"email",e),disabled:0===(null===oe||void 0===oe?void 0:oe.length),isLoading:Object(I.G)(o),placeholder:"No email account connected",noResultFoundImage:Object(u.jsx)(P.E,{})}),!v&&!x&&Object(u.jsx)(A,{label:"To",options:le,optionRenderer:e=>Object(u.jsx)(f,{option:e}),selectedOptionRenderer:e=>Object(u.jsx)("span",{className:"prospect-option",children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)}),selectedOption:z,onChange:e=>{const t=le.findIndex((t=>t.id===e.id));G(t);const s=$[e.id],n=s?Object(S.a)(Object(S.a)({},e),{},{attributes:s.attributes}):e;Y(n),m(n),ce("Prospect"),!s&&y&&(se(null),y(e.id))},disabled:0===(null===le||void 0===le?void 0:le.length)&&!K,filterOption:()=>!0,handleOnKeyDownEvent:e=>{p(e),W(e)},showPrevNextBtn:!0,onPrevNext:e=>{if(0===le.length)return;let t=U;"prev"===e?t=0===U?le.length-1:U-1:"next"===e&&(t=U===le.length-1?0:U+1);const s=le[t];if(!s)return;G(t);const n=$[s.id],a=n?Object(S.a)(Object(S.a)({},s),{},{attributes:n.attributes}):s;Y(a),m(a),!n&&y&&(se(null),y(s.id)),ce("Prospect")},prevNextCtaDisabled:Object(I.G)(c)||0===(null===le||void 0===le?void 0:le.length),tooltipKey:"Prospect",isLoading:Object(I.G)(c),placeholder:"No prospect ".concat(K?"selected":"added"),initialSearchValue:K,noResultFoundImage:Object(u.jsx)(P.H,{})}),Object(u.jsxs)("div",{className:"tab-scrollbar-container",children:[Object(u.jsx)(L,{subject:t,prevStepSubject:s,selectedFromEmail:F,selectedToProspect:z,mergeTags:j,isTemplateEditor:v,sequenceSchedule:d}),w&&Object(u.jsx)(B.a,{}),!w&&Object(u.jsx)(D,{content:a,selectedFromEmail:F,selectedToProspect:z,unsubscribeLink:ne,unsubscribeText:ae,textOnlyEmail:ie,mergeTags:j,isTemplateEditor:v,sequenceSchedule:d,disabledVariableTags:T,textOnlyEmailEnabledForFirstStep:k})]})]})})};let V=function(e){return e.ContentGuide="content-guide",e.EmailPreview="email-preview",e}({});t.b=e=>{let{stepNumber:t,isTemplateEditor:s,agencyConfig:o,sequenceId:l,mergeTags:c,subject:r,prevStepSubject:d,content:h,isGeneratingWithAi:m=!1,subjectEmailSuggestion:b,wordEmailSuggestion:p,personalizationEmailSuggestion:g,linkEmailSuggestion:j,spammyEmailSuggestion:S,sequenceSchedule:O,settings:x,onSearchProspect:E,disabledVariableTags:T,allConnectedEmailAccounts:w,getAllConnectedEmailAccountsRequestStatus:f,prospects:C,getProspectsRequestStatus:y,onShowSidebarFooterChange:N,onSelectedProspectInEmailPreviewChange:A,onSelectedEmailInEmailPreviewChange:I,hideFromDropdownFromEmailPreview:R,hideToDropdownFromEmailPreview:M,sendGetSingleProspectDetailsRequest:q,singleProspectData:P,resetSingleProspect:_,resetProspectsOverview:L,activeSidebarTab:k,textOnlyEmailEnabledForFirstStep:D}=e;const[H,B]=Object(n.useState)(k||V.EmailPreview),U=(e,t)=>Object(u.jsxs)("div",{className:"sidebar-tabs--tab",children:[t,Object(u.jsx)("span",{children:e})]});return Object(n.useEffect)((()=>()=>{N(!s)}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(i.b,{activeKey:H,prefixCls:"bs-tabs",className:"bs-tabs-small sidebar-tabs",onChange:e=>{return B(t=e),void N(t===V.EmailPreview);var t},children:[Object(u.jsx)(i.a,{tab:U("Content Guide",Object(u.jsx)(a.wb,{})),children:Object(u.jsx)(v,{stepNumber:t,isTemplateEditor:s,agencyConfig:o,subjectEmailSuggestion:b,wordEmailSuggestion:p,personalizationEmailSuggestion:g,linkEmailSuggestion:j,spammyEmailSuggestion:S})},V.ContentGuide),Object(u.jsx)(i.a,{tab:U("Email Preview",Object(u.jsx)(a.Wb,{})),children:Object(u.jsx)(F,{subject:r,prevStepSubject:d,content:h,allConnectedEmailAccounts:w,getAllConnectedEmailAccountsRequestStatus:f,settings:x,prospects:C,getProspectsRequestStatus:y,onSelectedProspectInEmailPreviewChange:A,onSelectedEmailInEmailPreviewChange:I,onSearchProspect:E,sequenceId:l,mergeTags:c,isTemplateEditor:s,hideFromDropdownFromEmailPreview:R,hideToDropdownFromEmailPreview:M,sequenceSchedule:O,disabledVariableTags:T,isGeneratingWithAi:m,sendGetSingleProspectDetailsRequest:q,singleProspectData:P,resetSingleProspect:_,resetProspectsOverview:L,textOnlyEmailEnabledForFirstStep:D})},V.EmailPreview)]})})}},2235:function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s(2),a=s(1),i=s.n(a),o=s(92),l=s(27),c=s(31),r=s(40),d=s(60),h=s.n(d);const u=(e,t)=>{switch(e){case"email":{const e=t.split(",");if(!(e.length<=5))return"Maximum of 5 emails are allowed";if(!e.every((e=>h.a.isEmail(e.trim()))))return"Enter a valid email address";break}}return""};var m=s(16),b=s(527),p=s(0);class g extends i.a.Component{constructor(e){super(e),this.focusInputRef=void 0,this.state={values:{email:""},errors:{email:""},dirty:{email:!1}},this.focusInputRef=i.a.createRef(),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onFormSubmit=this.onFormSubmit.bind(this),this.onModalShow=this.onModalShow.bind(this)}componentDidMount(){const e=Object(b.q)();e&&this.setState(Object(o.a)((t=>{t.values.email=e,t.dirty.email=!0})))}onInputChange(e,t){const{name:s}=t.target;this.setState(Object(o.a)((t=>{t.values[s]=e,t.dirty[s]=!0})))}onInputBlur(e){const{name:t}=e.target;this.setState(Object(o.a)((e=>{e.dirty[t]&&(e.errors[t]=u(t,e.values[t]))})))}onFormSubmit(e){e.preventDefault();const{dirty:t,errors:s,values:a}=this.state,{onSubmit:i}=this.props,o=Object(n.a)({},t);Object.keys(o).forEach((e=>{o[e]=!0}));const l=Object(n.a)({},s),c=Object.keys(l);let r=!1;c.forEach((e=>{const t=u(e,a[e]);l[e]=t,r=r||!!t})),this.setState({errors:l,dirty:o}),r||i(a.email,e)}onModalShow(){const{showInput:e}=this.props;e&&this.focusInputRef.current.focus()}render(){const{values:e,errors:t}=this.state,{show:s,title:n,content:a,onClose:i,onSubmit:o,label:l,showInput:d,submitButtonText:h,cancelButtonText:u,isSubmitLoading:b,isSubmitDisabled:g,className:j,t:v}=this.props;return Object(p.jsxs)(r.a,{show:s,className:"confirm-modal-width send-test-email-modal ".concat(j),titleContent:n,showCloseIcon:!0,onClose:i,onSubmit:d?this.onFormSubmit:o,isSubmitLoading:b,isSubmitDisabled:g,submitButtonText:h,cancelButtonText:u,backdrop:"static",extraModalProps:{centered:!0,"aria-labelledby":"contained-modal-title-vcenter",onShow:this.onModalShow},children:[a.length>0&&a.map((e=>{let{id:t,text:s}=e;return Object(p.jsx)("p",{className:"send-test-email-modal-content",children:v("messages.".concat(s))},t)})),d&&Object(p.jsxs)("div",{className:"form-wrapper",children:[Object(p.jsx)("p",{className:"send-test-email-modal-label regular-1",children:l}),Object(p.jsx)(c.a,{name:"email",className:"send-test-email-modal-input",value:e.email,variant:t.email&&c.a.Variant.Error,caption:t.email&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{src:m.a.AlertTriangleRed,alt:"Alert"}),t.email]}),onChange:this.onInputChange,onBlur:this.onInputBlur,autoComplete:"off",ref:this.focusInputRef})]})]})}}var j=Object(l.c)()(g)},2241:function(e){e.exports=JSON.parse('{"nm":"Main Scene","ddd":0,"h":500,"w":500,"meta":{"g":"@lottiefiles/creator 1.42.2"},"layers":[{"ty":4,"nm":"Group 6","sr":1,"st":0,"op":150,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":0,"k":[23.807750701904297,28.953750610351566]},"s":{"a":1,"k":[{"o":{"x":0,"y":0},"i":{"x":0.68,"y":0.19},"s":[1149.5282,1149.5282],"t":0},{"s":[615.5282,615.53],"t":15}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[209.3249,268.4628],"t":0},{"s":[597.3012,268.4628],"t":18}]},"r":{"a":0,"k":0},"sa":{"a":0,"k":0},"o":{"a":0,"k":100}},"shapes":[{"ty":"gr","bm":0,"hd":false,"nm":"Group 7","it":[{"ty":"sh","bm":0,"hd":false,"nm":"Path 6","d":1,"ks":{"a":0,"k":{"c":true,"i":[[0,0],[0,-1.2471999999999994],[-2.1174999999999997,-2.1175999999999995],[-2.9945999999999984,0],[0,-1.247200000000003],[1.2471999999999994,0],[2.1174999999999997,-2.1174999999999997],[0,-2.9947000000000017],[1.2471999999999994,0],[0,1.247099999999996],[2.1174999999999997,2.1174999999999997],[2.9947,0],[0,1.2471999999999994],[-1.2471500000000013,0],[-2.1175999999999995,2.1174999999999997],[0,2.9947000000000017],[-1.2470999999999997,0]],"o":[[1.2471999999999994,0],[0,2.9947000000000017],[2.1174999999999997,2.1174999999999997],[1.2471999999999994,0],[0,1.2471999999999994],[-2.9945999999999984,0],[-2.1174999999999997,2.1174999999999997],[0,1.247099999999996],[-1.2470999999999997,0],[0,-2.9947000000000017],[-2.1175999999999995,-2.1174999999999997],[-1.2471500000000013,0],[0,-1.247200000000003],[2.9947,0],[2.1174999999999997,-2.1175999999999995],[0,-1.2471999999999994],[0,0]],"v":[[23.8077,13.146],[26.066,15.4042],[29.3731,23.3884],[37.3572,26.6955],[39.6155,28.9537],[37.3572,31.212],[29.3731,34.5191],[26.066,42.5033],[23.8077,44.7615],[21.5495,42.5033],[18.2424,34.5191],[10.2582,31.212],[8,28.9537],[10.2582,26.6955],[18.2424,23.3884],[21.5495,15.4042],[23.8077,13.146]]}}},{"ty":"gf","bm":0,"hd":false,"nm":"Fill","e":{"a":0,"k":[84.0188,-30.7456]},"g":{"p":3,"k":{"a":0,"k":[0.183258,0.9215686274509803,0.2980392156862745,0.9019607843137255,0.534401,0.615686274509804,0.32941176470588235,0.8588235294117647,1,0.11372549019607843,0.3058823529411765,0.8470588235294118,0.183258,1,0.534401,1,1,1]}},"t":1,"a":{"a":0,"k":0},"h":{"a":0,"k":0},"s":{"a":0,"k":[-4.84366,-71.8698]},"r":2,"o":{"a":0,"k":100}},{"ty":"tr","a":{"a":0,"k":[23.807750701904297,28.953750610351566]},"s":{"a":0,"k":[100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[23.807750701904297,28.953750610351566]},"r":{"a":0,"k":0},"sa":{"a":0,"k":0},"o":{"a":0,"k":100}}]}],"ind":1}],"v":"5.7.0","fr":30,"op":30,"ip":0,"assets":[]}')}}]);
//# sourceMappingURL=4.1fd269bb.chunk.js.map