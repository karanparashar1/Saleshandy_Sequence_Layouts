(this["webpackJsonpshv3-reactapp"]=this["webpackJsonpshv3-reactapp"]||[]).push([[27],{2098:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var s=a(2),n=a(1),i=a.n(n),r=a(73),c=a(31),o=a(28),d=a(40),u=a(92);const l=(e,t)=>{switch(e){case"confirm":if("delete"!==t)return"Invalid confirmation input"}return""};var p=a(340),h=a(41),S=a(0);class b extends i.a.Component{constructor(e){super(e),this.focusInputRef=void 0,this.onCloseHandler=()=>{this.props.onClose(),p.a.dispatch(h.a.MODAL_HANDLER,{isModalOpened:!1})},this.state={values:{confirm:""},errors:{confirm:""},dirty:{confirm:!1}},this.focusInputRef=i.a.createRef(),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onFormSubmit=this.onFormSubmit.bind(this),this.onModalShow=this.onModalShow.bind(this),this.onCloseHandler=this.onCloseHandler.bind(this)}onInputChange(e,t){const a=t.target.name;this.setState(Object(u.a)((t=>{t.values[a]=e,t.dirty[a]=!0})))}onInputBlur(e){const t=e.target.name;this.setState(Object(u.a)((e=>{e.dirty[t]&&(e.errors[t]=l(t,e.values[t]))})))}onFormSubmit(e){e.preventDefault();const t=Object(s.a)({},this.state.dirty),a=Object.keys(t);for(const s of a)t[s]=!0;const n=Object(s.a)({},this.state.errors),i=Object.keys(n);let r=!1;for(const s of i){const e=l(s,this.state.values[s]);n[s]=e,r=r||!!e}this.setState({errors:n,dirty:t}),r||(this.props.onSubmit(),p.a.dispatch(h.a.MODAL_HANDLER,{isModalOpened:!1}))}onModalShow(){this.focusInputRef.current.focus()}render(){const{values:e,errors:t}=this.state,{show:a,header:s,content:n,isRequestPending:i}=this.props;return Object(S.jsx)(d.a,{show:a,className:"confirm-modal-width",hideHeader:!0,hideFooter:!0,backdrop:"static",extraModalProps:{centered:!0,"aria-labelledby":"contained-modal-title-vcenter",onShow:this.onModalShow},children:Object(S.jsxs)("form",{onSubmit:this.onFormSubmit,children:[Object(S.jsxs)("div",{className:"bs-modal-content",children:[Object(S.jsx)("div",{className:"bs-modal-icon icon-error",children:Object(S.jsx)(r.a,{identifier:"info"})}),Object(S.jsxs)("div",{className:"bs-modal-inner-content",children:[Object(S.jsx)("h3",{children:s}),n&&Object(S.jsx)("p",{className:"bs-mt-15",children:n}),Object(S.jsxs)("p",{className:"bs-mt-20 bs-mb-10",children:["Confirm by typing ",Object(S.jsx)("span",{className:"red-txt-5",children:"delete"})," ","below."]}),Object(S.jsx)(c.a,{name:"confirm",className:"bs-mb-20",value:e.confirm,variant:t.confirm&&c.a.Variant.Error,caption:t.confirm,onChange:this.onInputChange,onBlur:this.onInputBlur,autoComplete:"off",ref:this.focusInputRef})]})]}),Object(S.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(S.jsx)(o.a,{className:"bs-mr-5 cancel-btn",variant:o.a.Variant.Outlined,onClick:this.onCloseHandler,children:"Cancel"}),Object(S.jsx)(o.a,{type:o.a.Type.Submit,variant:o.a.Variant.Primary,isLoading:i,disabled:i,className:"font-medium submit-btn",children:"Yes"})]})]})})}}var m=b},2138:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(2175),n=a(487);const i=e=>{const t=null===e||void 0===e?void 0:e.match(/{{(.*?)}}/g);if(t){const e=[];t.forEach((t=>{const a=t.replace("{{","").replace("}}","").split("|");e.push(a[0].trim())}));return e.filter((e=>{const t=e.match(/^\s*([a-zA-Z]+)\s*(?:([+-\/])\s*([a-zA-Z0-9]+))?\s*$/);if(t){const e=t[1].trim().toLowerCase();return!Object.values(n.a).includes(e)}return!0}))}return[]};var r=a(822);var c=a(527);const o=(e,t,a)=>{if(Object(s.a)(a)>5e5)return{variantId:e,subjectMergeTags:[],bodyMergeTags:[],bodySpinText:[],totalSpammyWords:0,plainTextPercentage:0,totalWordsBody:0,totalCharactersSubject:0,isMaxSizeExceeded:!0};var n;return{variantId:e,subjectMergeTags:i(t)||[],bodyMergeTags:i(a)||[],bodySpinText:(null===(n=a)||void 0===n?void 0:n.match(/{spin}(.*?){endspin}/g))||[],totalSpammyWords:(e=>{const t=[];return r.a.forEach((a=>{new RegExp("\\b".concat(a,"\\b"),"gi").test(e)&&t.push(a)})),t.length})(a)||0,plainTextPercentage:(e=>{const t=document.createElement("div");t.innerHTML=e;const a=t.textContent||t.innerText||"";return Math.round((null===a||void 0===a?void 0:a.length)/(null===e||void 0===e?void 0:e.length)*100)})(a)||0,totalWordsBody:(e=>{const t=Object(c.e)(e,1);return(null===t||void 0===t?void 0:t.wordLength)||0})(a)||0,totalCharactersSubject:(e=>{const t=Object(c.c)(e);return(null===t||void 0===t?void 0:t.subjectLength)||0})(t)||0,isMaxSizeExceeded:!1}}},2175:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));const s=t=>e.byteLength(t,"utf-8")}).call(this,a(705).Buffer)},2195:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(1);var s=a(5),n=a(174),i=a(0);var r=e=>{let{show:t,onClose:a,onSubmit:r,isRequestPending:c,title:o="Do you want to duplicate this?",content:d="Duplicating Sequence will duplicate an entire sequence data and a copy will be created."}=e;return Object(i.jsx)(n.a,{show:t,className:"show-conditions-modal",title:Object(i.jsxs)("div",{className:"d-flex align-items-center gap-10",children:[Object(i.jsx)(s.d,{width:20,height:20,color:"#faad14"}),Object(i.jsx)("span",{className:"line-height-1",children:o})]}),onHide:a,primaryBtnLabel:"Yes",secondaryBtnLabel:"No",primaryBtnClickedHandler:r,secondaryBtnClickedHandler:a,primaryBtnDisabled:c,primaryBtnLoading:c,children:Object(i.jsx)("p",{children:d})})}},2325:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ot}));var s=a(2),n=a(15),i=a(29),r=a(1),c=a.n(r),o=a(162),d=a.n(o),u=a(27),l=a(2234),p=a(785),h=a.n(p),S=a(4),b=a(5),m=a(14),j=a.n(m),v=a(2090),q=a(0);var O=e=>{let{variantNumber:t}=e;const a=Object(v.b)(t);return Object(q.jsx)("span",{className:"step-sub-icon",children:a})},g=a(562),V=a(2058),x=a(825),y=a(82),A=a(11),I=a(17);var R=e=>{let{subject:t,content:a,onTitleClick:n,sequenceStepVariantAttachments:i,isAIGenerated:r}=e;const c=t||"<sending as a same thread>",o=Object(g.htmlToText)(a);return Object(q.jsxs)("div",Object(s.a)(Object(s.a)({className:"step-sub-desc"},Object(I.a)(n)),{},{children:[Object(q.jsx)("p",{children:c}),Object(q.jsxs)("p",{className:"m-0 d-flex align-items-center",children:[r&&Object(q.jsx)(V.a,{className:"ai-generated-icon",src:x.a,alt:"ai-icon"}),Object(q.jsx)("span",{children:o}),(()=>{if(!i||0===(null===i||void 0===i?void 0:i.length))return Object(q.jsx)(q.Fragment,{});if(i&&i.length>0){const e=1===i.length?"attachment":"attachments";return Object(q.jsx)(A.c,{text:"".concat(i.length," ").concat(e),children:Object(q.jsx)(y.a,{identifier:"paperclip",className:"ml-1 step-attachment-icon"})})}return Object(q.jsx)(q.Fragment,{})})()]})]}))},E=a(172),f=a(791);var D=e=>{let{status:t,isMinActiveCountReached:a,onChange:s}=e;const n=t===f.a.Active;return Object(q.jsx)(A.c,{text:n?"Disable variant":"Enable variant",placement:A.d.Bottom,rootClose:!0,children:Object(q.jsx)("div",{className:"step-action",children:Object(q.jsx)(E.b,{className:"d-flex",checked:n,onChange:s,size:E.a.Small,disabled:n&&a})})})},M=a(255);var w=e=>{let{formatNumber:t,statValue:a}=e;return a>=1e3?Object(q.jsx)(M.a,{text:new Intl.NumberFormat("en-US").format(a),children:Object(q.jsx)("span",{className:"font-14 font-bold blue-txt-15",children:t(a)})}):a>0?Object(q.jsx)("span",{className:"font-14 font-bold blue-txt-15",children:t(a)}):Object(q.jsx)("span",{className:"font-14 font-bold gray-txt-15",children:"-"})},N=a(783);var C=e=>{let{variantStat:t}=e;const a=e=>{return Object(q.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[Object(q.jsx)("span",{className:"font-14 font-bold blue-txt-15",children:Object(N.a)(e)}),Object(q.jsx)("span",{className:"font-12 font-medium gray-txt-15 ml-1",children:(a=e,t.sent?"(".concat((100*a/t.sent).toFixed(0),"%)"):"(0%)")})]});var a};return Object(q.jsxs)("div",{className:"state-row",children:[Object(q.jsxs)("div",{className:"state-block",children:[Object(q.jsx)(w,{formatNumber:N.a,statValue:null===t||void 0===t?void 0:t.sent}),Object(q.jsx)("small",{className:"gray-txt-15",children:"Sent"})]}),Object(q.jsxs)("div",{className:"state-block",children:[Object(q.jsx)(w,{formatNumber:a,statValue:null===t||void 0===t?void 0:t.open}),Object(q.jsx)("small",{className:"gray-txt-15",children:"Opened"})]}),Object(q.jsxs)("div",{className:"state-block",children:[Object(q.jsx)(w,{formatNumber:a,statValue:null===t||void 0===t?void 0:t.reply}),Object(q.jsx)("small",{className:"gray-txt-15",children:"Replied"})]})]})},T=a(18),F=a(19),G=a(16),U=a(145);const P=e=>{let{icon:t,onClick:a,tooltip:n}=e;return Object(q.jsx)(M.a,{text:n,children:Object(q.jsx)("div",Object(s.a)(Object(s.a)({className:"option"},Object(I.a)(a)),{},{children:t}))})};var k=e=>{let{onDeleteVariant:t,onCloneVariant:a,onAddAiGeneratedVariant:s,variantNumber:i,allowGenerateWithAiBtn:c,isMaxVariantsCountReached:o}=e;const[d,u]=Object(r.useState)(!1),l=Object(n.useSelector)((e=>{var t;return null===e||void 0===e||null===(t=e.home)||void 0===t?void 0:t.isDemoAccount})),p=Object(n.useSelector)((e=>{var t;return null===e||void 0===e||null===(t=e.sequence)||void 0===t?void 0:t.isAiVariantDisabled})),h=Object(n.useSelector)((e=>{var t,a,s,n;return null!==(t=null===e||void 0===e||null===(a=e.home)||void 0===a||null===(s=a.getPostLoadMetaResponse)||void 0===s||null===(n=s.accountUsageQuotaRemaining)||void 0===n?void 0:n["AI_VARIANT.CREDIT"])&&void 0!==t?t:0})),m=Object(r.useMemo)((()=>p||0===+h),[p,h]),j=Object(r.useMemo)((()=>Object(v.a)(o,m,l,i)),[m,o,i,l]);return Object(q.jsxs)("div",{className:"grid-action",children:[Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_WRITE)&&c&&Object(q.jsx)(P,{tooltip:j,icon:Object(q.jsx)(S.h,{src:G.a.Stars,alt:"stars",width:20,height:20,className:"".concat((m&&!l||o)&&"cursor-not-allowed")}),onClick:()=>{m||o?l&&m&&u(!0):s()}}),Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_WRITE)&&Object(q.jsx)(P,{tooltip:o?"You have reached the maximum number of variants allowed":"Clone variant",icon:Object(q.jsx)(b.cb,{width:20,height:20,className:"".concat(o&&"cursor-not-allowed")}),onClick:!o&&a}),Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_DELETE)&&Object(q.jsx)(P,{tooltip:"Delete variant",icon:Object(q.jsx)(b.Ic,{width:20,height:20,className:"gray-txt-11"}),onClick:t}),Object(q.jsx)(U.a,{show:d,onClose:()=>{u(!1)},title:"AI variant generation is limited in demo mode",content:"You\u2019ve explored multiple AI-generated variants in demo mode. Sign up to generated unlimited variants.",primaryBtnLabel:"Sign up"})]})},L=a(73),_=a(572),W=a(2101),B=a(9);var H=e=>{var t,a,s,n,i,r,c;let{stepNumber:o,variant:d,variantNumber:u,variantStat:l,isFirstVariant:p,isLastVariant:h,stepType:S,showVariantStatus:b,isMinActiveCountReached:m,onDeleteVariant:v,onCloneVariant:g,onAddAiGeneratedVariant:V,onUpdateVariantData:x,onUpdateVariantStatus:y,isMaxVariantsCountReached:A}=e;const I=j()(["step-sub-list",{"border-radius-top":p,"border-radius-bottom":h}]);return Object(q.jsxs)("div",{className:I,children:[Object(q.jsxs)("div",{className:"step-sub-list-left",children:[b&&Object(q.jsx)(D,{status:d.status,isMinActiveCountReached:m,onChange:y}),Object(W.l)(S)&&Object(q.jsx)(O,{variantNumber:u}),Object(q.jsx)(R,{subject:Object(_.b)(S,(null===(t=d.payload)||void 0===t?void 0:t.subject)||(null===(a=d.payload)||void 0===a?void 0:a.title)),content:(null===(s=d.payload)||void 0===s?void 0:s.content)||(null===(n=d.payload)||void 0===n?void 0:n.message)||(null===(i=d.payload)||void 0===i?void 0:i.connectionNote)||(null===d||void 0===d?void 0:d.taskNote),onTitleClick:x,stepType:S,sequenceStepVariantAttachments:d.sequenceStepVariantAttachments,isAIGenerated:(null===d||void 0===d?void 0:d.isAIGenerated)||!1})]}),Object(q.jsxs)("div",{className:"step-sub-list-right",children:[1!==o&&S===B.F.Email&&Object(q.jsxs)("div",{className:"step-email-type",children:[Object(q.jsx)("div",{className:"step-email-type-icon",children:Object(q.jsx)(L.a,{identifier:(null===(r=d.payload)||void 0===r?void 0:r.subject)?"send":"corner-down-right",className:"gray-txt-11"})}),Object(q.jsx)("span",{className:"gray-txt-11 step-email-type-text",children:(null===(c=d.payload)||void 0===c?void 0:c.subject)?"New thread":"Reply"})]}),S===B.F.Email&&Object(q.jsx)(C,{variantStat:l}),Object(q.jsx)(k,{onDeleteVariant:v,onCloneVariant:g,onAddAiGeneratedVariant:V,variantNumber:u,allowGenerateWithAiBtn:S===B.F.Email,isMaxVariantsCountReached:A})]})]})},z=a(212);var Q=e=>{let{stepNumber:t,variants:a,variantStats:s,stepType:n,onDeleteVariant:i,onCloneVariant:r,onAddAiGeneratedVariant:c,onUpdateVariantData:o,onUpdateVariantStatus:d}=e;const u=a.length>1,l=a.map((e=>e.status)).reduce(((e,t)=>e+(t===f.a.Active?1:0)),0)<=z.c.MinActiveVariants;return Object(q.jsx)("div",{className:"step-sub-list-inner",children:a.map(((e,p)=>{const h=p+1,S=null===s||void 0===s?void 0:s.findIndex((t=>t.variantId===e.id));return Object(q.jsx)(H,{stepNumber:t,variant:e,variantStat:s&&-1!==S?s[S]:null,variantNumber:h,isFirstVariant:0===p,isLastVariant:p===a.length-1,stepType:n,showVariantStatus:u,isMinActiveCountReached:l,isMaxVariantsCountReached:a.length>=z.c.MaxVariants,onDeleteVariant:()=>i(e,h),onCloneVariant:()=>r(e,a.length+1),onAddAiGeneratedVariant:()=>c(e,a.length+1),onUpdateVariantData:()=>o(e,h),onUpdateVariantStatus:()=>d(e,h)},e.id)}))})},Y=a(559),J=a(34),K=a(535),Z=a(596),X=a(50);var $=e=>{let{stepNumber:t,stepType:a,stepPriority:n,onDeleteStep:i,stepTentativeDateMessage:c,stepHashId:o,isSubsequence:d}=e;const{t:l}=Object(u.b)(),{icon:p,sendingAs:h,date:S,message:b}=c,{text:m,variant:j}=Object(K.d)(n),[v,O]=Object(r.useState)(!1);return Object(q.jsx)("div",{className:"step-list",children:Object(q.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3 step-wrap",children:[Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[Object(q.jsx)("div",{className:"step-type-icon",style:{backgroundColor:a===B.F.LinkedInConnectionRequest||a===B.F.LinkedInInMail||a===B.F.LinkedInMessage||a===B.F.LinkedInPostInteraction||a===B.F.LinkedInViewProfile?"#178ACF":Object(X.C)(a)?"#25D366":Object(X.z)(a)?"#8B5CF6":a===B.F.Custom?"#F97316":"#3B82F6"},children:Object(Y.a)({type:a,width:18,height:18,module:"sequence-step"})}),Object(q.jsx)("div",{className:"step-title",children:Object(q.jsxs)("span",{className:"semibold-1 popover-arrow-color-txt",children:["Step ",t]})}),a!==B.F.Email&&Object(q.jsx)("div",{className:"ml-3",children:Object(q.jsx)(Z.a,{text:m,variant:j})}),S&&Object(q.jsxs)("div",{className:"step-tentative-date d-flex align-items-center ml-2",children:[Object(q.jsx)(J.a,{src:p,className:"mr-1"}),Object(q.jsxs)("p",{className:"m-0 font-12 font-medium gray-txt-12",children:[h," ",Object(q.jsx)("span",{className:"blue-txt-15 font-semibold",children:S}),","," ",b,"."]}),Object(q.jsx)(M.a,{className:"tooltip-xxl",text:Object(W.i)(l),children:Object(q.jsx)(J.a,{src:G.a.InfoCircle,className:"ml-1"})})]})]}),Object(q.jsxs)("div",{className:"step-actions-wrapper",children:[d?Object(q.jsx)(q.Fragment,{}):Object(q.jsx)(M.a,{placement:A.d.Bottom,text:v?Object(q.jsxs)("span",{className:"d-flex align-items-center",children:[Object(q.jsx)(L.a,{identifier:"check",className:"font-16 mr-1",style:{marginTop:".5px"}}),"Step Id Copied!"]}):"Click to Copy Step Id",children:Object(q.jsx)("div",Object(s.a)(Object(s.a)({className:"step-id"},Object(I.a)((()=>{navigator.clipboard.writeText(o),O(!0),setTimeout((()=>{O(!1)}),2e3)}))),{},{children:Object(q.jsx)("code",{children:o})}))}),Object(F.a)(T.a.SEQUENCE_STEP_DELETE)&&Object(q.jsx)(M.a,{text:"Delete step",children:Object(q.jsx)("div",Object(s.a)(Object(s.a)({className:"step-action-icon"},Object(I.a)((()=>{i()}))),{},{children:Object(q.jsx)(L.a,{identifier:"trash"})}))})]})]})})},ee=a(6),te=a(21);var ae=e=>{let{isMaxVariantsCountReached:t,onAddVariant:a,onAddAiGeneratedVariant:i,allowGenerateWithAiBtn:c=!1}=e;const[o,d]=Object(r.useState)(!1),u=Object(n.useSelector)((e=>{var t;return null===e||void 0===e||null===(t=e.home)||void 0===t?void 0:t.isDemoAccount})),l=Object(n.useSelector)((e=>{var t;return null===e||void 0===e||null===(t=e.sequence)||void 0===t?void 0:t.isAiVariantDisabled})),p=Object(n.useSelector)((e=>{var t,a,s,n;return null!==(t=null===e||void 0===e||null===(a=e.home)||void 0===a||null===(s=a.getPostLoadMetaResponse)||void 0===s||null===(n=s.accountUsageQuotaRemaining)||void 0===n?void 0:n["AI_VARIANT.CREDIT"])&&void 0!==t?t:0})),h=Object(r.useMemo)((()=>Object(te.w)()===ee.h.TRIAL),[te.w]),m=Object(r.useMemo)((()=>{const e=Object(te.w)();return h?e===ee.h.TRIAL?"This is a premium feature that is available on PRO & higher plans. You can try it for free in your trial.":"This is a premium feature that is available on PRO & higher plans. It's not included in your current plan.":""}),[te.w,h]),j=Object(r.useMemo)((()=>l||0===+p),[l,p]),O=Object(r.useMemo)((()=>Object(v.a)(t,j,u,1)),[j,t,u]);return Object(q.jsxs)("div",{className:"add-variation d-flex align-items-center ",children:[c&&Object(q.jsx)(A.c,{text:O,children:Object(q.jsxs)("div",Object(s.a)(Object(s.a)({className:"d-flex align-items-center ai-variant cr-variant ".concat((j&&!u||t)&&"cursor-not-allowed")},Object(I.a)((()=>{j||t?u&&j&&d(!0):i()}))),{},{children:[Object(q.jsx)(S.h,{src:G.a.Stars,width:16,height:16,alt:"stars"}),Object(q.jsx)("span",{className:"ml-1 btn-text",children:"Generate AI variant"})]}))}),Object(q.jsx)(A.c,{text:t?"You have reached the maximum number of variants allowed":"Create variant manually \n".concat(m),className:"create-variant-btn",children:Object(q.jsxs)("div",Object(s.a)(Object(s.a)({className:"d-flex align-items-center popover-arrow-color-txt cr-variant ".concat(t&&"cursor-not-allowed")},Object(I.a)(!t&&a)),{},{children:[Object(q.jsx)(b.kc,{width:16,height:16}),Object(q.jsx)("span",{className:"ml-1 regular-2 font-medium mr-2 btn-text",children:"Create variant"}),h&&Object(q.jsx)(S.h,{src:G.a.PremiumFeature,alt:"premium feature"})]}))}),Object(q.jsx)(U.a,{show:o,onClose:()=>{d(!1)},title:"AI variant generation is limited in demo mode",content:"You\u2019ve explored multiple AI-generated variants in demo mode. Sign up to generate unlimited variants.",primaryBtnLabel:"Sign up"})]})};var se=e=>{let{step:t,index:a,variantStats:n,createdAt:i,absoluteExecutionDay:r,onDeleteStep:c,onDeleteVariant:o,onCloneVariant:d,onAddVariant:u,onAddAiGeneratedVariant:p,onUpdateVariantData:h,onUpdateVariantStatus:S,onUpdateStepExecutionDay:m,updateSequenceStepExecutionDayRequestStatus:j,stepTentativeDateMessage:v,isSubsequence:O}=e;const g=t.variants.length>=z.c.MaxVariants,V=(e,t)=>Object(s.a)({userSelect:"none"},t);return Object(q.jsx)("li",{children:Object(q.jsx)("div",{className:"st",children:Object(q.jsx)(l.b,{draggableId:t.id.toString(),index:a,children:(e,a)=>a.isDragging?Object(q.jsxs)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:"dragging-wrap blue-17 d-flex justify-content-center align-items-center",style:V(a.isDragging,e.draggableProps.style),children:[t.type===z.h.LinkedInConnectionRequest||t.type===z.h.LinkedInInMail||t.type===z.h.LinkedInMessage||t.type===z.h.LinkedInPostInteraction||t.type===z.h.LinkedInViewProfile?Object(q.jsx)(b.Sb,{width:18,height:18,className:"popover-arrow-color-txt mr-2"}):Object(X.z)(t.type)?Object(q.jsx)(b.Bc,{width:18,height:18,className:"popover-arrow-color-txt mr-2"}):Object(X.C)(t.type)?Object(q.jsx)(b.Xc,{width:18,height:18,className:"popover-arrow-color-txt mr-2"}):t.type===z.h.Custom?Object(q.jsx)(b.M,{width:18,height:18,className:"popover-arrow-color-txt mr-2"}):Object(q.jsx)(b.Wb,{width:18,height:18,className:"popover-arrow-color-txt mr-2"}),Object(q.jsxs)("span",{className:"semibold-1 popover-arrow-color-txt",children:["Move Step ",t.number]})]})):Object(q.jsxs)("div",Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),{},{className:"drag",style:V(a.isDragging,e.draggableProps.style),children:[Object(q.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[Object(te.L)()&&Object(F.a)(T.a.TASK_READ)&&Object(q.jsx)("div",{className:"dnd-icon-wrapper",children:Object(q.jsx)("img",Object(s.a)(Object(s.a)({},e.dragHandleProps),{},{src:G.a.GripVertical,alt:"grip-vertical"}))}),Object(q.jsx)($,{stepNumber:t.number,stepType:t.type,stepPriority:t.priority,isFirstStep:Object(K.e)(t),relativeDays:t.relativeDays,createdAt:i,absoluteExecutionDay:r,onDeleteStep:c,onUpdateStepExecutionDay:m,updateSequenceStepExecutionDayRequestStatus:j,stepTentativeDateMessage:v,stepHashId:t.hashId,isSubsequence:O})]}),Object(q.jsx)(Q,{stepNumber:t.number,variantStats:n,variants:t.variants,stepType:t.type,onDeleteVariant:o,onCloneVariant:d,onAddAiGeneratedVariant:p,onUpdateVariantData:h,onUpdateVariantStatus:S}),Object(W.l)(t.type)&&Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_WRITE)&&Object(q.jsx)(ae,{isMaxVariantsCountReached:g,onAddVariant:u,onAddAiGeneratedVariant:()=>{var e,a;const s=(null===t||void 0===t||null===(e=t.variants)||void 0===e?void 0:e[0])||null,n=(null===t||void 0===t||null===(a=t.variants)||void 0===a?void 0:a.length)||0;p(s,n)},allowGenerateWithAiBtn:(null===t||void 0===t?void 0:t.type)===z.h.Email})]}))},t.id.toString())})})};let ne=function(e){return e.StepOneAdded="stepOneAdded",e.StepOneDeleted="stepOneDeleted",e.ReCalculateStepOne="reCalculateStepOne",e.VariantAdded="variantAdded",e.VariantUpdated="variantUpdated",e}({});var ie=a(3),re=a(8),ce=a(100),oe=a(2098),de=a(541);var ue=e=>Object(q.jsx)(oe.a,Object(s.a)(Object(s.a)({},e),{},{header:"Do you want to delete this ".concat(Object(de.u)(e.type),"  step?"),content:"If you delete the step, you will permanently lose your step data."}));var le=e=>Object(q.jsx)(oe.a,Object(s.a)(Object(s.a)({},e),{},{header:"Do you want to delete the ".concat((()=>{const{type:t,variantNumber:a}=e,s=Object(v.b)(a);return t===B.F.LinkedInConnectionRequest?"Variant ".concat(s," of LinkedIn Connection Request"):t===B.F.LinkedInInMail?"Variant ".concat(s," of LinkedIn InMail Request"):t===B.F.LinkedInMessage?"Variant ".concat(s," of LinkedIn Message Request"):t===B.F.LinkedInPostInteraction?"LinkedIn Post Integration Request":t===B.F.LinkedInViewProfile?"LinkedIn View Profile Request":t===B.F.Demo?"Demo Call":t===B.F.FollowUp?"FollowUp Call":t===B.F.Reminder?"Reminder Call":t===B.F.Other?"Other Call":t===B.F.Introduction?"Introduction Call":t===B.F.WhatsAppMessage?"Variant ".concat(s," of WhatsApp Message"):t===B.F.WhatsAppVoiceMessage?"Variant ".concat(s," of WhatsApp Voice Message"):t===B.F.WhatsAppVoiceCall?"Variant ".concat(s," of WhatsApp Voice Call"):t===B.F.Email?"Variant ".concat(s," of Email"):"Custom Task"})()," step?"),content:"If you delete the step, you will permanently lose your step data."})),pe=a(351);var he=e=>{let{show:t,status:a,onClose:s,onSubmit:n,isRequestPending:i}=e;const r=a===f.a.Active?"enable":"disable";return Object(q.jsx)(pe.a,{show:t,onClose:s,onSubmit:n,isRequestPending:i,title:"Do you want to ".concat(r," this?"),content:a===f.a.Inactive?"Once you ".concat(r," the variant, no further contact will\n    receive the disabled variant emails."):"Once you enable the variant, the prospects would start receiving\n         the variant emails.",showSuccessButton:!0,showCancelButton:!0})},Se=a(92),be=a(2177),me=a(175),je=a(2124),ve=a(527),qe=a(2108),Oe=a(2148);class ge extends c.a.PureComponent{constructor(e){super(e);const{defaultRelativeExecutionDay:t}=this.props;this.state={values:{relativeDays:"".concat(t)},errors:{relativeDays:""},dirty:{relativeDays:null}},this.onFormSubmit=this.onFormSubmit.bind(this),this.onInputChangeHelper=this.onInputChangeHelper.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onValueChange=this.onValueChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}onFormSubmit(e,t,a,s,n){const{onSubmit:i,defaultRelativeExecutionDay:r}=this.props,{values:c}=this.state,o=Number(c.relativeDays);i(e,t,a,s,o!==r?o:null,n)}onInputChangeHelper(e,t){this.validate(e)&&""!==e||this.onInputChange(e,t)}onInputChange(e,t){const{name:a}=t.target;this.onValueChange(e,a)}onValueChange(e,t){this.setState(Object(Se.a)((a=>{a.values[t]=e,a.dirty[t]=!0})))}onInputBlur(e){const{name:t}=e.target;this.postInputBlur(t)}getMinRelativeDays(){return Object(K.c)()}postInputBlur(e){this.setState(Object(Se.a)((t=>{t.dirty[e]&&(t.errors[e]=this.validate(t.values[e]))})))}validate(e){const t=this.getMinRelativeDays();return Object(je.a)(e,t)}render(){var e;const{isRequestPending:t,show:a,stepNumber:s,onClose:n,isFirstAutomatedEmailStep:i,sequenceId:r,variantNumber:c,subject:o,content:d,preheader:u,sequence:l,isFirstStep:p,sequenceStepVariantAttachments:h,sequenceStepVariantId:S,focusOn:b,steps:m,subsequenceSteps:j,defaultRelativeExecutionDay:O,isGeneratingWithAi:g,actionVariantHasSubject:V,isActionVariantGeneratedByAi:x,isSubsequence:y,isAddVariantModal:A,activeSidebarTab:I}=this.props,{values:R,errors:E}=this.state;let f=1;const D={};null===(e=y?j:m)||void 0===e||e.forEach((e=>{f+=e.relativeDays,Number(O)!==f&&(D[f]=e.number)}));const M=this.getMinRelativeDays(),w=!i,N=Object(v.b)(c),C=" Step ".concat(s," - Email Variant ").concat(N),G=g?"":"Enter a Subject",U=p?"":Object(ve.o)(l,s),P={stepNumber:s,sequenceId:r};return Object(q.jsx)(be.a,{show:a,allowEmptySubject:!!y||w,modalTitle:C,modalName:"Step",subjectPlaceholder:G,isRequestPending:t,testMailOptions:P,subject:o,content:d,onClose:n,onSubmit:this.onFormSubmit,preheader:u,shouldRenderTemplate:!0,showTitle:!1,sequenceStepVariantId:S,prevStepSubject:U,attachments:Object(qe.a)(h),stepNumber:s,variantNumber:c,focusOn:b,disableEditMode:!Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_UPDATE),showTextOnlyEmail:!0,footerPart:()=>Object(F.a)(T.a.SEQUENCE_STEP_RELATIVE_DAYS_READ)&&Object(q.jsxs)("div",{className:"day-input-spinner d-flex align-items-center",children:[Object(q.jsxs)("label",{className:"regular-2 font-medium popover-arrow-color-txt d-flex align-items-center m-0",htmlFor:"days",children:["Start this step on Day ",Object(q.jsx)(me.a,{id:"days",name:"relativeDays",className:"day-number m-0 ml-2 mr-2",variant:E.relativeDays&&me.a.Variant.Error,min:M,max:B.B.MaxDay,value:R.relativeDays,onChange:this.onInputChangeHelper,onBlur:this.onInputBlur,disabled:!Object(F.a)(T.a.SEQUENCE_STEP_RELATIVE_DAYS_UPDATE)})]}),Object(q.jsx)("span",{className:"regular-1 font-10 gray-txt-15",children:Object(Oe.a)(R.relativeDays,s,D)})]}),isGeneratingWithAi:Boolean(g),actionVariantHasSubject:V,isActionVariantGeneratedByAi:x,isSubsequence:!0,isVariantAdded:!A,activeSidebarTab:I})}}var Ve=ge;var xe=Object(n.connect)((e=>{var t,a;return{steps:e.sequence.sequence.steps,subsequenceSteps:null===(t=e.sequence)||void 0===t||null===(a=t.subsequence)||void 0===a?void 0:a.steps}}),{})(Ve),ye=a(46),Ae=a.n(ye),Ie=a(79),Re=a.n(Ie);const Ee=(e,t)=>(Re()(t).diff(e,"days")>=0&&(e=Re()(e).add(Math.ceil(Re()(t).diff(e,"days")/7),"week")),e),fe=(e,t,a,s)=>{if(0===e.length)return"";let n;if(1===e.length){if(-1!==t)return n=Re()(a).add(1,"week"),n;const i=s?Re()().tz(s).day(e[0].day):Re()().day(e[0].day);return Ee(i,a)}if(t===e.length-1){const t=parseInt(Re()(a).format("d"),10)-e[0].day;return Re()(a).add(7-t,"days")}if(-1===t){const t=parseInt(a.day(),10);let s=Ae.a.find(e,(e=>e.day>t));void 0===s&&(s=e[0]),n=Ee(Re()(a).day(s.day),a)}else n=Ee(Re()(a).day(e[t+1].day),a);return n},De=(e,t,a)=>{const s=Ae.a.findIndex(t,{day:parseInt(Re()(e).format("d"),10)});if((a?Re()(e).isSame(Re()().tz(a),"day"):Re()(e).isSame(Re()(),"day"))&&-1!==s){const r=a?parseInt(Re()().tz(a).format("HH"),10):parseInt(Re()().format("HH"),10),c=a?parseInt(Re()().tz(a).format("mm"),10):parseInt(Re()().format("mm"),10);return(n=t[s],i={hour:r,minute:c},Ae.a.find(n.slots,(e=>e.end.hour>=i.hour&&e.end.minute>i.minute||e.end.hour>i.hour)))||(e=fe(t,s,e,a)),e}var n,i;return-1!==s?e:fe(t,s,e,a)},Me=e=>{let{steps:t,schedules:a,sequenceScheduleId:n}=e;const{sequenceTimezone:i,slots:r}=Object(W.c)(a,n),c=t.map((e=>Object(s.a)(Object(s.a)({},e),{},{scheduledDay:null,stepTentativeDateMessage:{icon:"",sendingAs:"",date:"",message:""}})));let o=0;return c.forEach(((e,t)=>{o+=e.relativeDays;const a=((e,t,a,s,n)=>{if(0===s.length)return null;let i;if(0===t)i=n?Re()().tz(n).add(a,"days"):Re()().add(a,"days");else{const a=e[t-1].scheduledDay;i=null===a||void 0===a?void 0:a.add(e[t].relativeDays,"d")}return i=De(i,s,n),e[t].scheduledDay=i,i})(c,t,o,r,i),s=Object(W.h)(a);var n,d,u,l,p;"Invalid date"!==s&&(c[t].stepTentativeDateMessage={icon:Object(W.f)(null===e||void 0===e||null===(n=e.variants[0])||void 0===n||null===(d=n.payload)||void 0===d?void 0:d.subject),sendingAs:Object(W.g)(null===e||void 0===e?void 0:e.type,null===e||void 0===e?void 0:e.number,null===e||void 0===e||null===(u=e.variants[0])||void 0===u||null===(l=u.payload)||void 0===l?void 0:l.subject),date:s,message:Object(W.e)(null===e||void 0===e?void 0:e.number,null===(p=c[t-1])||void 0===p?void 0:p.stepTentativeDateMessage.date)})})),c};var we=a(107),Ne=a(283),Ce=a(497),Te=a(2138),Fe=a(39),Ge=a(85),Ue=a(803);var Pe=e=>{let{show:t,isRequestPending:a,onSubmit:s,onClose:n}=e;const[i,c]=Object(r.useState)(1),[o,d]=Object(r.useState)(1);return Object(q.jsx)(pe.a,{show:t,onClose:n,onSubmit:()=>s(i,o),isRequestPending:a,title:"Change the step order",content:Object(q.jsxs)("div",{children:[Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[Object(q.jsx)("span",{children:"Enter Day: "}),Object(q.jsx)(me.a,{id:"days",name:"relativeDays",min:1,className:"m-0 ml-2 mr-2",value:i,onChange:e=>c(Number(e))})]}),Object(q.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(q.jsx)("span",{children:"Step Position: "}),Object(q.jsx)(me.a,{id:"days",name:"relativeDays",min:1,className:"m-0 ml-2 mr-2",value:o,onChange:e=>d(Number(e))})]})]}),showSuccessButton:!0,showCancelButton:!0})},ke=a(2226),Le=a(2140);var _e=()=>Object(F.a)(T.a.SEQUENCE_STEP_WRITE)&&Object(q.jsx)(Le.a,{buttonProps:{iconLeft:Object(q.jsx)(y.a,{identifier:"math-plus"}),className:"add-step-button"},isEmptyScreen:!1,isPrefixIconVisible:!1}),We=a(41),Be=a(2199),He=a(528);var ze=()=>Object(q.jsx)(J.a,{src:G.a.SmartIdeas,alt:"sh-smart-ideas-icon/"}),Qe=a(2195),Ye=a(40),Je=a(28);var Ke=e=>{let{show:t,onClose:a,content:s}=e;return Object(q.jsx)(Ye.a,{show:t,onHide:a,onSubmit:a,onClose:a,submitButtonText:"Okay",cancelButtonText:"Cancel",className:"delete-alert-modal ai-variant-error-modal",cancelButtonVarient:Je.a.Variant.Outlined,titleContent:Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[Object(q.jsx)(b.e,{width:24,height:24,className:"red-txt-18"}),Object(q.jsx)("span",{className:"bs-ml-10 semibold-3 popover-arrow-color-txt",children:"Character Limit Exceeded"})]}),children:Object(q.jsx)("p",{className:"regular-2 line-height-20 popover-arrow-color-txt",children:s})})},Ze=a(140),Xe=a(2152),$e=a(200),et=a(2178);class tt extends c.a.Component{constructor(e){super(e),this.aiGeneratedAPIAbortRef=void 0,this.showDeleteStepModal=e=>{this.setState({showDeleteStepModal:!0,actionStep:e})},this.hideDeleteStepModal=()=>{this.setState({showDeleteStepModal:!1})},this.showCloneStepVariantModal=(e,t)=>{this.setState({showCloneStepVariantModal:!0,actionVariant:e,actionVariantNumber:t})},this.hideCloneStepVariantModal=()=>{this.setState({showCloneStepVariantModal:!1})},this.showDeleteVariantModal=(e,t,a)=>{this.setState({showDeleteVariantModal:!0,actionStep:e,actionVariant:t,actionVariantNumber:a})},this.hideDeleteVariantModal=()=>{this.setState({showDeleteVariantModal:!1})},this.getAbsoluteDaysArr=e=>{let t=1;return e.map((e=>({steps:[e],absoluteDays:t+=e.relativeDays})))},this.createStepsAbsoluteDayWise=()=>{var e;const{schedules:t,sequenceScheduleId:a,setLastAbsoluteDay:s}=this.props,n=Me({steps:this.getSteps(),schedules:t,sequenceScheduleId:a}),i=this.getAbsoluteDaysArr(n),r={};i.forEach((e=>{const{absoluteDays:t}=e;r[t]||(r[t]={absoluteDays:t,steps:[]}),r[t].steps=r[t].steps.concat(e.steps)})),this.setState({stepsArr:Object.values(r)});const c=Object.values(r);s(null===(e=c[(null===c||void 0===c?void 0:c.length)-1])||void 0===e?void 0:e.absoluteDays)},this.isFirstAutomatedEmailStep=e=>!this.getSteps().some((t=>t.number<e.number&&t.executionType===B.C.AutomatedEmail)),this.showRestrictionModalAndAddMixPanelEvent=()=>{var e,t;this.showRestrictionModal();const{trackingId:a,planName:s}=this.props;null===(e=window.analytics)||void 0===e||null===(t=e.track)||void 0===t||t.call(e,{userId:a,event:we.a.TrippedFeature,properties:{feature_type:"Added Variant",current_plan:s}})},this.showAddVariantModal=e=>{if(!Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_WRITE))return void this.showRestrictionModalAndAddMixPanelEvent();const t=this.isFirstAutomatedEmailStep(e);e.type!==B.F.Email?this.setState({isCreateTaskVariantModalVisible:!0,actionStep:e,actionStepIsFirstAutomatedEmailStep:t,initialStepType:e.type,stepType:Object(de.u)(e.type),mode:B.z.CreateVariant}):this.setState({showAddVariantModal:!0,actionStep:e,actionStepIsFirstAutomatedEmailStep:t})},this.showAddAiGeneratedVariantModal=(e,t,a)=>{var s,n;null===this.aiGeneratedAPIAbortRef.current&&(this.aiGeneratedAPIAbortRef.current=d.a.CancelToken.source());const i=this.isFirstAutomatedEmailStep(e);var r;e.type===B.F.Email&&this.setState({showAddVariantModal:!0,actionStep:e,actionStepIsFirstAutomatedEmailStep:i,actionVariantNumber:a,actionVariantHasSubject:Boolean(null===t||void 0===t||null===(r=t.payload)||void 0===r?void 0:r.subject)});const{getAIGeneratedEmailVariantRequest:c}=this.props;null===(s=window.analytics)||void 0===s||null===(n=s.track)||void 0===n||n.call(s,{userId:Object(te.E)(),event:we.a.AiVariantGenerate,properties:{shAccountId:Object(te.B)(),role:Object(te.A)(),current_plan:Object(te.y)()}}),c(e.sequenceId,e.id,t.id,this.aiGeneratedAPIAbortRef.current.token)},this.resetAIGeneratedStates=()=>{var e,t;const{resetIsAiGeneratedVariant:a,resetAiGeneratedVariantDetails:s,resetGetAIGeneratedEmailVariantRequestState:n}=this.props;null===(e=window.analytics)||void 0===e||null===(t=e.track)||void 0===t||t.call(e,{userId:Object(te.E)(),event:we.a.AiVariantDiscard,properties:{shAccountId:Object(te.B)(),role:Object(te.A)(),current_plan:Object(te.y)()}}),a(),s(),n(),this.setState({actionVariantHasSubject:!1,actionStep:null,actionStepIsFirstAutomatedEmailStep:null,actionVariantNumber:null})},this.hideAddVariantModal=()=>{var e;const{isAiGeneratedVariant:t,getAIGeneratedEmailVariantRequestStatus:a}=this.props;a===ie.a.Pending&&(null===(e=this.aiGeneratedAPIAbortRef)||void 0===e?void 0:e.current)&&(this.aiGeneratedAPIAbortRef.current.cancel({type:Ze.b.Silent,message:"API_CANCELLED"}),this.aiGeneratedAPIAbortRef.current=null,this.resetAIGeneratedStates()),t&&this.resetAIGeneratedStates(),this.setState({showAddVariantModal:!1})},this.showRestrictionModal=()=>{this.setState({isRestrictionModalShow:!0})},this.hideRestrictionModal=()=>{this.setState({isRestrictionModalShow:!1})},this.showUpdateVariantDataModal=(e,t,a)=>{if(!Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_READ))return;const s=this.isFirstAutomatedEmailStep(e);e.type!==B.F.Email?this.setState({isCreateTaskVariantModalVisible:!0,actionStep:e,actionVariant:t,actionVariantNumber:a,actionStepIsFirstAutomatedEmailStep:s,initialStepType:e.type,stepType:Object(de.u)(e.type),mode:B.z.EditVariant}):this.setState({showUpdateVariantDataModal:!0,actionStep:e,actionVariant:t,actionVariantNumber:a,actionStepIsFirstAutomatedEmailStep:s})},this.showUpdateStepOrderModal=e=>{this.setState({showUpdateStepOrderModal:!0,actionStep:e})},this.hideUpdateVariantDataModal=()=>{this.setState({showUpdateVariantDataModal:!1}),this.getSequenceAndStats()},this.showAIVariantLimitErrorModal=()=>{this.setState({showAIVariantLimitErrorModal:!0})},this.hideAiVariantLimitErrorModal=()=>{this.setState({showAIVariantLimitErrorModal:!1})},this.showUpdateVariantStatusModal=(e,t,a)=>{Object(F.a)(T.a.SEQUENCE_STEP_VARIANT_WRITE)||1===a?this.setState({showUpdateVariantStatusModal:!0,actionStep:e,actionVariant:t}):this.showRestrictionModalAndAddMixPanelEvent()},this.hideUpdateVariantStatusModal=()=>{this.setState({showUpdateVariantStatusModal:!1})},this.hideUpdateStepOrderModal=()=>{this.setState({showUpdateStepOrderModal:!1})},this.hideCreateTaskVariantModal=()=>{this.setState({isCreateTaskVariantModalVisible:!1})},this.onCloneStepVariantModalSubmit=()=>{const{actionVariant:{id:e}}=this.state,{sendCloneSequenceStepVariantRequest:t}=this.props;t(e)},this.onDeleteStepModalSubmit=()=>{const{actionStep:{id:e}}=this.state,{sendDeleteSequenceStepRequest:t}=this.props;t(this.getSequenceId(),e)},this.onDeleteVariantModalSubmit=()=>{const{actionStep:{id:e},actionVariant:{id:t}}=this.state,{sendDeleteSequenceStepVariantRequest:a}=this.props;a(this.getSequenceId(),e,t)},this.handleCalculateEmailWritingFactors=e=>{const{sendCreateEmailWritingFactorsRequest:t,sendUpdateEmailWritingFactorsRequest:a}=this.props,{actionStep:s,actionVariant:n}=this.state;if(e===ne.StepOneAdded){var i,r,c;const e=null===(i=this.getSteps())||void 0===i||null===(r=i.filter((e=>e.type===B.F.Email)))||void 0===r?void 0:r[0],a=null===(c=e.variants)||void 0===c?void 0:c[0];if(e&&a){var o,d;const s=Object(Te.a)(a.id,null===(o=a.payload)||void 0===o?void 0:o.subject,null===(d=a.payload)||void 0===d?void 0:d.content);return void t({sequenceId:this.getSequenceId(),stepId:e.id,emailWritingFactors:[s]})}}if(e===ne.VariantAdded&&1===(null===s||void 0===s?void 0:s.id)){var u,l,p;const e=null===(u=this.getSteps())||void 0===u||null===(l=u.filter((e=>e.type===B.F.Email)))||void 0===l||null===(p=l[0])||void 0===p?void 0:p.variants,a=null===e||void 0===e?void 0:e[e.length-1];if(s&&a){var h,S;const e=Object(Te.a)(a.id,null===(h=a.payload)||void 0===h?void 0:h.subject,null===(S=a.payload)||void 0===S?void 0:S.content);return void t({sequenceId:this.getSequenceId(),stepId:s.id,emailWritingFactors:[e]})}}if(e===ne.VariantUpdated&&n){var b,m,j;const e=null===(b=this.getSteps())||void 0===b||null===(m=b.filter((e=>e.type===B.F.Email)))||void 0===m||null===(j=m[0])||void 0===j?void 0:j.variants,t=null===e||void 0===e?void 0:e.find((e=>e.id===n.id));if(s&&t){var v,q;const e=Object(Te.a)(t.id,null===(v=t.payload)||void 0===v?void 0:v.subject,null===(q=t.payload)||void 0===q?void 0:q.content);return void a({sequenceId:this.getSequenceId(),stepId:s.id,emailWritingFactors:[e]})}}if(e===ne.StepOneDeleted||e===ne.ReCalculateStepOne){var O,g;const e=null===(O=this.getSteps())||void 0===O||null===(g=O.filter((e=>e.type===B.F.Email)))||void 0===g?void 0:g[0];if(e){var V;const a=null===(V=e.variants)||void 0===V?void 0:V.map((e=>{var t,a;return Object(Te.a)(e.id,null===(t=e.payload)||void 0===t?void 0:t.subject,null===(a=e.payload)||void 0===a?void 0:a.content)}));t({sequenceId:this.getSequenceId(),stepId:e.id,emailWritingFactors:a})}}},this.handleEmailWritingFactors=e=>{const{calculatingEmailWritingScore:t}=this.state;t?this.setState({calculatingEmailWritingScore:!1,emailWritingFactorAction:null}):this.setState({calculatingEmailWritingScore:!0},(()=>{this.handleCalculateEmailWritingFactors(e),this.setState({calculatingEmailWritingScore:!1})}))},this.onAddVariantModalSubmit=(e,t,a,n,i,r)=>{const{actionStep:{id:c}}=this.state,{sendAddSequenceStepVariantRequest:o,isAiGeneratedVariant:d,aiGeneratedVariantDetails:u}=this.props,l=(null===u||void 0===u?void 0:u.sequenceStepVariantAttachments)||[],p=(null===l||void 0===l?void 0:l.map((e=>e.attachmentId)))||[],h=d?[...p,...r]:[...r];var S,b;d&&(null===(S=window.analytics)||void 0===S||null===(b=S.track)||void 0===b||b.call(S,{userId:Object(te.E)(),event:we.a.AiVariantSaved,properties:{shAccountId:Object(te.B)(),role:Object(te.A)(),current_plan:Object(te.y)()}}));o(this.getSequenceId(),c,Object(s.a)({type:B.F.Email,payload:{subject:e,content:t,preheader:a},absoluteDays:i,templateId:n,attachmentIds:h||[]},d?{isAIGenerated:d}:{}))},this.onUpdateVariantDataModalSubmit=(e,t,a,s,n,i)=>{const{actionStep:{id:r},actionVariant:{id:c,payload:{subject:o,content:d}}}=this.state,{sendUpdateSequenceStepVariantDataRequest:u}=this.props;u(this.getSequenceId(),r,c,n?o===e&&d===t?{absoluteDays:n,attachmentIds:i}:{payload:{subject:e,content:t,preheader:a},absoluteDays:n,templateId:s,attachmentIds:i}:{payload:{subject:e,content:t,preheader:a},templateId:s,attachmentIds:i})},this.onUpdateStepOrderModalSubmit=(e,t)=>{const{actionStep:{id:a}}=this.state,{updateSequenceStepRequest:s}=this.props;s(this.getSequenceId(),a,{absoluteDays:e,index:t-1})},this.onUpdateVariantStatusModalSubmit=()=>{const{actionStep:{id:e},actionVariant:{id:t,status:a}}=this.state,s=a===f.a.Active?f.a.Inactive:f.a.Active,{sendUpdateSequenceStepVariantStatusRequest:n}=this.props;n(this.getSequenceId(),e,t,{status:s})},this.onUpdateStepExecutionDay=(e,t)=>{let{id:a}=e;const{sendUpdateSequenceStepExecutionDayRequest:s}=this.props;s(this.getSequenceId(),a,t)},this.getSequenceAndStats=()=>{var e;const{sequenceId:t,sendGetSequenceRequest:a,sendGetSequenceStatsRequest:s,getSequenceStatsCountRequest:n,sendGetSubsequenceRequest:i,sendGetSubsequenceStatsRequest:r,match:{params:c}}=this.props;null!==(e=Boolean(c.subsequenceId))&&void 0!==e&&e?(i(this.getSequenceId()),r(this.getSequenceId())):(s(this.getSequenceId()),a(this.getSequenceId())),n(t)},this.getDraggedDom=e=>{const t="[data-rbd-draggable-id='".concat(e,"']");return document.querySelector(t)},this.onDragEnd=e=>{var t,a;const{stepsArr:s}=this.state,{updateSequenceStepRequest:n}=this.props,{destination:i,source:r,draggableId:c}=e,o=s;let d;if(!i)return;if(i.droppableId===r.droppableId&&i.index===r.index)return;const u=s.filter((e=>e.absoluteDays===i.droppableId)),l=o.findIndex((e=>e.absoluteDays===u[0].absoluteDays));if(-1!==l){const e=o.findIndex((e=>e.steps.some((e=>e.id===Number(c)))));if(-1!==e){var p;d=o[e].steps.find((e=>e.id===Number(c))),o[e].steps=o[e].steps.filter((e=>e.id!==Number(c))),null===(p=o[l])||void 0===p||p.steps.splice(i.index,0,d);let t=1;o.forEach((e=>{e.steps.forEach((e=>{e.number=t,t+=1}))}))}}const h=o.filter((e=>0!==e.steps.length));(null===(t=h[0])||void 0===t||null===(a=t.steps[0])||void 0===a?void 0:a.type)===B.F.Email&&this.setState({emailWritingFactorAction:ne.StepOneAdded}),this.setState({stepsArr:h}),n(this.getSequenceId(),c,{absoluteDays:i.droppableId,index:i.index})},this.getSteps=()=>{var e;const{match:{params:t},sequence:a,subsequence:s}=this.props;return null!==(e=Boolean(t.subsequenceId))&&void 0!==e&&e?(null===s||void 0===s?void 0:s.steps)||[]:(null===a||void 0===a?void 0:a.steps)||[]},this.getSequenceId=()=>{var e;const{match:{params:t},sequence:a,subsequence:s}=this.props;return null!==(e=Boolean(t.subsequenceId))&&void 0!==e&&e?s.id:a.id},this.getSequence=()=>{var e;const{match:{params:t},sequence:a,subsequence:s}=this.props;return null!==(e=Boolean(t.subsequenceId))&&void 0!==e&&e?s:a},this.getListStyle=()=>({position:"relative"}),this.state={showDeleteStepModal:!1,showDeleteVariantModal:!1,showAddVariantModal:!1,showUpdateVariantDataModal:!1,showUpdateVariantStatusModal:!1,showUpdateStepOrderModal:!1,showCloneStepVariantModal:!1,actionStep:null,actionVariant:null,actionVariantNumber:null,actionStepIsFirstAutomatedEmailStep:null,isRestrictionModalShow:!1,emailWritingFactorAction:null,calculatingEmailWritingScore:!1,stepsArr:[],isCreateTaskVariantModalVisible:!1,initialStepType:null,stepType:null,mode:B.z.CreateVariant,isLoading:!0,showAIVariantLimitErrorModal:!1,actionVariantHasSubject:!1,isSubsequenceCreatedHere:!1,activeSidebarTab:et.a.EmailPreview},this.aiGeneratedAPIAbortRef=c.a.createRef(),this.onDragEnd=this.onDragEnd.bind(this),this.getSteps=this.getSteps.bind(this),this.getSequenceId=this.getSequenceId.bind(this),this.getSequence=this.getSequence.bind(this),this.createSubsequenceHandler=this.createSubsequenceHandler.bind(this)}componentDidMount(){const{sequenceId:e,sendGetScheduleRequest:t,sendGetSequenceConfigRequest:a}=this.props,s=a(null===e||void 0===e?void 0:e.toString()),n=t();Promise.all([s,n]).then((()=>{this.createStepsAbsoluteDayWise()}))}componentDidUpdate(e){const{deleteSequenceStepRequestStatus:t,deleteSequenceStepRequestMessage:a,deleteSequenceStepVariantRequestStatus:s,deleteSequenceStepVariantRequestMessage:n,deleteSequenceStepVariantRequestError:i,addSequenceStepVariantRequestStatus:r,addSequenceStepVariantRequestMessage:c,addSequenceStepVariantRequestError:o,updateSequenceStepVariantDataRequestStatus:d,updateSequenceStepVariantDataRequestMessage:u,updateSequenceStepVariantDataRequestError:l,updateSequenceStepVariantStatusRequestStatus:p,updateSequenceStepVariantStatusRequestMessage:S,updateSequenceStepVariantStatusRequestError:b,updateSequenceStepExecutionDayRequestStatus:m,updateSequenceStepExecutionDayRequestMessage:j,updateSequenceStepExecutionDayRequestError:q,updateSequenceStepRequestStatus:O,updateSequenceStepRequestMessage:g,cloneSequenceStepVariantRequestStatus:V,sequence:x,sequenceId:y,sendGetSequenceConfigRequest:A,sendGetScheduleRequest:I,tabId:R,trackingId:E,planName:f,createEmailWritingScoreForStepOne:D,sendCreateEmailWritingScoreForStepOne:M,getSequenceRequestStatus:w,updateStepsRequest:N,getAIGeneratedEmailVariantRequestStatus:C,getAIGeneratedEmailVariantRequestError:T,deductAiVariantCredit:F,createSubsequenceRequestStatus:G,subsequnceId:U,getSubsequenceRequestStatus:P,getSequenceStatsCountRequest:k}=this.props;R!==e.tabId&&"steps"===R&&(A(null===y||void 0===y?void 0:y.toString()),I()),Object(W.j)({history:Ge.a,sequence:this.getSequence(),showAddVariantModal:this.showAddVariantModal,showUpdateVariantDataModal:this.showUpdateVariantDataModal,setActiveSidebarTab:e=>{this.setState({activeSidebarTab:e})}}),Object(Fe.c)({status:w,prevStatus:e.getSequenceRequestStatus,onSuccess:()=>{this.createStepsAbsoluteDayWise()}}),Object(Fe.c)({status:P,prevStatus:e.getSubsequenceRequestStatus,onSuccess:()=>{this.createStepsAbsoluteDayWise()}}),Object(Fe.c)({status:V,prevStatus:e.cloneSequenceStepVariantRequestStatus,onSuccess:()=>{const{actionVariantNumber:e}=this.state;re.d.success("Successfully cloned variant as '".concat(Object(v.b)(e),"' variant."),{theme:re.a.New}),this.hideCloneStepVariantModal(),this.getSequenceAndStats()}}),Object(Fe.c)({status:t,prevStatus:e.deleteSequenceStepRequestStatus,onSuccess:()=>{re.d.success(a,{theme:re.a.New}),this.hideDeleteStepModal(),this.getSequenceAndStats();const{actionStep:e}=this.state;1===e.number&&this.setState({emailWritingFactorAction:ne.StepOneDeleted})}}),Object(Fe.c)({status:s,prevStatus:e.deleteSequenceStepVariantRequestStatus,onSuccess:()=>{re.d.success(n,{theme:re.a.New}),this.hideDeleteVariantModal(),this.getSequenceAndStats()},onFailed:()=>{Object(Fe.a)({error:i,onError:()=>{Object(ce.a)(i.message)}})}}),Object(Fe.c)({status:r,prevStatus:e.addSequenceStepVariantRequestStatus,onSuccess:()=>{var e,t,a;re.d.success(c,{theme:re.a.New}),this.hideAddVariantModal(),this.hideCreateTaskVariantModal(),this.getSequenceAndStats();const{actionStep:s}=this.state,n=Object(W.a)(this.getSteps());null===(e=window.analytics)||void 0===e||null===(t=e.track)||void 0===t||t.call(e,{userId:E,event:we.a.ExtraVariantAdded,properties:{sequence_id:y,sequence_title:null===x||void 0===x?void 0:x.title,sequence_type:Object(W.d)(null===(a=this.getSequence())||void 0===a?void 0:a.isSampleSequence),step_number:null===s||void 0===s?void 0:s.number,variant_number:(null===s||void 0===s?void 0:s.variants.length)+1,current_plan:f}}),1!==s.number&&s.id!==n||this.setState({emailWritingFactorAction:ne.VariantAdded})},onFailed:()=>{Object(Fe.a)({error:o,onError:()=>{Object(ce.a)(o.message)}})}}),Object(Fe.c)({status:d,prevStatus:e.updateSequenceStepVariantDataRequestStatus,onSuccess:()=>{re.d.success(u,{theme:re.a.New}),this.hideUpdateVariantDataModal(),this.hideCreateTaskVariantModal(),this.getSequenceAndStats();const{actionStep:e}=this.state,t=Object(W.a)(this.getSteps());1!==e.number&&e.id!==t||this.setState({emailWritingFactorAction:ne.VariantUpdated})},onFailed:()=>{Object(Fe.a)({error:l,onError:()=>{Object(ce.a)(l.message)}})}}),Object(Fe.c)({status:O,prevStatus:e.updateSequenceStepRequestStatus,onSuccess:()=>{var e;const{stepsArr:t}=this.state;re.d.success(g,{theme:re.a.New}),this.setState({isLoading:!1}),this.hideUpdateStepOrderModal(),N(null===(e=t[(null===t||void 0===t?void 0:t.length)-1])||void 0===e?void 0:e.absoluteDays),this.getSequenceAndStats()},onFailed:()=>{this.getSequenceAndStats()}}),Object(Fe.c)({status:p,prevStatus:e.updateSequenceStepVariantStatusRequestStatus,onSuccess:()=>{re.d.success(S,{theme:re.a.New}),this.hideUpdateVariantStatusModal(),this.getSequenceAndStats()},onFailed:()=>{Object(Fe.a)({error:b,onError:()=>{Object(ce.a)(b.message)}})}}),Object(Fe.c)({status:C,prevStatus:e.getAIGeneratedEmailVariantRequestStatus,onSuccess:()=>{F()},onFailed:()=>{this.hideAddVariantModal(),403!==T.code&&1101!==T.code&&1001!==T.code||re.d.error(T.message,{theme:re.a.New}),1102===T.code&&this.showAIVariantLimitErrorModal()}}),Object(Fe.c)({status:m,prevStatus:e.updateSequenceStepExecutionDayRequestStatus,onSuccess:()=>{re.d.success(j,{theme:re.a.New}),this.getSequenceAndStats()},onFailed:()=>{Object(Fe.a)({error:q,onError:()=>{Object(ce.a)(q.message)}})}}),Object(Fe.c)({status:w,prevStatus:e.getSequenceRequestStatus,onSuccess:()=>{var t;const{emailWritingFactorAction:a}=this.state,s=Object(W.k)(e.sequence.steps),n=null===(t=x.steps)||void 0===t?void 0:t.find((t=>{var a;return!(null===(a=e.sequence.steps)||void 0===a?void 0:a.some((e=>e.id===t.id)))}));this.setState({isLoading:!0}),h()(a)&&!s&&(null===n||void 0===n?void 0:n.type)===B.F.Email&&this.handleEmailWritingFactors(ne.StepOneAdded),JSON.stringify(x)!==JSON.stringify(e.sequence)&&a&&this.handleEmailWritingFactors(a)}}),Object(Fe.c)({status:G,prevStatus:e.createSubsequenceRequestStatus,onSuccess:()=>{const{isSubsequenceCreatedHere:e}=this.state;e&&(re.d.success("Subsequence created successfully",{theme:re.a.New}),k(y),Ge.a.push("/sequence/".concat(y,"/subsequence/").concat(U,"/conditions"))),this.setState({isSubsequenceCreatedHere:!1})},onFailed:()=>{this.setState({isSubsequenceCreatedHere:!1})}}),D&&(this.handleEmailWritingFactors(ne.StepOneAdded),M(!1))}createSubsequenceHandler(){if(Object(F.a)(T.a.SEQUENCE_WRITE)){const{createSubsequence:e,title:t,subsequencesCount:a}=this.props;return e(Object(Xe.a)(a,t)),void this.setState({isSubsequenceCreatedHere:!0})}Object(F.a)(T.a.ACCOUNT_SUBSCRIPTION_READ)?Object($e.a)(2002):Object($e.a)(3002)}render(){var e,t,a,n,i,r;const{showDeleteStepModal:o,showDeleteVariantModal:d,showAddVariantModal:u,showUpdateVariantDataModal:p,showUpdateVariantStatusModal:h,showUpdateStepOrderModal:m,showCloneStepVariantModal:j,actionStep:v,actionVariant:O,actionVariantNumber:g,actionStepIsFirstAutomatedEmailStep:V,isRestrictionModalShow:x,stepsArr:y,initialStepType:I,isCreateTaskVariantModalVisible:R,stepType:E,mode:D,isLoading:M,showAIVariantLimitErrorModal:w,actionVariantHasSubject:N,activeSidebarTab:C}=this.state,{t:G,deleteSequenceStepRequestStatus:U,deleteSequenceStepVariantRequestStatus:P,addSequenceStepVariantRequestStatus:k,updateSequenceStepVariantDataRequestStatus:L,updateSequenceStepVariantStatusRequestStatus:_,updateSequenceStepExecutionDayRequestStatus:H,updateSequenceStepRequestStatus:z,sequenceStats:Q,isFirstStep:Y,getSequenceRequestStatus:J,getSchedulesRequestStatus:K,cloneSequenceStepVariantRequestStatus:Z,getAIGeneratedEmailVariantRequestStatus:X,isAiGeneratedVariant:$,aiGeneratedVariantDetails:te,getAIGeneratedEmailVariantRequestError:ae,match:{params:ne},createSubsequence:re,getSubsequenceRequestStatus:ce,subsequeceStats:oe}=this.props,de=U===ie.a.Pending,pe=P===ie.a.Pending,Se=k===ie.a.Pending,be=L===ie.a.Pending,me=_===ie.a.Pending;let je=0;this.getSteps().forEach((e=>{je=Math.max(e.number,je)}));const ve=null!==(e=Boolean(ne.subsequenceId))&&void 0!==e&&e,qe=y.map((e=>Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("div",{className:"step-day-wrap d-flex justify-content-center mt-3",children:Object(q.jsx)("span",{className:"semibold-1 popover-arrow-color-txt",children:"Day ".concat(e.absoluteDays)})}),Object(q.jsx)(l.c,{droppableId:e.absoluteDays,children:t=>Object(q.jsxs)("div",Object(s.a)(Object(s.a)({ref:t.innerRef},t.droppableProps),{},{style:this.getListStyle(),children:[e.steps.map(((t,a)=>{let n=null;const i=ve?oe:Q;i&&i.length>0&&(n=i.filter((e=>{if(t.variants&&t.variants.length>0){return-1!==t.variants.findIndex((t=>e.variantId===t.id))}return!1})));const r=Object(s.a)(Object(s.a)({},t),{},{absoluteDay:e.absoluteDays}),c=new Date(t.createdAt).toISOString();return Object(q.jsx)(se,{index:a,step:r,lastStepNumber:je,absoluteExecutionDay:e.absoluteDays,variantStats:n,createdAt:c,onDeleteStep:()=>this.showDeleteStepModal(t),onDeleteVariant:(e,a)=>this.showDeleteVariantModal(t,e,a),onCloneVariant:(e,t)=>this.showCloneStepVariantModal(e,t),onAddVariant:()=>this.showAddVariantModal(r),onAddAiGeneratedVariant:(e,t)=>{this.showAddAiGeneratedVariantModal(r,e,t)},onUpdateVariantData:(e,t)=>this.showUpdateVariantDataModal(r,e,t),onUpdateVariantStatus:(e,a)=>this.showUpdateVariantStatusModal(t,e,a),onUpdateStepExecutionDay:e=>this.onUpdateStepExecutionDay(t,e),updateSequenceStepExecutionDayRequestStatus:H,stepTentativeDateMessage:t.stepTentativeDateMessage,isSubsequence:ve},t.id)})),t.placeholder]}))},e.absoluteDays)]},e.absoluteDays)));return Object(ee.G)(J)&&M||Object(ee.G)(K)||ve&&Object(ee.G)(ce)?Object(q.jsx)(Ue.a,{}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(l.a,{onDragEnd:this.onDragEnd,children:Object(q.jsxs)("div",{className:"step-list-inner",children:[Object(q.jsx)("ul",{children:qe}),Object(q.jsx)("div",{className:"pl-4 z-idx-1 position-relative py-3",children:Object(F.a)(T.a.SEQUENCE_STEP_WRITE)&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[Object(q.jsx)(_e,{}),Object(F.a)(T.a.SUBSEQUENCE_CREATE)&&!ve&&re&&Object(q.jsx)(A.c,{text:"Add Conditional Followup Step",placement:A.d.Bottom,children:Object(q.jsx)(S.d,{onClick:this.createSubsequenceHandler,className:"create-subsequence-btn",children:Object(q.jsx)(b.Fb,{width:20,height:20,color:"#6B7280"})})})]}),Object(q.jsx)("div",{children:this.getSteps().length<=We.a.SEQUENCE_STEP_MESSAGE_LIMIT&&Object(q.jsx)(He.c,{pageHeaderBannerMessage:G("messages.".concat(Be.b[this.getSteps().length])),Icon:Object(q.jsx)(ze,{}),className:"smart-ideas",variant:He.a.Warning})})]})})]})}),o&&Object(q.jsx)(ue,{show:o,type:null===v||void 0===v?void 0:v.type,onSubmit:this.onDeleteStepModalSubmit,onClose:this.hideDeleteStepModal,isRequestPending:de}),d&&Object(q.jsx)(le,{show:d,type:null===v||void 0===v?void 0:v.type,variantNumber:g,onSubmit:this.onDeleteVariantModalSubmit,onClose:this.hideDeleteVariantModal,isRequestPending:pe}),u&&Object(q.jsx)(xe,Object(s.a)(Object(s.a)({sequence:this.getSequence(),sequenceId:this.getSequenceId(),show:u,isFirstStep:Y,onClose:this.hideAddVariantModal,onSubmit:this.onAddVariantModalSubmit,isRequestPending:Se,isFirstAutomatedEmailStep:V,stepNumber:v.number,variantNumber:v.variants.length+1,defaultRelativeExecutionDay:v.absoluteDay,isAddVariantModal:!0,isGeneratingWithAi:X===ie.a.Pending},$&&Object(s.a)({subject:(null===te||void 0===te?void 0:te.subject)||"",content:(null===te||void 0===te?void 0:te.content)||""},(null===te||void 0===te||null===(t=te.sequenceStepVariantAttachments)||void 0===t?void 0:t.length)>0?{sequenceStepVariantAttachments:te.sequenceStepVariantAttachments}:{})),{},{actionVariantHasSubject:N})),p&&Object(q.jsx)(xe,{sequence:this.getSequence(),sequenceId:this.getSequenceId(),show:p,isFirstStep:Y,onClose:this.hideUpdateVariantDataModal,onSubmit:this.onUpdateVariantDataModalSubmit,isRequestPending:be,isFirstAutomatedEmailStep:V,subject:null===(a=O.payload)||void 0===a?void 0:a.subject,content:null===(n=O.payload)||void 0===n?void 0:n.content,preheader:null===(i=O.payload)||void 0===i?void 0:i.preheader,sequenceStepVariantId:O.id,stepNumber:v.number,selectedTemplateId:null===(r=O.templateHistory)||void 0===r?void 0:r.id,variantNumber:g,defaultRelativeExecutionDay:v.absoluteDay,sequenceStepVariantAttachments:O.sequenceStepVariantAttachments,focusOn:Object(W.b)(Ge.a),isActionVariantGeneratedByAi:(null===O||void 0===O?void 0:O.isAIGenerated)||!1,isSubsequence:ve,activeSidebarTab:C}),h&&Object(q.jsx)(he,{show:h,status:O.status===f.a.Active?f.a.Inactive:f.a.Active,onSubmit:this.onUpdateVariantStatusModalSubmit,onClose:this.hideUpdateVariantStatusModal,isRequestPending:me}),m&&Object(q.jsx)(Pe,{show:m,onSubmit:(e,t)=>this.onUpdateStepOrderModalSubmit(e,t),onClose:this.hideUpdateStepOrderModal,isRequestPending:Object(ee.G)(z)}),R&&Object(q.jsx)(ke.a,{show:R,stepType:E,initialStepType:I,onClose:this.hideCreateTaskVariantModal,mode:D,actionStep:v,variantNumber:D===B.z.CreateVariant?v.variants.length+1:g,variantStepNumber:D===B.z.CreateVariant?v.number:g,actionVariant:O,defaultAbsoluteDay:v.absoluteDay,subsequenceId:ne.subsequenceId}),x&&Object(q.jsx)(Ne.a,{show:x,modalTitle:"Upgrade your plan to add more variants",bodyContent:[G("messages.step_variant_msg_1"),G("messages.step_variant_msg_2")],emailBody:Object(Ce.a)(),onClose:this.hideRestrictionModal}),j&&Object(q.jsx)(Qe.a,{show:j,onClose:this.hideCloneStepVariantModal,onSubmit:this.onCloneStepVariantModalSubmit,isRequestPending:Object(ee.G)(Z),title:"Do you want to duplicate this?",content:"Duplicating variant will duplicate its subject, content & attachments to newly cloned variant."}),w&&Object(q.jsx)(Ke,{show:w,onClose:this.hideAiVariantLimitErrorModal,content:(null===ae||void 0===ae?void 0:ae.message)||"The first email (which will act as the prompt) must not exceed 4000 characters. Make it short to generate a variant."})]})}}var at=Object(u.c)()(tt),st=a(20),nt=a(97),it=a(78);const rt={sendGetSequenceRequest:e=>Object(st.Y)(e),sendGetSequenceStatsRequest:e=>Object(st.bb)(e),sendGetSubsequenceStatsRequest:e=>Object(st.mb)(e),sendUpdateSequenceStepExecutionDayRequest:(e,t,a)=>Object(st.Kb)(Object(s.a)({sequenceId:e,stepId:t},a)),sendDeleteSequenceStepRequest:(e,t)=>Object(st.t)({sequenceId:e,stepId:t}),sendAddSequenceStepVariantRequest:(e,t,a)=>Object(st.f)(Object(s.a)({sequenceId:e,stepId:t},a)),sendUpdateSequenceStepVariantDataRequest:(e,t,a,n)=>Object(st.Mb)(Object(s.a)({sequenceId:e,stepId:t,variantId:a},n)),sendUpdateSequenceStepVariantStatusRequest:(e,t,a,n)=>Object(st.Nb)(Object(s.a)({sequenceId:e,stepId:t,variantId:a},n)),sendCloneSequenceStepVariantRequest:e=>Object(st.m)({variantId:e}),sendDeleteSequenceStepVariantRequest:(e,t,a)=>Object(st.u)({sequenceId:e,stepId:t,variantId:a}),sendGetScheduleRequest:()=>Object(st.O)(),sendGetSequenceConfigRequest:e=>Object(st.R)({sequenceId:e}),sendCreateEmailWritingFactorsRequest:e=>Object(st.n)(e),sendUpdateEmailWritingFactorsRequest:e=>Object(st.Hb)(e),sendCreateEmailWritingScoreForStepOne:e=>Object(nt.pb)(e),updateSequenceStepRequest:(e,t,a)=>Object(st.Lb)({sequenceId:e,stepId:t,absoluteDays:a.absoluteDays,index:a.index}),updateStepsRequest:e=>Object(nt.Gb)(e),setLastAbsoluteDay:e=>Object(nt.yb)(e),getSequenceStatsCountRequest:e=>Object(st.ab)(e),getAIGeneratedEmailVariantRequest:(e,t,a,s)=>Object(st.x)({sequenceId:e,stepId:t,variantId:a,cancelToken:s}),setIsAiGeneratedVariant:()=>Object(nt.vb)(),resetIsAiGeneratedVariant:()=>Object(nt.A)(),resetAiGeneratedVariantDetails:()=>Object(nt.k)(),resetGetAIGeneratedEmailVariantRequestState:()=>Object(nt.v)(),deductAiVariantCredit:()=>Object(it.a)(),sendGetSubsequenceRequest:e=>Object(st.jb)(e)},ct=Object(n.connect)((e=>{var t,a,s,n,i;return{getSequenceRequestStatus:e.sequence.getSequenceRequest.status,getSubsequenceRequestStatus:e.sequence.getSubsequenceRequest.status,updateSequenceStepExecutionDayRequestStatus:e.sequence.updateSequenceStepExecutionDayRequest.status,updateSequenceStepExecutionDayRequestMessage:e.sequence.updateSequenceStepExecutionDayRequest.message,updateSequenceStepExecutionDayRequestError:e.sequence.updateSequenceStepExecutionDayRequest.error,updateSequenceStepRequestStatus:e.sequence.updateSequenceStepRequest.status,updateSequenceStepRequestMessage:e.sequence.updateSequenceStepRequest.message,deleteSequenceStepRequestStatus:e.sequence.deleteSequenceStepRequest.status,deleteSequenceStepRequestMessage:e.sequence.deleteSequenceStepRequest.message,deleteSequenceStepRequestError:e.sequence.deleteSequenceStepRequest.error,addSequenceStepVariantRequestStatus:e.sequence.addSequenceStepVariantRequest.status,addSequenceStepVariantRequestMessage:e.sequence.addSequenceStepVariantRequest.message,addSequenceStepVariantRequestError:e.sequence.addSequenceStepVariantRequest.error,updateSequenceStepVariantDataRequestStatus:e.sequence.updateSequenceStepVariantDataRequest.status,updateSequenceStepVariantDataRequestMessage:e.sequence.updateSequenceStepVariantDataRequest.message,updateSequenceStepVariantDataRequestError:e.sequence.updateSequenceStepVariantDataRequest.error,updateSequenceStepVariantStatusRequestStatus:e.sequence.updateSequenceStepVariantStatusRequest.status,updateSequenceStepVariantStatusRequestMessage:e.sequence.updateSequenceStepVariantStatusRequest.message,updateSequenceStepVariantStatusRequestError:e.sequence.updateSequenceStepVariantStatusRequest.error,cloneSequenceStepVariantRequestStatus:e.sequence.cloneSequenceStepVariantRequest.status,cloneSequenceStepVariantRequestMessage:e.sequence.cloneSequenceStepVariantRequest.message,deleteSequenceStepVariantRequestStatus:e.sequence.deleteSequenceStepVariantRequest.status,deleteSequenceStepVariantRequestMessage:e.sequence.deleteSequenceStepVariantRequest.message,deleteSequenceStepVariantRequestError:e.sequence.deleteSequenceStepVariantRequest.error,getSchedulesRequestStatus:e.sequence.getSchedulesRequest.status,getAIGeneratedEmailVariantRequestStatus:e.sequence.getAIGeneratedEmailVariantRequest.status,getAIGeneratedEmailVariantRequestMessage:e.sequence.getAIGeneratedEmailVariantRequest.message,getAIGeneratedEmailVariantRequestError:e.sequence.getAIGeneratedEmailVariantRequest.error,steps:e.sequence.sequence.steps,sequence:e.sequence.sequence,sequenceId:e.sequence.sequence.id,sequenceStats:e.sequence.sequenceStats,subsequeceStats:e.sequence.subsequenceStats,isFirstStep:0===e.sequence.sequence.totalSteps,schedules:e.sequence.schedules,sequenceScheduleId:null===(t=e.sequence.sequenceConfig)||void 0===t||null===(a=t.schedule)||void 0===a?void 0:a.id,trackingId:e.home.trackingId,planName:null===(s=e.home.subscription)||void 0===s?void 0:s.planName,createEmailWritingScoreForStepOne:e.sequence.createEmailWritingScoreForStepOne,isAiGeneratedVariant:e.sequence.isAiGeneratedVariant,aiGeneratedVariantDetails:e.sequence.aiGeneratedVariantDetails,title:null===(n=e.sequence.sequence)||void 0===n?void 0:n.title,createSubsequenceRequestStatus:e.sequence.createSubsequenceRequest.status,subsequnceId:e.sequence.createdSubsequenceId,createSubsequenceRequestMessage:e.sequence.createSubsequenceRequest.message,subsequencesCount:(null===(i=e.sequence.sequenceStatsCounts)||void 0===i?void 0:i.subSequenceCount)||0,subsequence:e.sequence.subsequence}}),rt);var ot=Object(i.j)(ct(at))}}]);
//# sourceMappingURL=sequence-single-step-list.e4cf8d00.chunk.js.map