(this["webpackJsonpshv3-reactapp"]=this["webpackJsonpshv3-reactapp"]||[]).push([[31],{2341:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return qe}));var o=s(15),n=s(29),a=s(20),c=s(97),i=s(37),l=s(268),r=s(78),d=s(2),u=s(1),h=s.n(u),p=s(27),S=s(62),b=s(4),q=s(703),j=s(5),g=s(115),m=s(14),v=s.n(m),O=s(255),P=s(6),w=s(17),R=s(3),E=s(95),x=s(96),C=s(19),M=s(9),f=s(314),y=s(34),N=s(533),k=s(11),U=s(21),A=s(107),I=s(2233),D=s(2232),L=s(42),T=s(16),_=s(76),B=s(240),F=s(151),V=s(176),Q=s(200),W=s(245),H=s(340),G=s(41),Z=s(100),J=s(8),Y=s(80),z=s(18),K=s(2239),X=s(798),$=s(91),ee=s(283),te=s(196),se=s(809),oe=s(85),ne=s(174),ae=s(0);var ce=e=>{let{show:t,onClose:s,onSubmit:o,isRequestPending:n,title:a="Do you want to duplicate this subsequence?",content:c="Duplicating a subsequence will duplicate the entire sequence data, and a copy along with its conditions will be created."}=e;return Object(ae.jsx)(ne.a,{show:t,className:"show-conditions-modal",title:Object(ae.jsxs)("div",{className:"d-flex align-items-center gap-10",children:[Object(ae.jsx)(j.d,{width:20,height:20,color:"#faad14"}),Object(ae.jsx)("span",{className:"line-height-1",children:a})]}),onHide:s,primaryBtnLabel:"Yes",secondaryBtnLabel:"No",primaryBtnClickedHandler:o,secondaryBtnClickedHandler:s,primaryBtnDisabled:n,primaryBtnLoading:n,children:Object(ae.jsx)("p",{children:c})})},ie=s(2098);var le=e=>Object(ae.jsx)(ie.a,Object(d.a)(Object(d.a)({},e),{},{content:"If you delete the subsequence, you will permanently lose your sequence data."}));var re=e=>Object(ae.jsx)(le,Object(d.a)(Object(d.a)({},e),{},{header:"Do you want to delete this subsequence?"})),de=s(2200),ue=s(2201);class he extends h.a.Component{constructor(e){super(e),this.popoverRef=h.a.createRef(),this.handleClickAndScrollOutside=e=>{this.popoverRef.current&&!this.popoverRef.current.contains(e.target)&&this.setState({showPopover:!1})},this.handleActivateSequenceProgress=()=>{const{profileProgress:e,updateProfileProgressRequest:t}=this.props,{actionSequence:s}=this.state;if(e&&s&&(null===(null===s||void 0===s?void 0:s.isSampleSequence)||"0"===(null===s||void 0===s?void 0:s.isSampleSequence))){const s=e.find((e=>e.profileProgressStep.stepName===Y.c.ActivateSequence)),o=e.find((e=>e.profileProgressStep.stepName===Y.c.WatchVideo));s.isCompleted||t({step:Y.c.ActivateSequence,isCompleted:!0}),o.isCompleted||t({step:Y.c.WatchVideo,isCompleted:!0})}},this.deleteSequenceRequest=e=>{const{getSubsequences:t,deleteSequenceRequestError:s,getSequenceStatsCountRequest:o,sequenceId:n}=this.props;e===R.a.Succeeded&&(J.d.success("Subsequence deleted successfully"),this.hideDeleteSingleSequenceModal(),o(n),t()),e===R.a.Failed&&s&&Object(Z.a)(s.message)},this.pauseResumeSequenceRequest=e=>{4001===e.code?this.hidePauseResumeSequenceModal():2001===e.code?Object(Z.a)(Object(ae.jsxs)("p",{children:["Attached email account is disconnected. Click",Object(ae.jsx)(S.a,{to:"/email-accounts",children:" here "})," to connect and start engaging with your prospects."]})):3001===e.code?Object(Z.a)(Object(ae.jsxs)("p",{children:["All email accounts are disconnected. Click",Object(ae.jsx)(S.a,{to:"/email-accounts",children:" here "})," to connect and start engaging with your prospects."]}),"Email accounts are disconnected"):Object(Z.a)(null===e||void 0===e?void 0:e.message)},this.showPauseResumeSequenceModal=(e,t)=>{const{remainingEmailSentLimit:s,verified:o,trackingId:n,planName:a}=this.props;var c,i;Object(V.a)()?this.setState({showUpgradePlanErrorModal:!0}):Object(C.a)(z.a.SUBSEQUENCE_RESUME)?0===s&&t||(null===e||void 0===e?void 0:e.isSequenceHasOverLimitEmails)?this.showRestrictionErrorModal():o?Object(E.a)(x.a.SEQUENCES_PAUSE_RESUME)&&this.setState({showPauseResumeSequenceModal:!0,actionSequence:e}):this.showVerifyEmailModal():(t&&(null===(c=window.analytics)||void 0===c||null===(i=c.track)||void 0===i||i.call(c,{userId:n,event:A.a.TrippedFeature,properties:{feature_type:"Subsequence Activate",current_plan:a}})),this.setState({showUpgradePlanErrorModal:!0}))},this.skipConnectEmailAccount=()=>{H.a.dispatch(G.a.MODAL_HANDLER,{isModalOpened:!1})},this.showCloneSequenceModal=e=>{const{role:t}=this.props;Object(E.a)(x.a.SEQUENCES_CLONE)?this.setState({showCloneSequenceModal:!0,actionSequence:e}):t===W.a.ADMIN?Object(Q.a)(2004):Object(Q.a)(3004)},this.hideUpgradePlanModal=()=>{this.setState({showUpgradePlanModal:!1})},this.showUpgradePlanModal=()=>{this.setState({showUpgradePlanModal:!0})},this.showDeleteSingleSequenceModal=e=>{this.setState({showDeleteSingleSequenceModal:!0,actionSequence:e})},this.showRestrictionErrorModal=()=>{this.setState({isRestrictionModalVisible:!0})},this.hideRestrictionErrorModal=()=>{this.setState({isRestrictionModalVisible:!1})},this.hidePauseResumeSequenceModal=()=>{this.setState({showPauseResumeSequenceModal:!1})},this.hideCloneSequenceModal=()=>{this.setState({showCloneSequenceModal:!1})},this.hideDeleteSingleSequenceModal=()=>{this.setState({showDeleteSingleSequenceModal:!1})},this.showOnboardingPopover=()=>{this.setState({showOnboarding:!0})},this.hideOnboardingPopover=()=>{const{handleActivateSequenceTooltip:e}=this.props;e(!1),this.setState({showOnboarding:!1})},this.showSequenceProgressPopover=(e,t)=>{var s,o,n;this.setState({selectedProgressPopoverRowId:e}),null===(s=window)||void 0===s||null===(o=s.analytics)||void 0===o||null===(n=o.track)||void 0===n||n.call(o,{userId:Object(U.E)(),event:A.a.CheckedSequenceProgress,properties:{shAccountId:Object(U.B)(),role:Object(U.A)(),current_plan:Object(U.y)(),sequenceId:e,trackingId:Object(U.E)(),sequence_progress_percentage:t}})},this.hideSequenceProgressPopover=()=>{this.setState({selectedProgressPopoverRowId:null})},this.showProspectPopover=(e,t)=>{var s,o,n;this.setState({selectedPropspectPopoverRowId:e}),null===(s=window)||void 0===s||null===(o=s.analytics)||void 0===o||null===(n=o.track)||void 0===n||n.call(o,{userId:Object(U.E)(),event:A.a.ProspectStepBifurcation,properties:{shAccountId:Object(U.B)(),role:Object(U.A)(),current_plan:Object(U.y)(),sequenceId:e,trackingId:Object(U.E)(),prospects:t}})},this.hideProspectPopover=()=>{this.setState({selectedPropspectPopoverRowId:null})},this.handleTogglePopover=e=>{this.setState({showPopover:e})},this.handlePopoverClose=()=>{this.setState({showPopover:!1})},this.onSequenceClick=e=>{const{sequenceId:t}=this.props;oe.a.push("/sequence/".concat(t,"/subsequence/").concat(e.id,"/conditions"))},this.onPauseResumeSequenceModalSubmit=()=>{if(!Object(C.a)(z.a.SEQUENCE_UPDATE_STATUS)&&Object(V.a)()){const e="Please upgrade to enable the sequence",t=["Your account is downgraded to a free plan. Upgrade to a paid plan to enable the sequence and resume email sending."];return F.b.showModal(e,t,!0)}const{sendPauseResumeSequenceRequest:e}=this.props,{actionSequence:t}=this.state,s=t,o=s.progress===M.s.Pause||s.progress===M.s.Draft?M.o.Resume:M.o.Pause;Object(C.a)(z.a.SEQUENCE_UPDATE_STATUS)&&e(s.id,o)},this.onCloneSequenceModalSubmit=()=>{const{sendCloneSequenceRequest:e}=this.props,{actionSequence:t}=this.state;Object(C.a)(z.a.SEQUENCE_WRITE)&&e(t.id)},this.onDeleteSingleSequenceModalSubmit=()=>{const{actionSequence:e}=this.state,{sendDeleteSequenceRequest:t,resetFirstSequenceData:s}=this.props;t(e.id),s()},this.onAction=(e,t)=>{switch(e){case"edit":this.onSequenceClick(t);break;case"clone":this.showCloneSequenceModal(t);break;case"delete":this.showDeleteSingleSequenceModal(t)}},this.renderSequenceState=e=>Object(ae.jsx)("span",{children:e>0?"".concat(e):"-"}),this.renderPercentageState=e=>Object(ae.jsx)("span",{children:e>0?"".concat(e,"%"):"-"}),this.renderSequenceCellState=e=>Object(ae.jsx)("span",{children:e>0?Object(B.a)(e):"-"}),this.renderScorePercentageState=e=>Object(ae.jsx)("span",{children:e>0?"(".concat(e,"%)"):""}),this.getSubsequenceColumn=()=>{const{onSort:e,agencyConfig:t,atmRole:s}=this.props,o=!!(null===t||void 0===t?void 0:t.clientBaseUrl),n="client-full-access"===s||"agency-client-user"===s?[Object(C.a)(z.a.SEQUENCE_UPDATE)&&{key:"edit",icon:T.a.Pencil,displayName:"Edit",position:"out"}]:[Object(C.a)(z.a.SEQUENCE_UPDATE)&&{key:"edit",icon:T.a.Pencil,displayName:"Edit",position:"out"},Object(C.a)(z.a.SEQUENCE_WRITE)&&{key:"clone",icon:T.a.Copy,displayName:"Duplicate",position:"out"},Object(C.a)(z.a.SEQUENCE_DELETE)&&{key:"delete",icon:T.a.TrashLight,displayName:"Delete",position:"out"}];return[Object(C.a)(z.a.SEQUENCE_WRITE)&&{dataField:"progressActive",text:"",component:"switch",headerClasses:"sequence-switch-header-col",cellClasses:"sequence-switch-col",componentClasses:"sequence-switch",cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:24,height:14})},{dataField:"title",text:"Subsequence Name",component:"sequence-name-field",headerClasses:"client-sequence-name-header",cellClasses:"subsequence-name",onSort:(t,s)=>e(M.y.Title,s),headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:120,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:180,height:14})},{dataField:"sequenceProgressPer",text:"Subsequence Progress",headerAlign:"start",sort:!0,onSort:(t,s)=>e(M.y.SequenceProgressPer,s),headerComponent:()=>{const{showPopover:e}=this.state;return Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex sequence-progress-col"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)("span",{children:"Subsequence Progress"}),Object(ae.jsx)(k.b,{show:e,onToggle:this.handleTogglePopover,placement:k.d.Bottom,className:"sequence-progress-col-tooltip",content:Object(ae.jsx)("div",Object(d.a)(Object(d.a)({ref:this.popoverRef},Object(w.a)((e=>e.stopPropagation()))),{},{children:Object(ae.jsxs)("div",{className:"d-flex inner-container",children:[Object(ae.jsxs)("div",{className:"content",children:["It indicates how many prospects have moved forward in the subsequence who either received all the emails or finished midway"," ",!o&&Object(ae.jsx)("a",{href:(null===L.a||void 0===L.a?void 0:L.a.sequenceViewBlog)||"",target:"_blank",rel:"noreferrer",children:"Learn More"})]}),Object(ae.jsx)(j.eb,Object(d.a)({className:"cross-icon-sequence"},Object(w.a)((e=>{e.stopPropagation(),this.handlePopoverClose()}))))]})})),children:Object(ae.jsx)(j.Mb,{onClick:e=>e.stopPropagation(),className:"info-circle-icon ".concat(e?"active":"")})})]}))},component:(e,t)=>{var s,o;const{selectedProgressPopoverRowId:n}=this.state,a=(null===(s=t.metrics)||void 0===s||null===(o=s.sequenceProgress)||void 0===o?void 0:o.percentage)||0,c=a>0,i=c?"#bfdbfe":"#e5e7eb",l=c?"#3b82f6":"#e5e7eb";return Object(ae.jsx)("div",{className:"d-flex",children:Object(ae.jsx)(D.a,{show:n===(null===t||void 0===t?void 0:t.id),row:t,percentage:a,textColor:l,trailColor:i,showOverlayCard:()=>{var e,s;return this.showSequenceProgressPopover(null===t||void 0===t?void 0:t.id,null===t||void 0===t||null===(e=t.metrics)||void 0===e||null===(s=e.sequenceProgress)||void 0===s?void 0:s.percentage)},hideOverlayCard:()=>this.hideSequenceProgressPopover()})})},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:120,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:180,height:14}),cellClasses:"sequence-progress-cell",headerClasses:"client-sequence-progress-header"},{dataField:"total",text:"Prospect",sort:!0,onSort:(t,s)=>e(M.y.Total,s),headerComponent:()=>Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex prospect-col-header-icon"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)(j.Sc,{}),Object(ae.jsx)("span",{children:"Prospect"})]})),headerAlign:"start",component:(e,t)=>{var o,n,a,c,i,l;const{sequenceId:r}=this.props,{selectedPropspectPopoverRowId:u}=this.state;return Object(ae.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(ae.jsx)(I.a,{show:u===(null===t||void 0===t?void 0:t.id),cell:null===t||void 0===t||null===(o=t.metrics)||void 0===o||null===(n=o.total)||void 0===n?void 0:n.value,row:t,hideOverlayCard:()=>this.hideProspectPopover(),showOverlayCard:()=>this.showProspectPopover(null===t||void 0===t?void 0:t.id,e),renderCellValue:this.renderSequenceCellState(null===t||void 0===t||null===(a=t.metrics)||void 0===a||null===(c=a.total)||void 0===c?void 0:c.value)}),"client-restricted-access"!==s&&(null===t||void 0===t||null===(i=t.metrics)||void 0===i||null===(l=i.total)||void 0===l?void 0:l.value)>0&&Object(ae.jsx)("div",Object(d.a)(Object(d.a)({},Object(w.a)((()=>Object(P.Z)("/sequence/".concat(r,"/subsequence/").concat(t.id,"/prospects"))))),{},{children:Object(ae.jsx)(j.m,{className:"arrow-up-right-icon"})}))]},"prospect-".concat(t.id))},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:62,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:28,height:14}),cellClasses:"prospect-col-cell",headerClasses:"client-prospect-col-header"},{dataField:"contacted",text:"Contacted",sort:!0,onSort:(t,s)=>e(M.y.Contacted,s),headerComponent:()=>Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex contacted-col-header-icon"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)(j.Wb,{}),Object(ae.jsx)("span",{children:"Contacted"})]})),headerAlign:"start",component:(e,t)=>{var s,o;return this.renderSequenceCellState(null===(s=t.metrics)||void 0===s||null===(o=s.contacted)||void 0===o?void 0:o.value)},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:62,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:28,height:14}),cellClasses:"contacted-col-cell",headerClasses:"client-contacted-col-header"},{dataField:"opened",cellClasses:"opened-col-cell",text:"Opened",headerComponent:()=>Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex opened-col-header-icon"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)(j.ac,{}),Object(ae.jsx)("span",{children:"Opened"})]})),sort:!0,onSort:(t,s)=>e(M.y.Opened,s),component:(e,t)=>{var s,o,n,a;return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("span",{className:"total-opened-count",children:this.renderSequenceCellState(null===(s=t.metrics)||void 0===s||null===(o=s.opened)||void 0===o?void 0:o.value)})," ",this.renderScorePercentageState(null===(n=t.metrics)||void 0===n||null===(a=n.opened)||void 0===a?void 0:a.percentage)]})},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:70,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:28,height:14})},{dataField:"replied",cellClasses:"replied-positive-col-cell",text:"Replied",headerComponent:()=>Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex replied-col-header-icon"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)(j.g,{}),Object(ae.jsx)("span",{children:"Replied"})]})),sort:!0,onSort:(t,s)=>e(M.y.Replied,s),component:(e,t)=>{var s,o,n,a,c,i,l,r;return Object(ae.jsx)("div",Object(d.a)(Object(d.a)({},(null===t||void 0===t||null===(s=t.metrics)||void 0===s||null===(o=s.replied)||void 0===o?void 0:o.value)>0?Object(w.a)((()=>{var e,s,o;null===(e=window)||void 0===e||null===(s=e.analytics)||void 0===s||null===(o=s.track)||void 0===o||o.call(s,{userId:Object(U.E)(),event:A.a.CheckedRepliesFromSequence,properties:{shAccountId:Object(U.B)(),role:Object(U.A)(),current_plan:Object(U.y)(),sequenceId:t.id,trackingId:Object(U.E)()}}),Object(P.Z)("/conversations?type=all&sequences=".concat(null===t||void 0===t?void 0:t.id))})):{}),{},{children:(null===t||void 0===t||null===(n=t.metrics)||void 0===n||null===(a=n.replied)||void 0===a?void 0:a.value)>0?Object(ae.jsx)(O.a,{text:"Click to see replies in Unified Inbox",placement:k.d.Bottom,children:Object(ae.jsxs)("span",{className:"count-percentage",children:[Object(ae.jsx)("span",{className:"total-replied-positive-count",children:this.renderSequenceCellState(null===t||void 0===t||null===(c=t.metrics)||void 0===c||null===(i=c.replied)||void 0===i?void 0:i.value)}),Object(ae.jsx)("span",{children:this.renderScorePercentageState(null===(l=t.metrics)||void 0===l||null===(r=l.replied)||void 0===r?void 0:r.percentage)})]})}):"-"}))},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:70,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:28,height:14})},{dataField:"positiveSentiment",cellClasses:"replied-positive-col-cell",text:"Positive",headerComponent:()=>Object(ae.jsxs)("div",Object(d.a)(Object(d.a)({className:"d-flex positive-col-header-icon"},Object(w.a)((e=>e.stopPropagation()))),{},{children:[Object(ae.jsx)(j.Qb,{}),Object(ae.jsx)("span",{children:"Positive"})]})),sort:!0,onSort:(t,s)=>e(M.y.PositiveSentiment,s),component:(e,t)=>{var s,o,n,a,c,i,l,r;return Object(ae.jsx)("div",Object(d.a)(Object(d.a)({},(null===t||void 0===t||null===(s=t.metrics)||void 0===s||null===(o=s.positiveSentiment)||void 0===o?void 0:o.value)>0?Object(w.a)((()=>{var e,s,o;null===(e=window)||void 0===e||null===(s=e.analytics)||void 0===s||null===(o=s.track)||void 0===o||o.call(s,{userId:Object(U.E)(),event:A.a.CheckedPositiveRepliesFromSequence,properties:{shAccountId:Object(U.B)(),role:Object(U.A)(),current_plan:Object(U.y)(),sequenceId:t.id,trackingId:Object(U.E)()}}),Object(P.Z)("/conversations?type=all&sequences=".concat(null===t||void 0===t?void 0:t.id,"&sentiment=Positive"))})):{}),{},{children:(null===t||void 0===t||null===(n=t.metrics)||void 0===n||null===(a=n.positiveSentiment)||void 0===a?void 0:a.value)>0?Object(ae.jsx)(O.a,{text:"Click to see positive replies in Unified Inbox",placement:k.d.Bottom,children:Object(ae.jsxs)("span",{className:"count-percentage",children:[Object(ae.jsx)("span",{className:"total-replied-positive-count",children:this.renderSequenceCellState(null===(c=t.metrics)||void 0===c||null===(i=c.positiveSentiment)||void 0===i?void 0:i.value)}),Object(ae.jsx)("span",{children:this.renderScorePercentageState(null===(l=t.metrics)||void 0===l||null===(r=l.positiveSentiment)||void 0===r?void 0:r.percentage)})]})}):"-"}))},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:70,height:14}),cellLoadingSkeleton:Object(ae.jsx)(b.l,{width:28,height:14})},{dataField:"userName",cellClasses:"sequence-owner",text:"Created By",headerStyle:()=>({minWidth:"10.5rem",width:"10.5rem"}),headerClasses:"created-by-header",headerComponent:()=>Object(ae.jsx)("span",{children:"Created By"}),component:e=>{const[t,s]=(null===e||void 0===e?void 0:e.split(" "))||["",""];return Object(ae.jsx)("div",{className:"created-by-wrap",children:Object(ae.jsxs)("div",{className:"subsequence-created-by",children:[Object(ae.jsx)(N.a,{firstName:t,lastName:s,className:"sequence-avatar"}),Object(ae.jsx)("span",{className:"owner-name popover-arrow-color-txt ml-2",children:"".concat(t," ").concat(s)})]})})},headerLoadingSkeleton:Object(ae.jsx)(b.l,{width:90,height:14}),cellLoadingSkeleton:Object(ae.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ae.jsx)(b.l,{width:24,height:24,circle:!0}),Object(ae.jsx)("div",{style:{marginLeft:"10px"},children:Object(ae.jsx)(b.l,{width:80,height:14})})]})},"client-restricted-access"!==s&&{dataField:"actions",text:"",align:"right",headerClasses:"client-sequence-action-header",component:(e,t)=>{if(Object(C.a)(z.a.SEQUENCE_UPDATE)||Object(C.a)(z.a.SEQUENCE_WRITE)||Object(C.a)(z.a.SEQUENCE_DELETE))return Object(ae.jsx)("div",{className:"sequence-action",children:Object(ae.jsxs)(q.a,{bsPrefix:"dropdown-custom",drop:"down",children:[Object(ae.jsx)(q.a.Toggle,{bsPrefix:"dropdown-toggle-custom",variant:"dropdown-custom",children:Object(ae.jsx)(j.mb,{})}),Object(g.createPortal)(Object(ae.jsx)(q.a.Menu,{bsPrefix:"dropdown-menu-custom",className:"sequence-action-dropdown",children:n.map((e=>"delete"===e.key&&t.progress!==M.s.Draft?null:Object(ae.jsxs)(q.a.Item,Object(d.a)(Object(d.a)({},Object(w.a)((()=>this.onAction(e.key,t)))),{},{children:[Object(ae.jsx)(y.a,{src:e.icon,className:"pencil-icon"})," ",e.displayName]}),e.key)))}),document.body)]})})}}].filter((e=>e))},this.showVerifyEmailModal=()=>{this.setState({isVerifyEmailModalShow:!0})},this.hideVerifyEmailModal=()=>{this.setState({isVerifyEmailModalShow:!1})},this.renderTotalStepsCell=e=>Object(ae.jsx)("span",{children:e}),this.state={showPauseResumeSequenceModal:!1,showCloneSequenceModal:!1,showDeleteSingleSequenceModal:!1,actionSequence:null,showOnboarding:!1,showUpgradePlanModal:!1,showUpgradePlanErrorModal:!1,isRestrictionModalVisible:!1,isVerifyEmailModalShow:!1,showPopover:!1,selectedProgressPopoverRowId:null,selectedPropspectPopoverRowId:null},this.renderSequenceState=this.renderSequenceState.bind(this),this.showRestrictionErrorModal=this.showRestrictionErrorModal.bind(this),this.hideUpgradePlanErrorModal=this.hideUpgradePlanErrorModal.bind(this),this.renderUpgradePlanErrorModal=this.renderUpgradePlanErrorModal.bind(this),this.showVerifyEmailModal=this.showVerifyEmailModal.bind(this),this.hideVerifyEmailModal=this.hideVerifyEmailModal.bind(this)}componentDidMount(){const{showActivateSequenceTooltip:e}=this.props;e&&this.showOnboardingPopover(),document.addEventListener("mousedown",this.handleClickAndScrollOutside),document.addEventListener("scroll",this.handleClickAndScrollOutside,!0)}componentDidUpdate(e){const{pauseResumeSequenceRequestStatus:t,pauseResumeSequenceRequestError:s,pauseResumeSequenceRequestMessage:o,cloneSequenceRequestStatus:n,cloneSequenceRequestError:a,deleteSequenceRequestStatus:c,getSubsequences:i,updateProfileProgressRequestStatus:l,sendGetUserSettingsRequest:r,showActivateSequenceTooltip:d,getSequenceStatsCountRequest:u,sequenceId:h}=this.props,{showPauseResumeSequenceModal:p}=this.state;p&&Object(P.q)({status:t,prevStatus:e.pauseResumeSequenceRequestStatus,onSuccess:()=>{this.handleActivateSequenceProgress(),J.d.success("Subsequence ".concat((null===o||void 0===o?void 0:o.includes("paused"))?"paused":"activated"," successfully")),this.hidePauseResumeSequenceModal(),i()},onFailed:()=>{Object(P.o)({error:s,onError:()=>{this.pauseResumeSequenceRequest(s),this.hidePauseResumeSequenceModal()}})}}),Object(P.q)({status:l,prevStatus:e.updateProfileProgressRequestStatus,onSuccess:()=>{r()}}),Object(P.q)({status:n,prevStatus:e.cloneSequenceRequestStatus,onSuccess:()=>{J.d.success("Subsequence duplicated successfully"),this.hideCloneSequenceModal(),u(h),i()},onFailed:()=>{Object(P.o)({error:a,onError:()=>{Object(Z.a)(a.message)}})}}),c!==e.deleteSequenceRequestStatus&&this.deleteSequenceRequest(c),d!==e.showActivateSequenceTooltip&&d&&this.showOnboardingPopover()}componentWillUnmount(){const{resetPauseResumeSequenceState:e}=this.props;e(),document.removeEventListener("mousedown",this.handleClickAndScrollOutside),document.removeEventListener("scroll",this.handleClickAndScrollOutside,!0)}hideUpgradePlanErrorModal(){this.setState({showUpgradePlanErrorModal:!1})}renderShowPauseResumeSequenceModal(){const{pauseResumeSequenceRequestStatus:e}=this.props,{showPauseResumeSequenceModal:t,actionSequence:s}=this.state,o=e===R.a.Pending;return t?Object(ae.jsx)(de.a,{show:Object(C.a)(z.a.SEQUENCE_WRITE),action:s.progress===M.s.Active?M.o.Pause:M.o.Resume,onSubmit:this.onPauseResumeSequenceModalSubmit,onClose:this.hidePauseResumeSequenceModal,isRequestPending:o}):null}renderShowCloneSequenceModal(){const{cloneSequenceRequestStatus:e}=this.props,{showCloneSequenceModal:t}=this.state,s=e===R.a.Pending;return t&&Object(E.a)(x.a.SEQUENCES_CLONE)?Object(ae.jsx)(ce,{show:t,onSubmit:this.onCloneSequenceModalSubmit,onClose:this.hideCloneSequenceModal,isRequestPending:s}):null}renderShowDeleteSingleSequenceModal(){const{deleteSequenceRequestStatus:e}=this.props,{showDeleteSingleSequenceModal:t}=this.state,s=e===R.a.Pending;return t?Object(ae.jsx)(re,{show:t,onSubmit:this.onDeleteSingleSequenceModalSubmit,onClose:this.hideDeleteSingleSequenceModal,isRequestPending:s}):null}renderUpgradePlanModal(){const{showUpgradePlanModal:e}=this.state;return e?Object(ae.jsx)(se.a,{onClose:this.hideUpgradePlanModal}):null}renderUpgradePlanErrorModal(){const{showUpgradePlanErrorModal:e}=this.state;return e?Object(ae.jsx)(ue.a,{show:e,onClose:this.hideUpgradePlanErrorModal}):null}renderRestrictionsModal(){const{remainingEmailSentLimit:e}=this.props,{isRestrictionModalVisible:t}=this.state;return t&&Object(ae.jsx)(ee.a,{show:t,onClose:this.hideRestrictionErrorModal,bodyContent:0===e?Object(f.b)():Object(f.c)(),emailBody:Object(te.a)(),modalTitle:"Upgrade your plan to resume subsequence"})}render(){const{sequences:e,paginationOptions:t,onPaginationOptionsChange:s,sort:o,t:n}=this.props,{showOnboarding:a}=this.state,c=this.getSubsequenceColumn(),i=e.map((e=>Object(d.a)(Object(d.a)({},e),{},{progressActive:e.progress===M.s.Active,sequenceStatusData:{pausedAt:e.pausedAt,sequencepauseReason:e.pausedReasonIdentifier,sequenceProgress:e.progress}}))),{isVerifyEmailModalShow:l}=this.state,{getSubsequencesRequestStatus:r,pageHeaderBannerMessage:u}=this.props,h=v()(["subsequence-list",{"sm-table":u}]),p=Object(P.G)(r);return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("div",{className:h,children:Object(ae.jsx)($.a,{onAction:this.onAction,data:i,columns:c,sort:{dataField:o.sortBy===M.y.Status?"sequenceStatusData":o.sortBy,order:1===o.order?"asc":"desc"},useCustomSortIcon:!0,onChange:(e,t,s,o)=>this.showPauseResumeSequenceModal(o,e),paginationOptions:{options:Object(d.a)({},t)},onPaginationOptionsChange:s,isNewPagination:!0,headerVisibleForGenerateColumn:!0,pagination:_.b.SHOW,headerWrapperClasses:"sequence-table-header",bodyWrapperClasses:"sequence-body-wrapper",isLoading:p,isSubsequence:!0})}),this.renderShowPauseResumeSequenceModal(),this.renderShowCloneSequenceModal(),this.renderShowDeleteSingleSequenceModal(),this.renderUpgradePlanModal(),this.renderUpgradePlanErrorModal(),this.renderRestrictionsModal(),Object(ae.jsx)(K.a,{show:a,target:document.getElementsByClassName("table-switch")[0],content:n("messages.activate_sequence_message"),placement:k.d.Right,onHide:this.hideOnboardingPopover,className:"show-activate-sequence-popover"}),Object(ae.jsx)(X.a,{show:l,onClose:this.hideVerifyEmailModal})]})}}var pe=Object(p.c)()(he);const Se={sendPauseResumeSequenceRequest:(e,t)=>Object(a.tb)({sequenceId:e,action:t}),sendCloneSequenceRequest:e=>Object(a.l)(e),sendDeleteSequenceRequest:e=>Object(a.s)(e),checkedChange:(e,t)=>Object(c.f)({row:e,isSelect:t}),checkChangeAll:(e,t)=>Object(c.d)({rows:e,isSelect:t}),sendGetUserSettingsRequest:()=>Object(i.m)(),updateProfileProgressRequest:e=>Object(l.a)(e),handleActivateSequenceTooltip:e=>Object(r.t)({showActivateSequenceTooltip:e}),resetFirstSequenceData:()=>Object(r.l)(),resetPauseResumeSequenceState:()=>Object(c.F)(),getSequenceStatsCountRequest:e=>Object(a.ab)(e)},be=Object(o.connect)((e=>{var t,s,o,n,a,c,i;return{getSubsequencesRequestStatus:e.sequence.getSubsequencesRequest.status,getSubsequencesRequestMessage:e.sequence.getSubsequencesRequest.message,getSubsequencesRequestError:e.sequence.getSubsequencesRequest.error,getSequencesStatsRequestStatus:e.sequence.getSequencesStatsRequest.status,getSequencesStatsRequestMessage:e.sequence.getSequencesStatsRequest.message,getSequencesStatsRequestError:e.sequence.getSequencesStatsRequest.error,pauseResumeSequenceRequestStatus:e.sequence.pauseResumeSequenceRequest.status,pauseResumeSequenceRequestMessage:e.sequence.pauseResumeSequenceRequest.message,pauseResumeSequenceRequestError:e.sequence.pauseResumeSequenceRequest.error,cloneSequenceRequestStatus:e.sequence.cloneSequenceRequest.status,cloneSequenceRequestMessage:e.sequence.cloneSequenceRequest.message,cloneSequenceRequestError:e.sequence.cloneSequenceRequest.error,deleteSequenceRequestStatus:e.sequence.deleteSequenceRequest.status,deleteSequenceRequestMessage:e.sequence.deleteSequenceRequest.message,deleteSequenceRequestError:e.sequence.deleteSequenceRequest.error,sequences:e.sequence.subsequences,sequencesStats:e.sequence.sequencesStats,selectedSequence:e.sequence.selectedSequence,sequencesCount:e.sequence.subsequences.length,role:e.home.role,subscriptionPlan:null===(t=e.home.subscription)||void 0===t?void 0:t.planCode,profileProgress:e.home.profileProgress,updateProfileProgressRequestStatus:e.home.updateProfileProgressRequest.status,updateProfileProgressRequestMessage:e.home.updateProfileProgressRequest.message,updateProfileProgressRequestError:e.home.updateProfileProgressRequest.error,showActivateSequenceTooltip:e.home.application.showActivateSequenceTooltip,featureUsages:e.home.featureUsages,remainingEmailSentLimit:parseInt(null===(s=e.home.getPostLoadMetaResponse)||void 0===s||null===(o=s.accountUsageQuotaRemaining)||void 0===o?void 0:o["EMAIL.SEND"],10),pageHeaderBannerMessage:e.pageHeader.message,verified:e.home.verified,agencyConfig:null===(n=e.home)||void 0===n?void 0:n.agencyConfig,atmRole:null===(a=e.home)||void 0===a?void 0:a.atmRole,sequenceId:null===(c=e.sequence.sequence)||void 0===c?void 0:c.id,trackingId:e.home.trackingId,planName:null===(i=e.home.subscription)||void 0===i?void 0:i.planName}}),Se);var qe=Object(n.j)(be(pe))}}]);
//# sourceMappingURL=subsequence-list-table.7929b873.chunk.js.map